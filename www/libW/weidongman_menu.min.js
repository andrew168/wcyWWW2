/*! bone 2015-02-10 */
function initMenu(){clearSubjectModeAndMultiSelect(),Menu.JointStarted=!1,Menu.GroupStarted=!1,Menu.tb3Dfy=!1,TQ.InputCtrl.showMarkerOnly=!1}function setSubjectModeAndMultiSelect(){TQ.InputCtrl.inSubobjectMode||(!Menu.JointStarted,Menu.JointStarted&&$("#subElementMode").click()),TQ.InputCtrl.vkeyCtrl||$("#tbVkeyCtrl").click()}function clearSubjectModeAndMultiSelect(){TQ.InputCtrl.showMarkerOnly=!1,TQ.InputCtrl.inSubobjectMode&&$("#subElementMode").click(),TQ.InputCtrl.vkeyCtrl&&$("#tbVkeyCtrl").click(),Menu.tb3Dfy&&$("#tb3Dfy").click()}function utilToolbarItemClick(a,b){$(document).on("click",a,function(){b()})}function initToolbar(){function a(){save()}$("#repeat").buttonset(),utilToolbarItemClick("#newScene",function(){TQ.WdMenu.newScene()}),utilToolbarItemClick("#save",a),utilToolbarItemClick("#tbUndo",TQ.CommandMgr.undo),utilToolbarItemClick("#tbRedo",TQ.CommandMgr.redo),utilToolbarItemClick("#tbDelete",TQ.SelectSet.delete),utilToolbarItemClick("#addText",function(){$(".tabmenu_left_ajax_btn").attr("display_status",0),$("#category_menu_div").hide(),TQ.TextEditor.addText(TQ.Dictionary.defaultText),TQ.TextEditor.create()}),utilToolbarItemClick("#skinning",function(){TQ.SkinningCtrl.start()}),utilToolbarItemClick("#joint",menu_joint),utilToolbarItemClick("#tbMinAngle",function(){TQ.IKCtrl.setLimitation(0)}),utilToolbarItemClick("#tbMaxAngle",function(){TQ.IKCtrl.setLimitation(1)}),utilToolbarItemClick("#tbUnjoint",function(){TQ.InputCtrl.vkeyUnjoint=!0,menu_unJoint(),TQ.InputCtrl.vkeyUnjoint=!1}),utilToolbarItemClick("#setStage",function(){setStageSize(320,240)}),utilToolbarItemClick("#btn-pin-it",TQ.SelectSet.pinIt),utilToolbarItemClick("#preSegment",backToPreviousLevel),utilToolbarItemClick("#nextSegment",advanceToNextLevel),utilToolbarItemClick("#tbAnimation",editActions),utilToolbarItemClick("#tb3Dfy",function(){Menu.JointStarted&&(click_div("#joint"),Menu.JointStarted=!1),Menu.GroupStarted&&(click_div("#group"),Menu.GroupStarted=!1),click_div("#tb3Dfy"),Menu.tb3Dfy?(Menu.tb3Dfy=!1,create3DElement()):(TQ.SelectSet.clear(),Menu.tb3Dfy=!0,setSubjectModeAndMultiSelect())}),utilToolbarItemClick("#group",function(){Menu.JointStarted&&(click_div("#joint"),Menu.JointStarted=!1),Menu.tb3Dfy&&(click_div("#tb3Dfy"),Menu.tb3Dfy=!1),click_div("#group"),Menu.GroupStarted?(Menu.GroupStarted=!1,TQ.SelectSet.groupIt()):(TQ.SelectSet.clear(),Menu.GroupStarted=!0,setSubjectModeAndMultiSelect())}),utilToolbarItemClick("#tbUngroup",function(){TQ.InputCtrl.vkeyUngroup=!0,TQ.SelectSet.groupIt(),TQ.InputCtrl.vkeyUngroup=!1}),utilToolbarItemClick("#beginning",function(){TQ.FrameCounter.gotoBeginning()}),utilToolbarItemClick("#end",function(){TQ.FrameCounter.gotoEnd()}),utilToolbarItemClick("#backward",function(){TQ.FrameCounter.backward()}),utilToolbarItemClick("#forward",function(){TQ.FrameCounter.forward()}),utilToolbarItemClick("#rewind",function(){TQ.FrameCounter.autoRewind(),click_div("#rewind")}),utilToolbarItemClick("#subElementMode",function(){click_div("#subElementMode"),TQ.InputCtrl.inSubobjectMode=!TQ.InputCtrl.inSubobjectMode,TQ.SelectSet.updateDecorations(1==TQ.InputCtrl.inSubobjectMode)}),utilToolbarItemClick("#tbMove",function(){var a=TQ.InputCtrl.vkeyMove;TQ.InputCtrl.clearVkey(),TQ.InputCtrl.vkeyMove=!a}),utilToolbarItemClick("#tbRotate",function(){var a=TQ.InputCtrl.vkeyRotate;TQ.InputCtrl.clearVkey(),TQ.InputCtrl.vkeyRotate=!a}),utilToolbarItemClick("#tbScale",function(){var a=TQ.InputCtrl.vkeyScale;TQ.InputCtrl.clearVkey(),TQ.InputCtrl.vkeyScale=!a}),utilToolbarItemClick("#tbLift",function(){var a=TQ.InputCtrl.vkeyLift;TQ.InputCtrl.clearVkey(),TQ.InputCtrl.vkeyLift=!a}),utilToolbarItemClick("#tbHideShow",function(){TQ.SelectSet.show(!1)}),utilToolbarItemClick("#tbRemoveTrack",TQ.SelectSet.eraseAnimeTrack),utilToolbarItemClick("#linearMode",function(){click_div("#linearMode"),TQ.TrackRecorder.style=TQ.TrackRecorder.style==TQ.TrackDecoder.LINE_INTERPOLATION?TQ.TrackDecoder.JUMP_INTERPOLATION:TQ.TrackDecoder.LINE_INTERPOLATION}),utilToolbarItemClick("#play",function(){TQ.WCY.doPlay(),$("#stop").css("display",""),$("#play").css("display","none"),1==$("#recorder").attr("status")&&TQ.SceneEditor.isEditMode()&&TQ.Recorderobj.startRecording(TQ.WCY.getCurrentLevelID(),TQ.WCY.getCurrentTime())}),utilToolbarItemClick("#stop",function(){if(TQ.WCY.doStop(),1==$("#recorder").attr("status")&&TQ.SceneEditor.isEditMode()){var a=new FormData;TQ.Recorderobj.stopRecording(a)}$("#play").css("display",""),$("#stop").css("display","none")}),utilToolbarItemClick("#playRecord",function(){TQ.WCY.doPlayRecord(),$("#stopRecord").css("display",""),$("#playRecord").css("display","none"),functionButton("show")}),utilToolbarItemClick("#stopRecord",function(){functionButton("hide"),TQ.WCY.doStopRecord(),$("#playRecord").css("display",""),$("#stopRecord").css("display","none")}),utilToolbarItemClick("#keepTrace",function(){TQ.InputCtrl.leaveTraceOn=!TQ.InputCtrl.leaveTraceOn}),utilToolbarItemClick("#tbVkeyCtrl",function(){click_div("#tbVkeyCtrl"),TQ.InputCtrl.vkeyCtrl=!TQ.InputCtrl.vkeyCtrl}),$("#open").button("disable"),hideButtons(),utilToolbarItemClick("#action_add_btn",function(){var a=$("#action_add_btn");$("#action_btn_win_list").html(""),$("#action_btn_win_action_img").attr("src",""),$("#easydialog_win #msg").html(""),$("#easydialog_win #yesbtn").attr("action_id",""),1==a.attr("display_status")?$.fancybox.close():$.fancybox({href:"#easydialog_win",closeBtn:!1,helpers:{overlay:null},beforeShow:function(){this.wrap.draggable()}});var b=a.attr("display_status");if(void 0==b||0==b){var c=TQ.WCY.getCurrentElement();if(c){var d=c.getActionSet(),e="";null!=d&&""!=d&&(e=TQ.Html.action_add_list(d),$("#action_btn_win_list").html(e)),$("#action_start_end_div").show(),a.attr("display_status",1),click_div("#action_add_btn")}else $("#alert_div #alert_div_nobtn").css("display","").attr("status",""),$("#alert_div #alert_div_yesbtn").css("display","none").attr("status",""),$("#alert_div #alert_div_abandonbtn").css("display","none").attr("status",""),$("#alert_div #alert_div_content").html(TQ.Dictionary.Win_xuanzhongsucai),easyDialog.open({container:"alert_div"})}else{$("#easydialog_win").hide();{$("#action_start_btn").attr("num_val"),$("#action_end_btn").attr("num_val")}$("#action_start_end_div").hide(),click_div("#action_add_btn"),a.attr("display_status",0)}}),utilToolbarItemClick("#action_btn",function(){$("#action_list_win").html("");var a=$("#action_btn"),b=a.attr("display_status");if(click_div("#action_btn"),void 0==b||0==b){a.attr("display_status",1);var c=TQ.WCY.getCurrentElement();if(c){var d=c.getActionSet(),e="";d?($("#action_div").css("display","block"),e=TQ.Html.action_div(d),$("#action_list_win").html(e)):($("#alert_div #alert_div_nobtn").css("display","").attr("status",""),$("#alert_div #alert_div_yesbtn").css("display","none").attr("status",""),$("#alert_div #alert_div_abandonbtn").css("display","none").attr("status",""),$("#alert_div #alert_div_content").html(TQ.Dictionary.Win_yuansuweidingyidongzuo),easyDialog.open({container:"alert_div"}),click_div("#action_btn"),a.attr("display_status",0))}else $("#alert_div #alert_div_nobtn").css("display","").attr("status",""),$("#alert_div #alert_div_yesbtn").css("display","none").attr("status",""),$("#alert_div #alert_div_abandonbtn").css("display","none").attr("status",""),$("#alert_div #alert_div_content").html(TQ.Dictionary.Win_xuanzhongsucai),easyDialog.open({container:"alert_div"}),click_div("#action_btn"),a.attr("display_status",0)}else $("#action_div").css("display","none"),a.attr("display_status",0)}),utilToolbarItemClick("#hudong_add_btn",function(){var a=$("#hudong_add_btn"),b=a.attr("display_status");if(click_div("#hudong_add_btn"),void 0==b||0==b){a.attr("display_status",1);{TQ.WCY.getCurrentElement()}}else a.attr("display_status",0);$("#action_div").hide()})}function click_div(a){"#joint"==a?set_click_flag_gif(a,"gif-link"):"#tb3Dfy"==a?set_click_flag_gif(a,"gif-3d"):"#group"==a?set_click_flag_gif(a,"gif-group"):"#linearMode"==a?set_click_flag(a,"bn-ans-icon"):"#subElementMode"==a?set_click_flag(a,"bn-ans-icon"):"#rewind"==a?set_click_flag(a,"bn-ans-icon"):"#action_add_btn"==a?set_click_flag(a,"bn-new-hover"):"#action_btn"==a?set_click_flag(a,"bn-new-hover"):"#hudong_add_btn"==a&&set_click_flag(a,"bn-new-hover")}function set_click_flag_gif(a,b){var c=$(a).attr("click_flag");1==c?$(a).removeClass(b).attr("click_flag",0).removeClass("gif"):$(a).addClass(b).attr("click_flag",1).addClass("gif")}function set_click_flag(a,b){var c=$(a).attr("click_flag");1==c?$(a).removeClass(b).attr("click_flag",0):$(a).addClass(b).attr("click_flag",1)}function hideButtons(){var a=["joint","tbMinAngle","tbMaxAngle","tbUnjoint","action_add_btn","tb3Dfy","tbVkeyCtrl","subElementMode","linearMode","mirrorX","mirrorY"];if(0==TQ.Init.userCategoryId)if(9==TQ.Init.userTypeId);else if(6==TQ.Init.userTypeId)for(var b=["joint","tbMinAngle","tbMaxAngle","tbUnjoint","action_add_btn","tb3Dfy","tbVkeyCtrl","subElementMode","linearMode","mirrorX","mirrorY","addText","hudong","mohuan","sound","my","group","tbUngroup","skinning","action_btn"],c=b.length,d=0;c>d;d++)$("#"+b[d]).hide();else for(var c=a.length,d=0;c>d;d++)$("#"+a[d]).hide()}function initTabsMenu(){$("#tab_right_panel").tabs({active:2,load:function(){$("div#tab_right_panel img").draggable({helper:"clone"}).addClass("list_med_pic"),initTabContentNavigator()}})}function menu_joint(){Menu.GroupStarted&&(click_div("#group"),Menu.GroupStarted=!1),Menu.tb3Dfy&&(click_div("#tb3Dfy"),Menu.tb3Dfy=!1),click_div("#joint"),Menu.JointStarted?(Menu.JointStarted=!1,TQ.SelectSet.jointIt()):(TQ.SelectSet.clear(),Menu.JointStarted=!0,setSubjectModeAndMultiSelect())}function menu_unJoint(){Menu.GroupStarted&&(click_div("#group"),Menu.GroupStarted=!1),Menu.tb3Dfy&&(click_div("#tb3Dfy"),Menu.tb3Dfy=!1),Menu.JointStarted&&(Menu.JointStarted=!1),TQ.SelectSet.jointIt()}function setStageSize(a,b){var c=document.getElementById("testCanvas");c.width=a,c.height=b,$("#workingarea").css("width",a.toString()+"px"),$("#workingarea").css("height",b.toString()+"px")}function initCreateEnvironment(a){a||(initMenu(),initToolbar(),initTabsMenu(),initWorkingArea(),$("#toolbar").show(),$("#footer").show(),$("#tab_right_panel").show(),$("#timeAxisDiv").show())}function startWcy(a,b){var c=null;""==a&&(a=TQ.Utility.getUrlParam("id"),""==a&&(a=localStorage.getItem("sceneName"))),a||(a=TQ.Config.DEMO_SCENE_NAME),storedb("wcyData").find({key:TQ.Init.wcyLocalTempName},function(a,b){a||""!=b&&(c=b[0].content)});var d={name:a,content:c};init(d),b||TQ.Utility.CheckUserRight(),mcDeferLoad()}function mcDeferLoad(){TQ.TextEditor.initialize(),TQ.FileDialog.initialize(),TQ.MessageBubble.initialize()}function functionButton(a){"show"==a?($("#addLevel").show(),$(".changjing_del").show(),$(".functionButton").show(),$("#recorder").show()):($("#addLevel").hide(),$(".changjing_del").hide(),$(".functionButton").hide(),$("#recorder").hide())}window.TQ=window.TQ||{},$(function(){function a(){}a.current_page=1,a.cateid,a.catepid,a.page_all,a.page_size=12,a.tag_keywords="",a.tag_type="",a.etype="",a.tabs_menu_id="",a.tabs_menu_text="",a.isSearch=!1,a.category_menu=function(){if(68==a.catepid)var b="http://"+TQ.Config.API_DOMAIN_NAME+"/category/children/"+a.catepid+"/1";else var b="http://"+TQ.Config.API_DOMAIN_NAME+"/category/children/"+a.catepid;var c="",d="",e="";if(storedb("TabsMenuCategory").find({key:a.catepid},function(a,b){a||(e=b)}),""!=e)d=e[0].content;else{var f=new Object,g=MYJS.ajax_obj.get(f,b,"json");g.success(function(b){d=b,storedb("TabsMenuCategory").insert({key:a.catepid,content:b},function(){})})}if(d.list.length>0)for(j=0;j<d.list.length;j++)c+='<li><a href="javascript:void(0)" cate_id="'+d.list[j].id+'" class="tabmenuajax_btn">'+d.list[j].name+"</a></li>";return c="<ul>"+c+"</ul>"},a.category_content=function(){var c=TQ.TabsMenu.cateid,d=new Object,e=a.current_page,f="http://"+TQ.Config.API_DOMAIN_NAME+"/sucaisearch/";$("#category_menu_all").css("display","block"),$("#page_nav").css("display","block"),"hudong"==a.catepid?(f+="special/?",$("#page_nav").css("display","none")):"mohuan"==a.catepid?(f+="special?",$("#category_menu_all").css("display","none"),$("#page_nav").css("display","none")):1==a.isSearch||(f+="my"==a.catepid?"index?&uid="+TQ.Init.uid:"index?"),f+="&page="+e+"&category_id="+c+"&category_pid="+a.catepid+"&etype="+TQ.TabsMenu.etype+"&psize=12";var g="",h="";if(storedb("TabsMenuContent").find({key:a.catepid+"_"+c+"_"+e+"_"+a.tag_keywords},function(a,b){a||(h=b)}),""!=h)g=h[0].content,b(g);else{var i=MYJS.ajax_obj.get(d,f,"json");i.success(function(d){g=d,storedb("TabsMenuContent").insert({key:a.catepid+"_"+c+"_"+e+"_"+a.tag_keywords,content:d},function(){}),b(g)})}};var b=function(b){if(b.list.length>0){var c=b;if("mohuan"==a.catepid)var d=$("#category_content_mohuan_ul_html").html();else if(68==a.catepid&&101!=a.cateid)var d=$("#category_content_sound_ul_html").html();else var d=$("#category_content_img_ul_html").html();s_html=Mustache.render(d,c),$("#category_content").html(s_html)}else $("#category_content").html("");result_total=b.total,a.page_all=Math.ceil(result_total/a.page_size),TQ.TabsMenu.page_nav()};a.page_nav=function(){$("#page_nav").hide(),a.page_all>0?($("#page_nav").show(),a.current_page<=1?$("#page_up").removeClass("up-valid"):$("#page_up").addClass("up-valid"),1==a.page_all?$("#page_next").removeClass("next-valid").addClass("next-invalid"):$("#page_next").addClass("next-valid").removeClass("next-invalid"),a.current_page>=a.page_all?(TQ.TabsMenu.current_page=a.page_all,$("#page_next").unbind("click"),$("#page_next").removeClass("next-valid").addClass("next-invalid")):$("#page_next").addClass("next-valid").removeClass("next-invalid"),$("#page_html").html(a.current_page+"/"+a.page_all)):$("#page_html").html("1/1")},a.searchMore=function(){var b=new Object;b.keywords=a.tag_keywords;var c="http://"+TQ.Config.DOMAIN_NAME+"/index.php/api/wcy/searchMore.json",d=MYJS.ajax_obj.get(b,c,"json");return d.success(function(b){if(b.list.length>0){var c=b,d=$("#category_content_img_ul_html").html();s_html=Mustache.render(d,c)}a.page_all=Math.ceil(b.total/a.page_size),TQ.TabsMenu.page_nav()}),s_html},a.img_click=function(b){var c=b.find(".thumb_div .image_click");if("my_video"==a.cateid||101==a.cateid){var d=c.attr("src").replace("mcThumbs","mcImages");d=d.replace("png","mp4")}else var d=c.attr("src");var e="<div src='"+d+"' eType='"+c.attr("etype")+"' Type='"+c.attr("type")+"' title='"+c.attr("title")+"' wcyid='"+c.attr("wcyid")+"'/>";b.addClass("thumb_div_click"),TQ.WCY.addResToStageCenter($(e))},a.openDiv=function(){$("#category_menu_div").css("display","block"),$("#category_content").css("display","block")},a.closeDiv=function(){$("#category_menu_div").css("display","none"),$(".tabmenu_left_ajax_btn").attr("display_status","0")},TQ.TabsMenu=a}()),window.TQ=window.TQ||{},$(function(){function a(){}a.newScene=function(){storedb("wcyData").remove(),storedb("TabsMenuContent").remove(),openScene(TQ.Config.UNNAMED_SCENE)},TQ.WdMenu=a});var Menu={};$(function(){$("#recorder").click(function(){var a=$(this).attr("status");1==a?($(this).attr("status",0),$("#recorder span").removeClass("luying-hover")):(TQ.Recorderobj.getResultStartStop(),$(this).attr("status",1),$("#recorder span").addClass("luying-hover"))})}),window.TQ=window.TQ||{},$(function(){function a(){}a.scenes_num=1,a.scenes_current_index=0,a.scenes_current=1,a.isInsert=!1,a.scenes_content_html=function(a,b){var c={i:a,txt:TQ.Dictionary.Scenes_Label_1+b},d=$("#scenes_div_li_html").html(),e=Mustache.render(d,c);return e},a.scenes_add=function(){1!=TQ.Scenes.scenes_num?0==a.isInsert?(TQ.WCY.currentScene.currentLevelId=TQ.WCY.getLevelNum()-1,a.scenes_num=parseInt(TQ.Scenes.scenes_num)+1,a.scenes_current_index=a.scenes_num,a.scenes_current=a.scenes_current_index,$("#scenes_ul").append(TQ.Scenes.scenes_content_html(TQ.Scenes.scenes_num,TQ.Scenes.scenes_num)),TQ.WCY.addLevel()):$("#scenes_ul li").each(function(){var b=parseFloat(TQ.Scenes.scenes_current_index).toFixed(1),c=parseFloat($(this).attr("num")).toFixed(1);if(b==c){TQ.Scenes.isInsert=!1;var d=(parseFloat(b)+.1).toFixed(1);$(this).after(TQ.Scenes.scenes_content_html(d,d)),TQ.Scenes.scenes_current_index=d,a.scenes_num=parseInt(TQ.Scenes.scenes_num)+1,TQ.WCY.addLevel()}}):(a.isInsert=!1,a.scenes_num=parseInt(TQ.Scenes.scenes_num)+1,a.scenes_current_index=a.scenes_num,a.scenes_current=a.scenes_current_index,TQ.WCY.addLevel(),$("#scenes_ul").append(TQ.Scenes.scenes_content_html(TQ.Scenes.scenes_num,TQ.Scenes.scenes_num)))},a.scenes_click=function(a,b){$("#scenes_ul li").each(function(){$(this).removeClass("new-right-pop-hover"),$(this).attr("num")==a&&(TQ.Scenes.scenes_current_index=$(this).index()+1,TQ.Scenes.scenes_current=TQ.Scenes.scenes_current_index)}),-1!=TQ.Scenes.scenes_current_index?b.addClass("new-right-pop-hover"):(TQ.Scenes.scenes_current_index="",TQ.Scenes.scenes_current=1)},a.scenes_open=function(a){$("#scenes_ul").html(""),TQ.Scenes.scenes_num=a;var b="";for(i=1;a>=i;i++)b+=TQ.Scenes.scenes_content_html(i,i);$("#scenes_ul").append(b).attr("num",a),$("#scenes_div").attr("display_status","1")},a.scenes_delete=function(a){TQ.WCY.deleteLevel(a),console.log(TQ.Scenes.scenes_current_index+"_____"+TQ.WCY.getLevelNum()),TQ.Scenes.scenes_current_index>=TQ.WCY.getLevelNum()&&(TQ.Scenes.scenes_current_index=TQ.WCY.getLevelNum()),TQ.WCY.getLevelNum()<=0&&($("#scenes_ul").html(TQ.Scenes.scenes_content_html(1,1)).attr("num",1),TQ.WCY.addLevel(),TQ.WCY.gotoLevel(1))},TQ.Scenes=a}()),$(function(){function a(){}a.sound_list_arr=new Array,a.sound_list_id=1,a.sound_content_html=function(a,b){$("#new_right").css("display","block"),$("#sound_ul").css("display","block");var c={_title:a.attr("title"),_sound_obj_arr_id:b},d=$("#sound_li_html").html(),e=Mustache.render(d,c);$("#sound_ul").append(e)},a.recorder_sound_click=function(b,c,d){var e=TQ.WCY.addResToStageCenter(b,c,d);a.sound_list_arr[a.sound_list_id]=e,TQ.Sound.sound_content_html(b,a.sound_list_id),a.sound_list_id++},a.sound_click=function(b){var c=TQ.WCY.addResToStageCenter(b);a.sound_list_arr[a.sound_list_id]=c,TQ.Sound.sound_content_html(b,a.sound_list_id),a.sound_list_id++},a.sound_del=function(b){var c=b.attr("sound_obj_arr_id");TQ.WCY.deleteElement(a.sound_list_arr[c]),b.parent().remove()},a.sound_btn_open=function(){"0"==$("#sound_btn").attr("display_status")?($("#sound_ul").css("display","block"),$("#sound_btn").attr("display_status","1")):($("#sound_ul").css("display","none"),$("#sound_btn").attr("display_status","0"))},a.sound_open=function(b,c){for(i=1;b>=i;i++){var d=i-1;a.sound_list_arr[a.sound_list_id]=c[d];var e=c[d].getAlias(),f='<label soundsrc="/mcSounds/p11593.mp3" title="'+e+'"></label>';TQ.Sound.sound_content_html($(f),a.sound_list_id),a.sound_list_id++}$("#scenes_ul").show(),$("#sound_btn").attr("display_status","1")},a.sound_start=function(a){var b=a.attr("soundPath");b=TQ.Utility.getAudioByThumbnail(b),TQ.SoundMgr.play(b)},TQ.Sound=a}()),window.TQ=window.TQ||{},$(function(){function a(){}a.currentObject=null,a.displayMenu=function(b,c){$("#hudong_add_btn").show(),a.show_hide($("#hudong_add_btn"),c)},a.displayActionSet=function(a){if(1==$("#hudong_add_btn").attr("display_status")){var b=a;if(b){var c=b.getActionSet();$("#action_btn").trigger("click")}var d="";c&&(d=TQ.Html.action_div(c),$("#action_list_win").html(d))}},a.show_hide=function(b,c){c==TQ.Element.ETYPE_BUTTON?(b.show(),a.currentObject=TQ.WCY.getCurrentElement()):1==b.attr("display_status")?b.show():b.hide()},a.resourceMenu=function(a){$(".category_menu_btn").each(function(){$(this).css("display","none");var b=$(this).find("a").attr("etype");b==a&&$(this).css("display","block")})},a.initialize=function(){TQ.Init.showAllScenes(),TQ.Init.showAllScenesSound()},TQ.displayUI=a}()),TQ=TQ||{},function(){function a(){}a.action_div=function(a){var b="";if(a.length>0)for(i=0;i<a.length;i++){var c=Date.parse(new Date),d="";d=void 0!=a[i].gifIconID?"http://"+TQ.Config.DOMAIN_NAME+"/"+TQ.Config.actionImgPath+a[i].gifIconID+".gif?v="+c:"http://"+TQ.Config.DOMAIN_NAME+"/"+TQ.Config.actionImgPath+a[i].name+".gif?v="+c;var e={name:a[i].name,fs:a[i].fs,F:a[i].F,thumb_src:d},f=$("#action_list_win_html").html();b+=Mustache.render(f,e)}return b},a.action_add_list=function(a){var b="";if(a.length>0)for(i=0;i<a.length;i++){var c=Date.parse(new Date),d="";d=void 0!=a[i].gifIconID?"http://"+TQ.Config.DOMAIN_NAME+"/"+TQ.Config.actionImgPath+a[i].gifIconID+".gif?v="+c:"http://"+TQ.Config.DOMAIN_NAME+"/"+TQ.Config.actionImgPath+a[i].name+".gif?v="+c;var e={name:a[i].name,fs:a[i].fs,F:a[i].F,thumb_src:d},f=$("#action_btn_win_add_list").html();b+=Mustache.render(f,e)}return b},TQ.Html=a}(),window.TQ=window.TQ||{},$(function(){function a(){}a.add=function(a,b,c){var d=MYJS.ajax_obj.post_formdata(a,"http://"+TQ.Config.DOMAIN_NAME+"/index.php/api/actions/updateAction.json","json");d.success(function(a){var d=a.imgname;if("extension_error"==a.status)$("#easydialog_win #msg").html(TQ.Dictionary.MC_Label_1);else if("name_error"==a.status)$("#easydialog_win #msg").html(TQ.Dictionary.MC_Label_2);else{var e=a.id,f=$("#action_btn_win_style_repeat").val(),g=$("#action_start_val").val(),h=$("#action_end_val").val(),i=null;i="1"==f?TQ.Action.STYLE_1:TQ.Action.STYLE_REPEAT,aa=b.addAction(parseInt(e),parseInt(g),parseInt(h),i,d,c),$("#easydialog_win").hide(),$("#action_add_btn").trigger("click"),$("#easydialog_win #action_img_file").hide()}})},a.getActionId=function(a){var b=new Object;b.name=a;var c=MYJS.ajax_obj.get(b,"http://"+TQ.Config.DOMAIN_NAME+"/index.php/api/actions/getActionFirst.json","json");c.success(function(a){1==a.status})},TQ.funcAction=a}()),TQ.ERROR=-1,TQ.Element.ETYPE_BACKGROUND=1,TQ.Element.ETYPE_PROP=2,TQ.Element.ETYPE_CHARACTER=3,TQ.Element.ETYPE_TEXT=4,TQ.Element.ETYPE_EFFECT=5,TQ.Element.ETYPE_BUTTON=6,TQ.Element.ETYPE_AUDIO=7,TQ.Element.ETYPE_PART=8,TQ.Element.TYPE_BITMAP=2,TQ.Element.TYPE_COMPONENT=3,TQ.Element.TYPE_BUTTON=4,TQ.Element.TYPE_AUDIO=11;