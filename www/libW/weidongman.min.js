/*! bone 2015-02-10 */
function getcookie(a){for(var b=document.cookie.split("; "),c=0;c<b.length;c++){var d=b[c].split("=");if(d[0]==a)return unescape(d[1])}}function zipBlob(a,b,c){zip.createWriter(new zip.BlobWriter("application/zip"),function(d){d.add(a,new zip.BlobReader(b),function(){d.close(c)})},onerror)}function netSave(a,b,c,d){var e=new FormData,f=!1;null==d||0==d.isTimeSaveWcy?($("#messagediv_content").html(TQ.Dictionary.IS_SAVING),easyDialog.open({container:"messagediv"}),f=!0):(b=JSON.parse(b),f=!1),e.append("filename",a),e.append("userID",localStorage.getItem("userID")),e.append("publish_v",$("#save-file #publish").val()),e.append("keywords",c),e.append("wdmFile",JSON.stringify(b)),$.ajax({url:"http://"+TQ.Config.DOMAIN_NAME+"/wcy/save",type:"post",contentType:!1,processData:!1,data:e}).done(function(a){a=JSON.parse(a),void 0!=a.name&&""!=a.name&&(TQ.Init.wcyTempName=a.name),f&&displayInfo3()}).done(function(){TQ.Init.saveServerWcyProcess=0})}function netOpen(a,b){var c="filename="+a;$.get("http://"+TQ.Config.DOMAIN_NAME+"/wcy/wdmOpen",c,b,NET_IO_DATA_TYPE)}function onDelete(a){displayInfo2(a),a.indexOf(TQ.Dictionary.FAILED)<0&&(localStorage.setItem("sceneName",""),$("#newScene").click())}function throb(a){$(a).animate({opacity:1},250,function(){$(this).animate({opacity:.5},2e3)})}function restoreTestSubjects(){$(".testSubject,.testSubject *").removeAttr("style")}function displayInfo2(a){$("#testLabelInfo").text(a)}function displayInfo3(a){TQ.MessageBubble.counter++,TQ.MessageBubble.addMessage(a),TQ.MessageBubble.counter>=2&&TQ.MessageBubble.close()}function displayJSON(a){var b=a,c=JSON.stringify(b);displayInfo2(c)}function isObject(a){return null==a?!1:"object"==typeof a&&a.constructor==Object}function isFunction(a){return null==a?!1:"function"==typeof a&&a.constructor==Function}function dumpObject(a){var b='<table border="1px"><tr><th>name</th><th>type</th><th>value</th><th>dump</th></tr>';for(var c in a){var d=a[c];isFunction(d)||(isObject(d)?dumpObject(d):(b+="<tr>",b+="<td>"+c+"</td>",b+="<td>"+typeof d+"</td>",b+="<td>"+(isFunction(d)||isObject(d)?"Error":d)+"</td>",b+="<td>"+(isObject(d)?dumpObject(d):"")+"</td>",b+="</tr>"))}b+="</table>",$("#infoRegion").html(b)}function RecordRTC(a,b){function c(){console.debug("started recording "+(IsChrome?b.type:"audio+video")+" stream.");var c=IsChrome?window.StereoRecorder:window.MediaStreamRecorder;return"video"==b.type&&(c=window.WhammyRecorder),"gif"==b.type&&(c=window.GifRecorder),"canvas"==b.type&&(c=window.CanvasRecorder),f=new c(a),f=mergeProps(f,b),f.record(),this}function d(a){function c(){if(a&&f){var c=URL.createObjectURL(f.recordedBlob);a(c)}b.autoWriteToDisk&&e(function(a){var c={};c[b.type+"Blob"]=a,DiskStorage.Store(c)})}return f?(console.warn("stopped recording "+(IsChrome?b.type:"audio+video")+" stream."),void("audio"==b.type&&!IsChrome||"video"==b.type&&IsChrome?f.stop(c):(f.stop(),c()))):console.warn(g)}function e(a,b){function c(){if(window.Worker){var c=d(function(a){postMessage((new FileReaderSync).readAsDataURL(a))});c.onmessage=function(b){a(b.data)},c.postMessage(b?b.recordedBlob:f.recordedBlob)}else{var e=new FileReader;e.readAsDataURL(b?b.recordedBlob:f.recordedBlob),e.onload=function(b){a(b.target.result)}}}function d(a){var b=URL.createObjectURL(new Blob([a.toString(),"this.onmessage =  function (e) {readFile(e.data);}"],{type:"application/javascript"})),c=new Worker(b);return URL.revokeObjectURL(b),c}if(!a)throw"Pass a callback function over getDataURL.";c()}if(b=b||{},!a)throw"MediaStream is mandatory.";b.type||(b.type="audio");var f,g='It seems that "startRecording" is not invoked for '+b.type+" recorder.";return{startRecording:c,stopRecording:d,getBlob:function(){return f?f.recordedBlob:console.warn(g)},getDataURL:e,toURL:function(){return f?URL.createObjectURL(f.recordedBlob):console.warn(g)},save:function(){return f?(console.log("saving recorded "+b.type+" stream to disk!"),void this.getDataURL(function(a){var b=document.createElement("a");b.href=a,b.target="_blank",b.download=Math.round(9999999999*Math.random())+888888888+"."+f.recordedBlob.type.split("/")[1];var c=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});b.dispatchEvent(c),(window.URL||window.webkitURL).revokeObjectURL(b.href)})):console.warn(g)},getFromDisk:function(a){return f?void RecordRTC.getFromDisk(b.type,a):console.warn(g)},setAdvertisementArray:function(a){this.advertisement=[];for(var b=a.length,c=0;b>c;c++)this.advertisement.push({duration:c,image:a[c]})}}}function MRecordRTC(a){this.addStream=function(b){b&&(a=b)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){this.mediaType.audio&&(this.audioRecorder=RecordRTC(a,this).startRecording()),this.mediaType.video&&(this.videoRecorder=RecordRTC(a,{type:"video"}).startRecording()),this.mediaType.gif&&(this.gifRecorder=RecordRTC(a,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10}).startRecording())},this.stopRecording=function(a){a=a||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(b){a(b,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(b){a(b,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(b){a(b,"gif")})},this.getBlob=function(a){var b={};this.audioRecorder&&(b.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(b.video=this.videoRecorder.getBlob()),this.gifRecorder&&(b.gif=this.gifRecorder.getBlob()),a&&a(b)},this.getDataURL=function(a){function b(a,b){if(window.Worker){var d=c(function(a){postMessage((new FileReaderSync).readAsDataURL(a))});d.onmessage=function(a){b(a.data)},d.postMessage(a)}}function c(a){var b=URL.createObjectURL(new Blob([a.toString(),"this.onmessage =  function (e) {readFile(e.data);}"],{type:"application/javascript"})),c=new Worker(b);return URL.revokeObjectURL(b),c}this.getBlob(function(c){b(c.audio,function(d){b(c.video,function(b){a({audio:d,video:b})})})})},this.writeToDisk=function(){RecordRTC.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})}}function mergeProps(a,b){b=reformatProps(b);for(var c in b)"function"!=typeof b[c]&&(a[c]=b[c]);return a}function reformatProps(a){var b={};for(var c in a)if(-1!=c.indexOf("-")){var d=c.split("-"),e=d[0]+d[1].split("")[0].toUpperCase()+d[1].substr(1);b[e]=a[c]}else b[c]=a[c];return b}function MediaStreamRecorder(a){var b=this,c=!1;this.record=function(){d=new MediaRecorder(a),d.ondataavailable=function(a){if(!c){if(console.log(a.data.type,a.data),!a.data.size)return void console.warn("Recording of",a.data.type,"failed.");c=!0,b.recordedBlob=new Blob([a.data],{type:a.data.type||"audio/ogg"}),b.callback()}},d.onerror=function(a){console.warn(a),d.stop(),b.record(0)},d.start(0)},this.stop=function(a){this.callback=a,"recording"==d.state&&(d.requestData(),d.stop())};var d}function StereoRecorder(a){this.record=function(){b=new StereoAudioRecorder(a,this),b.record()},this.stop=function(){b&&b.stop(),this.recordedBlob=b.recordedBlob};var b}function StereoAudioRecorder(a,b){function c(a,b){for(var c=a.length+b.length,d=new Float32Array(c),e=0,f=0;c>f;)d[f++]=a[e],d[f++]=b[e],e++;return d}function d(a,b){for(var c=new Float32Array(b),d=0,e=a.length,f=0;e>f;f++){var g=a[f];c.set(g,d),d+=g.length}return c}function e(a,b,c){for(var d=c.length,e=0;d>e;e++)a.setUint8(b+e,c.charCodeAt(e))}var f=[],g=[],h=!1,i=0;this.record=function(){h=!0,f.length=g.length=0,i=0},this.stop=function(){h=!1;var a=d(f,i),b=d(g,i),j=c(a,b),k=new ArrayBuffer(44+2*j.length),m=new DataView(k);e(m,0,"RIFF"),m.setUint32(4,44+2*j.length,!0),e(m,8,"WAVE"),e(m,12,"fmt "),m.setUint32(16,16,!0),m.setUint16(20,1,!0),m.setUint16(22,2,!0),m.setUint32(24,p,!0),m.setUint32(28,4*p,!0),m.setUint16(32,4,!0),m.setUint16(34,16,!0),e(m,36,"data"),m.setUint32(40,2*j.length,!0);var n=j.length,o=44;l=1;for(var q=0;n>q;q++)m.setInt16(o,32767*j[q]*l,!0),o+=2;this.recordedBlob=new Blob([m],{type:"audio/wav"}),this.length=i};var j=Storage.AudioContext;Storage.AudioContextConstructor||(Storage.AudioContextConstructor=new j);var k=Storage.AudioContextConstructor;Storage.VolumeGainNode||(Storage.VolumeGainNode=k.createGain());var l=Storage.VolumeGainNode;Storage.AudioInput||(Storage.AudioInput=k.createMediaStreamSource(a));var m=Storage.AudioInput;m.connect(l);var n=[256,512,1024,2048,4096,8192,16384],o=b.bufferSize||4096;if(-1==n.indexOf(o))throw"Legal values for buffer-size are "+JSON.stringify(n,null,"	");var p=b.sampleRate||k.sampleRate||44100;if(22050>p||p>96e3)throw"sample-rate must be under range 22050 and 96000.";if(console.log("sample-rate",p),console.log("buffer-size",o),k.createJavaScriptNode)__stereoAudioRecorderJavacriptNode=k.createJavaScriptNode(o,2,2);else{if(!k.createScriptProcessor)throw"WebAudio API has no support on this browser.";__stereoAudioRecorderJavacriptNode=k.createScriptProcessor(o,2,2)}__stereoAudioRecorderJavacriptNode.onaudioprocess=function(a){if(h){var b=a.inputBuffer.getChannelData(0),c=a.inputBuffer.getChannelData(1);f.push(new Float32Array(b)),g.push(new Float32Array(c)),i+=o}},l.connect(__stereoAudioRecorderJavacriptNode),__stereoAudioRecorderJavacriptNode.connect(k.destination)}function CanvasRecorder(a){function b(){html2canvas(a,{onrendered:function(a){d.add(a),c&&requestAnimationFrame(b)}})}if(!window.html2canvas)throw"Please link: //www.webrtc-experiment.com/screenshot.js";var c;this.record=function(){c=!0,b()},this.stop=function(){c=!1,this.recordedBlob=d.compile(),d.frames=[]};var d=new Whammy.Video(100)}function WhammyRecorder(a){function b(){var a=(new Date).getTime()-h;return h=(new Date).getTime(),a?(f.drawImage(g,0,0,e.width,e.height),c.push({duration:a,image:e.toDataURL("image/webp")}),void(d||setTimeout(b,10))):b()}this.record=function(){this.width||(this.width=g.offsetWidth||320),this.height||(this.height=g.offsetHeight||240),this.video||(this.video={width:this.width,height:this.height}),this.canvas||(this.canvas={width:this.width,height:this.height}),e.width=this.canvas.width,e.height=this.canvas.height,g.width=this.video.width,g.height=this.video.height,b()};var c=[];this.advertisement&&(c=advertisement);var d=!1;this.stop=function(a){d=!0,i.frames=c,c=[],this.recordedBlob=i.compile(),a&&a(this.recordedBlob)};var e=document.createElement("canvas"),f=e.getContext("2d"),g=document.createElement("video");g.muted=!0,g.volume=0,g.autoplay=!0,g.src=URL.createObjectURL(a),g.play();var h=(new Date).getTime(),i=new Whammy.Video}function GifRecorder(a){this.record=function(){function a(e){i=requestAnimationFrame(a),void 0===typeof g&&(g=e),90>e-g||(c.drawImage(d,0,0,b.width,b.height),h.addFrame(c),g=e)}this.width||(this.width=d.offsetWidth||320),this.height||(this.height=d.offsetHeight||240),this.video||(this.video={width:this.width,height:this.height}),this.canvas||(this.canvas={width:this.width,height:this.height}),b.width=this.canvas.width,b.height=this.canvas.height,d.width=this.video.width,d.height=this.video.height,h=new GIFEncoder,h.setRepeat(0),h.setDelay(this.frameRate||200),h.setQuality(this.quality||10),h.start(),e=Date.now(),i=requestAnimationFrame(a)},this.stop=function(){i&&cancelAnimationFrame(i),f=Date.now(),this.recordedBlob=new Blob([new Uint8Array(h.stream().bin)],{type:"image/gif"}),h.stream().bin=[]};var b=document.createElement("canvas"),c=b.getContext("2d"),d=document.createElement("video");d.muted=!0,d.autoplay=!0,d.src=URL.createObjectURL(a),d.play();var e,f,g,h,i=null}function encode64(a){for(var b,c,d,e,f,g,h,i="",j=0,k=a.length,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";k>j;)b=a.charCodeAt(j++),c=a.charCodeAt(j++),d=a.charCodeAt(j++),e=b>>2,f=(3&b)<<4|c>>4,g=(15&c)<<2|d>>6,h=63&d,isNaN(c)?g=h=64:isNaN(d)&&(h=64),i=i+l.charAt(e)+l.charAt(f)+l.charAt(g)+l.charAt(h);return i}(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n;i={},c=document,k=!1,l="active",g=6e4,f=!1,b=function(){var a,b,c,d,e,f;return a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},e=function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},f={},c="__ceGUID",b=function(a,b,d){return a[c]=void 0,a[c]||(a[c]="ifvisible.object.event.identifier"),f[a[c]]||(f[a[c]]={}),f[a[c]][b]||(f[a[c]][b]=[]),f[a[c]][b].push(d)},d=function(a,b,d){var e,g,h,i,j;if(a[c]&&f[a[c]]&&f[a[c]][b]){for(i=f[a[c]][b],j=[],g=0,h=i.length;h>g;g++)e=i[g],j.push(e(d||{}));return j}},{add:b,fire:d}}(),a=function(){var a;return a=!1,function(b,c,d){return a||(a=b.addEventListener?function(a,b,c){return a.addEventListener(b,c,!1)}:b.attachEvent?function(a,b,c){return a.attachEvent("on"+b,c,!1)}:function(a,b,c){return a["on"+b]=c}),a(b,c,d)}}(),d=function(a,b){var d;return c.createEventObject?a.fireEvent("on"+b,d):(d=c.createEvent("HTMLEvents"),d.initEvent(b,!0,!0),!a.dispatchEvent(d))},h=function(){var a,b,d,e,f;for(e=void 0,f=3,d=c.createElement("div"),a=d.getElementsByTagName("i"),b=function(){return d.innerHTML="<!--[if gt IE "+ ++f+"]><i></i><![endif]-->",a[0]};b(););return f>4?f:e}(),e=!1,n=void 0,"undefined"!=typeof c.hidden?(e="hidden",n="visibilitychange"):"undefined"!=typeof c.mozHidden?(e="mozHidden",n="mozvisibilitychange"):"undefined"!=typeof c.msHidden?(e="msHidden",n="msvisibilitychange"):"undefined"!=typeof c.webkitHidden&&(e="webkitHidden",n="webkitvisibilitychange"),m=function(){var b,d;return b=!1,d=function(){return clearTimeout(b),"active"!==l&&i.wakeup(),f=+new Date,b=setTimeout(function(){return"active"===l?i.idle():void 0},g)},d(),a(c,"mousemove",d),a(c,"keyup",d),a(window,"scroll",d),i.focus(d)},j=function(){var b;return k?!0:(e===!1?(b="blur",9>h&&(b="focusout"),a(window,b,function(){return i.blur()}),a(window,"focus",function(){return i.focus()})):a(c,n,function(){return c[e]?i.blur():i.focus()},!1),k=!0,m())},i={setIdleDuration:function(a){return g=1e3*a},getIdleDuration:function(){return g},getIdleInfo:function(){var a,b;return a=+new Date,b={},"idle"===l?(b.isIdle=!0,b.idleFor=a-f,b.timeLeft=0,b.timeLeftPer=100):(b.isIdle=!1,b.idleFor=a-f,b.timeLeft=f+g-a,b.timeLeftPer=(100-100*b.timeLeft/g).toFixed(2)),b},focus:function(a){return"function"==typeof a?this.on("focus",a):(l="active",b.fire(this,"focus"),b.fire(this,"wakeup"),b.fire(this,"statusChanged",{status:l}))},blur:function(a){return"function"==typeof a?this.on("blur",a):(l="hidden",b.fire(this,"blur"),b.fire(this,"idle"),b.fire(this,"statusChanged",{status:l}))},idle:function(a){return"function"==typeof a?this.on("idle",a):(l="idle",b.fire(this,"idle"),b.fire(this,"statusChanged",{status:l}))},wakeup:function(a){return"function"==typeof a?this.on("wakeup",a):(l="active",b.fire(this,"wakeup"),b.fire(this,"statusChanged",{status:l}))},on:function(a,c){return j(),b.add(this,a,c)},onEvery:function(a,b){var c;return j(),c=setInterval(function(){return"active"===l?b():void 0},1e3*a),{stop:function(){return clearInterval(c)},code:c,callback:b}},now:function(){return j(),"active"===l}},"function"==typeof define&&define.amd?define(function(){return i}):window.ifvisible=i}).call(this),window.MYJS=window.MYJS||{},$(function(){var a={},b={},c={};a.post=function(a,b,c){return $.ajax({type:"POST",url:b,data:a,dataType:c})},a.post_formdata=function(a,b,c){return $.ajax({type:"POST",url:b,data:a,processData:!1,contentType:!1,async:!1,dataType:c})},a.get=function(a,b,c){return $.ajax({type:"GET",url:b,async:!1,data:a,dataType:c})},c.alert=function(a,b,c,d,e,f,g,h){null==c?$("#alert_div #alert_div_yesbtn").hide().attr("status",""):($("#alert_div #alert_div_yesbtn").show().attr("status",c),null!=d&&$("#alert_div #alert_div_yesbtn").unbind("click").click(function(){d()})),null==e?$("#alert_div #alert_div_nobtn").hide().attr("status",""):($("#alert_div #alert_div_nobtn").show().attr("status",e),null!=f&&$("#alert_div #alert_div_nobtn").unbind("click").click(function(){f()})),null==g?$("#alert_div #alert_div_abandonbtn").hide().attr("status",""):($("#alert_div #alert_div_abandonbtn").show().attr("status",g),null!=h&&$("#alert_div #alert_div_abandonbtn").unbind("click").click(function(){h()})),$("#alert_div #alert_div_content").html(a),null==b||1==b?($flag=!1,$("#alert_div #alert_div_nobtn").unbind("click").click(function(){$flag=!0,easyDialog.close()}),0==$flag&&easyDialog.open({container:"alert_div",overlay:!1})):2==b&&($flag=!1,$("#alert_div #alert_div_nobtn").unbind("click").click(function(){$.fancybox.close(),$flag=!0}),0==$flag&&$.fancybox({href:"#alert_div",closeBtn:!1,helpers:{overlay:{closeClick:!1}}}))},c.close=function(a){1==a?easyDialog.close():2==a&&$.fancybox.close()},MYJS.alert_obj=c,MYJS.ajax_obj=a,MYJS.auth_obj=b}());var storedb=function(a){var b,c,d=[];return localStorage[a]&&(c=JSON.parse(localStorage[a])),{insert:function(e,f){if(c){e._id=(new Date).valueOf();for(var g=0;g<c.length;g++)d.push(c[g]);d.push(e),localStorage.setItem(a,JSON.stringify(d)),f&&f(b,e)}else e._id=(new Date).valueOf(),d.push(e),localStorage.setItem(a,JSON.stringify(d)),f&&f(b,e)},find:function(a,e){if(0==arguments.length){if(c){for(var f=[],g=0;g<c.length;g++)d.push(c[g]);return d}}else if(c){for(var f=[],g=0;g<c.length;g++)d.push(c[g]);for(var h in a)for(var g=0;g<d.length;g++)d[g][h]==a[h]&&f.push(d[g]);if(!e)return f;e(b,f)}else{if(b="collection not exist",!e)return f;e(b,f)}},update:function(e,f,g){if(c){for(var h=0;h<c.length;h++)d.push(c[h]);for(var i in e)for(var h=0;h<d.length;h++)if(d[h][i]==e[i]){for(var j in f)switch(j){case"$inc":for(var k in f[j])d[h][k]=d[h][k]+f[j][k];break;case"$set":for(var k in f[j])d[h][k]=f[j][k];break;case"$push":for(var k in f[j])d[h][k].push(f[j][k]);break;default:b="unknown upsert"}"unknown upsert"==b&&(d[h]=f)}localStorage.setItem(a,JSON.stringify(d)),g&&g(b)}else b="collection not exist",g&&g(b)},remove:function(e,f){if(0==arguments.length)localStorage.removeItem(a);else if(c){for(var g=0;g<c.length;g++)d.push(c[g]);for(var h in e)for(var g=0;g<d.length;g++)d[g][h]==e[h]&&d.splice(g,1);localStorage.setItem(a,JSON.stringify(d)),f&&f(b)}else b="collection not exist",f&&f(b)}}};window.TQ=window.TQ||{},function(){function Dictionary(){}var f=new Object,host=window.location.host;status=host.indexOf("udoido.cn");var api_domain="";api_domain="-1"!=status?"api.udoido.cn":"api.udoido.com",status=host.indexOf("test.udoido.cn"),"-1"!=status&&(api_domain="testapi.udoido.cn");var api_domain=api_domain+"/"+getcookie("select_lang"),result_msg=MYJS.ajax_obj.get(f,"http://"+api_domain+"/translation","json"),Dictionary=new Array;result_msg.success(function(a){for(var b in a)Dictionary[b]=a[b]}),eval(Dictionary),TQ.Dictionary=Dictionary}(),window.TQ=window.TQ||{},function(){function a(a,b){for(var c=$("#"+a).get(0),d=c.options.length,e=0;d>e;e++)if(c.options[e].text==b){c.options[e].selected=!0;break}}var b={};b.visible=!1,b.lastElement=null,b.x0=100,b.fontcolor=null,b.fontsize=TQ.Config.fontSize,b.initialize=function(){b.boxDiv=$("#textEditBoxDiv"),b.inputBox=$("#textEditBox"),b.boxDiv.hide(),TQ.InputMap.registerAction(TQ.InputMap.TEXT_EDIT_KEY,function(){var a=TQ.SelectSet.members[0];b.do(a)})},b.do=function(a){if(null!=a&&a.isText()&&!b.visible){b.visible=!0,b.lastElement=a;var c=a.jsonObj;a.show(!1);var d=document.getElementById("testCanvas");canvasLeft=d.offsetLeft+TQ.Utility.getOffsetLeft(d.offsetParent),canvasTop=d.offsetTop+TQ.Utility.getOffsetTop(d.offsetParent);var e=canvasLeft+a.displayObj.x,f=canvasTop+a.displayObj.y;b.getInput(c.text,c.fontFace,c.fontSize,c.color,e-25,f-5)}},b.addText=function(a){if(!b.visible){b.isCreating=!0,b.lastElement=null;var c=document.getElementById("testCanvas");canvasWidth=c.clientWidth||c.body.clientWidth||0,canvasHeight=c.clientHeight||c.body.clientHeight||0;var d=b.x0,e=canvasHeight/2,f=TQ.FrameCounter.t();jsonObj={type:"Text",isVis:1,x:d,y:e,zIndex:TQ.Utility.getMaxZ(),rotation:0,text:a,t0:f,fontFace:TQ.Config.fontFace,fontSize:TQ.Config.fontSize,color:TQ.Config.color},TQ.Element.parseHtmlStr(jsonObj,a),b.do(currScene.addText(jsonObj)),b.isCreating=!1}},b.yDiff=function(a){return(a-45)/3+19},b.getInput=function(c,d,e,f,g,h){TQ.InputMap.turnOff(),null==g&&(g=520),null==h&&(h=300),b.xCanvas=g,b.yCanvas=h;var i=e*c.length;b.setEditor(d,e,f,g,h,i),b.inputBox.val(c),b.boxDiv.show(),a("fontFamilySelector",d),$("select, input").bind("click keyup change",b.realTimeUpdate),$("#idOK").bind("click",b.onOK),$("#idNo").bind("click",b.onNo)},b.setEditor=function(a,c,d,e,f,g){e=TQ.Utility.canvas2WindowX(b.xCanvas-4),f=TQ.Utility.canvas2WindowY(b.yCanvas-b.yDiff(c)),b.boxDiv.css("left",e.toString()+"px"),b.boxDiv.css("top",f.toString()+"px"),b.inputBox.css("font-family",a),b.inputBox.css("font-size",c+"px"),b.inputBox.css("color",d),b.inputBox.css("opacity",1),b.inputBox.css("width",g+"px")},b.onOK=function(){TQ.InputMap.turnOn(),b.visible=!1,b.boxDiv.hide(),b.lastElement.show(!0)},b.onNo=function(){TQ.InputMap.turnOn(),b.visible&&(b.visible=!1,b.boxDiv.hide())},b.realTimeUpdate=function(){if(assertNotNull(TQ.Dictionary.PleaseSelectText,b.lastElement),null!=b.lastElement){var a=b.inputBox.val(),c=$("#fontFamilySelector :selected").val(),d=b.fontsize,e=b.fontcolor;b.lastElement.setText(a,c,d,e),b.setEditor(c,d,e,b.xCanvas,b.yCanvas)}},b.setFontColor=function(a){TQ.TextEditor.fontcolor=a,TQ.TextEditor.realTimeUpdate()},b.create=function(){$("#textEditBoxDivFontSize .jdt-progress").slider({range:"min",value:TQ.Config.fontSize,min:5,max:72,create:function(){$("#textEditBoxDivFontSize .jdt-progress .ui-slider-handle").attr("class","jdt-slider-handle")},slide:function(a,b){var c=b.value;TQ.TextEditor.fontsize=c,TQ.TextEditor.realTimeUpdate(),$("dt").css("paddingLeft",c),$("#textEditBoxDivFontSize .jdt-progress .ui-slider-handle").attr("class","jdt-slider-handle")}})},TQ.TextEditor=b}(),function(a){function b(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,f=0,g=0,b=a.event.fix(c);return b.type="mousewheel",c.wheelDelta&&(e=c.wheelDelta/120),c.detail&&(e=-c.detail/3),g=e,void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(g=0,f=-1*e),void 0!==c.wheelDeltaY&&(g=c.wheelDeltaY/120),void 0!==c.wheelDeltaX&&(f=-1*c.wheelDeltaX/120),d.unshift(b,e,f,g),(a.event.dispatch||a.event.handle).apply(this,d)}var c=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var d=c.length;d;)a.event.fixHooks[c[--d]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],b,!1);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],b,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}(jQuery),function(a){function b(){var a=-1,b=this;b.append=function(c){var d,e=b.table;for(d=0;d<c.length;d++)a=a>>>8^e[255&(a^c[d])]},b.get=function(){return~a}}function c(a,b,c){return a.slice?a.slice(b,b+c):a.webkitSlice?a.webkitSlice(b,b+c):a.mozSlice?a.mozSlice(b,b+c):a.msSlice?a.msSlice(b,b+c):void 0}function d(a,b){var c,d;return c=new ArrayBuffer(a),d=new Uint8Array(c),b&&d.set(b,0),{buffer:c,array:d,view:new DataView(c)}}function e(){}function f(a){function b(b,c){var f=new Blob([a],{type:M});d=new h(f),d.init(function(){e.size=d.size,b()},c)}function c(a,b,c,e){d.readUint8Array(a,b,c,e)}var d,e=this;e.size=0,e.init=b,e.readUint8Array=c}function g(b){function c(a){for(var c=b.length;"="==b.charAt(c-1);)c--;f=b.indexOf(",")+1,g.size=Math.floor(.75*(c-f)),a()}function e(c,e,g){var h,i=d(e),j=4*Math.floor(c/3),k=4*Math.ceil((c+e)/3),l=a.atob(b.substring(j+f,k+f)),m=c-3*Math.floor(j/4);for(h=m;m+e>h;h++)i.array[h-m]=l.charCodeAt(h);g(i.array)}var f,g=this;g.size=0,g.init=c,g.readUint8Array=e}function h(a){function b(b){this.size=a.size,b()}function d(b,d,e,f){var g=new FileReader;g.onload=function(a){e(new Uint8Array(a.target.result))},g.onerror=f,g.readAsArrayBuffer(c(a,b,d))}var e=this;e.size=0,e.init=b,e.readUint8Array=d}function i(){}function j(a){function b(a){e=new Blob([],{type:M}),a()}function c(a,b){e=new Blob([e,A?a:a.buffer],{type:M}),b()}function d(b,c){var d=new FileReader;d.onload=function(a){b(a.target.result)},d.onerror=c,d.readAsText(e,a)}var e,f=this;f.init=b,f.writeUint8Array=c,f.getData=d}function k(b){function c(a){g+="data:"+(b||"")+";base64,",a()}function d(b,c){var d,e=h.length,f=h;for(h="",d=0;d<3*Math.floor((e+b.length)/3)-e;d++)f+=String.fromCharCode(b[d]);for(;d<b.length;d++)h+=String.fromCharCode(b[d]);f.length>2?g+=a.btoa(f):h=f,c()}function e(b){b(g+a.btoa(h))}var f=this,g="",h="";f.init=c,f.writeUint8Array=d,f.getData=e}function l(a){function b(b){e=new Blob([],{type:a}),b()}function c(b,c){e=new Blob([e,A?b:b.buffer],{type:a}),c()}function d(a){a(e)}var e,f=this;f.init=b,f.writeUint8Array=c,f.getData=d}function m(a,b,c,d,e,f,g,h,i,j){function k(){a.removeEventListener(N,l,!1),h(o)}function l(a){var b=a.data,d=b.data;b.onappend&&(o+=d.length,c.writeUint8Array(d,function(){f(!1,d),m()},j)),b.onflush&&(d?(o+=d.length,c.writeUint8Array(d,function(){f(!1,d),k()},j)):k()),b.progress&&g&&g(n+b.current,e)}function m(){n=p*J,e>n?b.readUint8Array(d+n,Math.min(J,e-n),function(b){a.postMessage({append:!0,data:b}),p++,g&&g(n,e),f(!0,b)},i):a.postMessage({flush:!0})}var n,o,p=0;o=0,a.addEventListener(N,l,!1),m()}function n(a,b,c,d,e,f,g,h,i,j){function k(){var o;l=m*J,e>l?b.readUint8Array(d+l,Math.min(J,e-l),function(b){var h=a.append(b,function(){g&&g(d+l,e)});n+=h.length,f(!0,b),c.writeUint8Array(h,function(){f(!1,h),m++,setTimeout(k,1)},j),g&&g(l,e)},i):(o=a.flush(),o?(n+=o.length,c.writeUint8Array(o,function(){f(!1,o),h(n)},j)):h(n))}var l,m=0,n=0;k()}function o(c,d,e,f,g,h,i,j,k){function l(a,b){g&&!a&&q.append(b)}function o(a){h(a,q.get())}var p,q=new b;return a.zip.useWebWorkers?(p=new Worker(a.zip.workerScriptsPath+K),m(p,c,d,e,f,l,i,o,j,k)):n(new a.zip.Inflater,c,d,e,f,l,i,o,j,k),p}function p(c,d,e,f,g,h,i){function j(a,b){a&&p.append(b)}function k(a){f(a,p.get())}function l(){o.removeEventListener(N,l,!1),m(o,c,d,0,c.size,j,g,k,h,i)}var o,p=new b;return a.zip.useWebWorkers?(o=new Worker(a.zip.workerScriptsPath+L),o.addEventListener(N,l,!1),o.postMessage({init:!0,level:e})):n(new a.zip.Deflater,c,d,0,c.size,j,g,k,h,i),o}function q(a,c,d,e,f,g,h,i,j){function k(){var b=l*J;e>b?a.readUint8Array(d+b,Math.min(J,e-b),function(a){f&&m.append(a),h&&h(b,e,a),c.writeUint8Array(a,function(){l++,k()},j)},i):g(e,m.get())}var l=0,m=new b;k()}function r(a){var b,c,d="",e=["Ç","ü","é","â","ä","à","å","ç","ê","ë","è","ï","î","ì","Ä","Å","É","æ","Æ","ô","ö","ò","û","ù","ÿ","Ö","Ü","ø","£","Ø","×","ƒ","á","í","ó","ú","ñ","Ñ","ª","º","¿","®","¬","½","¼","¡","«","»","_","_","_","¦","¦","Á","Â","À","©","¦","¦","+","+","¢","¥","+","+","-","-","+","-","+","ã","Ã","+","+","-","-","¦","-","+","¤","ð","Ð","Ê","Ë","È","i","Í","Î","Ï","+","+","_","_","¦","Ì","_","Ó","ß","Ô","Ò","õ","Õ","µ","þ","Þ","Ú","Û","Ù","ý","Ý","¯","´","­","±","_","¾","¶","§","÷","¸","°","¨","·","¹","³","²","_"," "];for(b=0;b<a.length;b++)c=255&a.charCodeAt(b),d+=c>127?e[c-128]:String.fromCharCode(c);return d}function s(a){return decodeURIComponent(escape(a))}function t(a){var b,c="";for(b=0;b<a.length;b++)c+=String.fromCharCode(a[b]);return c}function u(a){var b=(4294901760&a)>>16,c=65535&a;try{return new Date(1980+((65024&b)>>9),((480&b)>>5)-1,31&b,(63488&c)>>11,(2016&c)>>5,2*(31&c),0)}catch(d){}}function v(a,b,c,d,e){return a.version=b.view.getUint16(c,!0),a.bitFlag=b.view.getUint16(c+2,!0),a.compressionMethod=b.view.getUint16(c+4,!0),a.lastModDateRaw=b.view.getUint32(c+6,!0),a.lastModDate=u(a.lastModDateRaw),1===(1&a.bitFlag)?void e(C):((d||8!=(8&a.bitFlag))&&(a.crc32=b.view.getUint32(c+10,!0),a.compressedSize=b.view.getUint32(c+14,!0),a.uncompressedSize=b.view.getUint32(c+18,!0)),4294967295===a.compressedSize||4294967295===a.uncompressedSize?void e(D):(a.filenameLength=b.view.getUint16(c+22,!0),void(a.extraFieldLength=b.view.getUint16(c+24,!0))))}function w(a,b){function c(){}function e(c,f){a.readUint8Array(a.size-c,c,function(a){var b=d(a.length,a).view;1347093766!=b.getUint32(0)?e(c+1,f):f(b)},function(){b(E)})}return c.prototype.getData=function(c,e,f,g){function h(a,b){m&&m.terminate(),m=null,a&&a(b)}function i(a){var b=d(4);return b.view.setUint32(0,a),n.crc32==b.view.getUint32(0)}function j(a,b){g&&!i(b)?k():c.getData(function(a){h(e,a)})}function k(){h(b,H)}function l(){h(b,G)}var m,n=this;a.readUint8Array(n.offset,30,function(e){var h,i=d(e.length,e);return 1347093252!=i.view.getUint32(0)?void b(B):(v(n,i,4,!1,b),h=n.offset+30+n.filenameLength+n.extraFieldLength,void c.init(function(){0===n.compressionMethod?q(a,c,h,n.compressedSize,g,j,f,k,l):m=o(a,c,h,n.compressedSize,g,j,f,k,l)},l))},k)},{getEntries:function(f){return a.size<22?void b(B):void e(22,function(e){var g,h;g=e.getUint32(16,!0),h=e.getUint16(8,!0),a.readUint8Array(g,a.size-g,function(a){var e,g,i,j,k=0,l=[],m=d(a.length,a);for(e=0;h>e;e++){if(g=new c,1347092738!=m.view.getUint32(k))return void b(B);v(g,m,k+6,!0,b),g.commentLength=m.view.getUint16(k+32,!0),g.directory=16==(16&m.view.getUint8(k+38)),g.offset=m.view.getUint32(k+42,!0),i=t(m.array.subarray(k+46,k+46+g.filenameLength)),g.filename=2048===(2048&g.bitFlag)?s(i):r(i),g.directory||"/"!=g.filename.charAt(g.filename.length-1)||(g.directory=!0),j=t(m.array.subarray(k+46+g.filenameLength+g.extraFieldLength,k+46+g.filenameLength+g.extraFieldLength+g.commentLength)),g.comment=2048===(2048&g.bitFlag)?s(j):r(j),l.push(g),k+=46+g.filenameLength+g.extraFieldLength+g.commentLength}f(l)},function(){b(E)})})},close:function(a){a&&a()}}}function x(a){return unescape(encodeURIComponent(a))}function y(a){var b,c=[];for(b=0;b<a.length;b++)c.push(a.charCodeAt(b));return c}function z(a,b,c){function e(a,b){h&&h.terminate(),h=null,a&&a(b)}function f(){e(b,F)}function g(){e(b,H)}var h,i={},j=[],k=0;return{add:function(l,m,n,o,r){function s(b){var e;z=r.lastModDate||new Date,v=d(26),i[l]={headerArray:v.array,directory:r.directory,filename:w,offset:k,comment:y(x(r.comment||""))},v.view.setUint32(0,335546376),r.version&&v.view.setUint8(0,r.version),c||0===r.level||r.directory||v.view.setUint16(4,2048),v.view.setUint16(6,(z.getHours()<<6|z.getMinutes())<<5|z.getSeconds()/2,!0),v.view.setUint16(8,(z.getFullYear()-1980<<4|z.getMonth()+1)<<5|z.getDate(),!0),v.view.setUint16(22,w.length,!0),e=d(30+w.length),e.view.setUint32(0,1347093252),e.array.set(v.array,4),e.array.set(w,30),k+=e.array.length,a.writeUint8Array(e.array,b,f)}function t(b,c){var g=d(16);k+=b||0,g.view.setUint32(0,1347094280),"undefined"!=typeof c&&(v.view.setUint32(10,c,!0),g.view.setUint32(4,c,!0)),m&&(g.view.setUint32(8,b,!0),v.view.setUint32(14,b,!0),g.view.setUint32(12,m.size,!0),v.view.setUint32(18,m.size,!0)),a.writeUint8Array(g.array,function(){k+=16,e(n)},f)}function u(){return r=r||{},l=l.trim(),r.directory&&"/"!=l.charAt(l.length-1)&&(l+="/"),i.hasOwnProperty(l)?void b(I):(w=y(x(l)),j.push(l),void s(function(){m?c||0===r.level?q(m,a,0,m.size,!0,t,o,g,f):h=p(m,a,r.level,t,o,g,f):t()},f))}var v,w,z;m?m.init(u,g):u()},close:function(b){var c,g,h,l=0,m=0;for(g=0;g<j.length;g++)h=i[j[g]],l+=46+h.filename.length+h.comment.length;for(c=d(l+22),g=0;g<j.length;g++)h=i[j[g]],c.view.setUint32(m,1347092738),c.view.setUint16(m+4,5120),c.array.set(h.headerArray,m+6),c.view.setUint16(m+32,h.comment.length,!0),h.directory&&c.view.setUint8(m+38,16),c.view.setUint32(m+42,h.offset,!0),c.array.set(h.filename,m+46),c.array.set(h.comment,m+46+h.filename.length),m+=46+h.filename.length+h.comment.length;c.view.setUint32(m,1347093766),c.view.setUint16(m+8,j.length,!0),c.view.setUint16(m+10,j.length,!0),c.view.setUint32(m+12,l,!0),c.view.setUint32(m+16,k,!0),a.writeUint8Array(c.array,function(){e(function(){a.getData(b)})},f)}}}var A,B="File format is not recognized.",C="File contains encrypted entry.",D="File is using Zip64 (4gb+ file size).",E="Error while reading zip file.",F="Error while writing zip file.",G="Error while writing file data.",H="Error while reading file data.",I="File already exists.",J=524288,K="inflate.js",L="deflate.js",M="text/plain",N="message";
try{A=0===new Blob([new DataView(new ArrayBuffer(0))]).size}catch(O){}b.prototype.table=function(){var a,b,c,d=[];for(a=0;256>a;a++){for(c=a,b=0;8>b;b++)1&c?c=c>>>1^3988292384:c>>>=1;d[a]=c}return d}(),f.prototype=new e,f.prototype.constructor=f,g.prototype=new e,g.prototype.constructor=g,h.prototype=new e,h.prototype.constructor=h,i.prototype.getData=function(a){a(this.data)},j.prototype=new i,j.prototype.constructor=j,k.prototype=new i,k.prototype.constructor=k,l.prototype=new i,l.prototype.constructor=l,a.zip={Reader:e,Writer:i,BlobReader:h,Data64URIReader:g,TextReader:f,BlobWriter:l,Data64URIWriter:k,TextWriter:j,createReader:function(a,b,c){a.init(function(){b(w(a,c))},c)},createWriter:function(a,b,c,d){a.init(function(){b(z(a,c,d))},c)},workerScriptsPath:"",useWebWorkers:!0}}(this),function(a){function b(){function a(a){var b,c,e,f,g,h,j=d.dyn_tree,k=d.stat_desc.static_tree,l=d.stat_desc.extra_bits,m=d.stat_desc.extra_base,n=d.stat_desc.max_length,p=0;for(f=0;i>=f;f++)a.bl_count[f]=0;for(j[2*a.heap[a.heap_max]+1]=0,b=a.heap_max+1;o>b;b++)c=a.heap[b],f=j[2*j[2*c+1]+1]+1,f>n&&(f=n,p++),j[2*c+1]=f,c>d.max_code||(a.bl_count[f]++,g=0,c>=m&&(g=l[c-m]),h=j[2*c],a.opt_len+=h*(f+g),k&&(a.static_len+=h*(k[2*c+1]+g)));if(0!==p){do{for(f=n-1;0===a.bl_count[f];)f--;a.bl_count[f]--,a.bl_count[f+1]+=2,a.bl_count[n]--,p-=2}while(p>0);for(f=n;0!==f;f--)for(c=a.bl_count[f];0!==c;)e=a.heap[--b],e>d.max_code||(j[2*e+1]!=f&&(a.opt_len+=(f-j[2*e+1])*j[2*e],j[2*e+1]=f),c--)}}function b(a,b){var c=0;do c|=1&a,a>>>=1,c<<=1;while(--b>0);return c>>>1}function c(a,c,d){var e,f,g,h=[],j=0;for(e=1;i>=e;e++)h[e]=j=j+d[e-1]<<1;for(f=0;c>=f;f++)g=a[2*f+1],0!==g&&(a[2*f]=b(h[g]++,g))}var d=this;d.build_tree=function(b){var e,f,g,h=d.dyn_tree,i=d.stat_desc.static_tree,j=d.stat_desc.elems,k=-1;for(b.heap_len=0,b.heap_max=o,e=0;j>e;e++)0!==h[2*e]?(b.heap[++b.heap_len]=k=e,b.depth[e]=0):h[2*e+1]=0;for(;b.heap_len<2;)g=b.heap[++b.heap_len]=2>k?++k:0,h[2*g]=1,b.depth[g]=0,b.opt_len--,i&&(b.static_len-=i[2*g+1]);for(d.max_code=k,e=Math.floor(b.heap_len/2);e>=1;e--)b.pqdownheap(h,e);g=j;do e=b.heap[1],b.heap[1]=b.heap[b.heap_len--],b.pqdownheap(h,1),f=b.heap[1],b.heap[--b.heap_max]=e,b.heap[--b.heap_max]=f,h[2*g]=h[2*e]+h[2*f],b.depth[g]=Math.max(b.depth[e],b.depth[f])+1,h[2*e+1]=h[2*f+1]=g,b.heap[1]=g++,b.pqdownheap(h,1);while(b.heap_len>=2);b.heap[--b.heap_max]=b.heap[1],a(b),c(h,d.max_code,b.bl_count)}}function c(a,b,c,d,e){var f=this;f.static_tree=a,f.extra_bits=b,f.extra_base=c,f.elems=d,f.max_length=e}function d(a,b,c,d,e){var f=this;f.good_length=a,f.max_lazy=b,f.nice_length=c,f.max_chain=d,f.func=e}function e(a,b,c,d){var e=a[2*b],f=a[2*c];return f>e||e==f&&d[b]<=d[c]}function f(){function a(){var a;for(Eb=2*Ab,Gb[Ib-1]=0,a=0;Ib-1>a;a++)Gb[a]=0;Vb=P[Wb].max_lazy,Yb=P[Wb].good_length,Zb=P[Wb].nice_length,Ub=P[Wb].max_chain,Qb=0,Mb=0,Sb=0,Nb=Tb=bb-1,Pb=0,Hb=0}function d(){var a;for(a=0;n>a;a++)$b[2*a]=0;for(a=0;j>a;a++)_b[2*a]=0;for(a=0;k>a;a++)ac[2*a]=0;$b[2*p]=1,bc.opt_len=bc.static_len=0,hc=jc=0}function f(){cc.dyn_tree=$b,cc.stat_desc=c.static_l_desc,dc.dyn_tree=_b,dc.stat_desc=c.static_d_desc,ec.dyn_tree=ac,ec.stat_desc=c.static_bl_desc,lc=0,mc=0,kc=8,d()}function g(a,b){var c,d,e=-1,f=a[1],g=0,h=7,i=4;for(0===f&&(h=138,i=3),a[2*(b+1)+1]=65535,c=0;b>=c;c++)d=f,f=a[2*(c+1)+1],++g<h&&d==f||(i>g?ac[2*d]+=g:0!==d?(d!=e&&ac[2*d]++,ac[2*r]++):10>=g?ac[2*s]++:ac[2*t]++,g=0,e=d,0===f?(h=138,i=3):d==f?(h=6,i=3):(h=7,i=4))}function h(){var a;for(g($b,cc.max_code),g(_b,dc.max_code),ec.build_tree(bc),a=k-1;a>=3&&0===ac[2*b.bl_order[a]+1];a--);return bc.opt_len+=3*(a+1)+5+5+4,a}function i(a){bc.pending_buf[bc.pending++]=a}function l(a){i(255&a),i(a>>>8&255)}function o(a){i(a>>8&255),i(255&a&255)}function q(a,b){var c,d=b;mc>u-d?(c=a,lc|=c<<mc&65535,l(lc),lc=c>>>u-mc,mc+=d-u):(lc|=a<<mc&65535,mc+=d)}function J(a,b){var c=2*a;q(65535&b[c],65535&b[c+1])}function eb(a,b){var c,d,e=-1,f=a[1],g=0,h=7,i=4;for(0===f&&(h=138,i=3),c=0;b>=c;c++)if(d=f,f=a[2*(c+1)+1],!(++g<h&&d==f)){if(i>g){do J(d,ac);while(0!==--g)}else 0!==d?(d!=e&&(J(d,ac),g--),J(r,ac),q(g-3,2)):10>=g?(J(s,ac),q(g-3,3)):(J(t,ac),q(g-11,7));g=0,e=d,0===f?(h=138,i=3):d==f?(h=6,i=3):(h=7,i=4)}}function fb(a,c,d){var e;for(q(a-257,5),q(c-1,5),q(d-4,4),e=0;d>e;e++)q(ac[2*b.bl_order[e]+1],3);eb($b,a-1),eb(_b,c-1)}function gb(){16==mc?(l(lc),lc=0,mc=0):mc>=8&&(i(255&lc),lc>>>=8,mc-=8)}function hb(){q(_<<1,3),J(p,c.static_ltree),gb(),9>1+kc+10-mc&&(q(_<<1,3),J(p,c.static_ltree),gb()),kc=7}function ib(a,c){var d,e,f;if(bc.pending_buf[ic+2*hc]=a>>>8&255,bc.pending_buf[ic+2*hc+1]=255&a,bc.pending_buf[fc+hc]=255&c,hc++,0===a?$b[2*c]++:(jc++,a--,$b[2*(b._length_code[c]+m+1)]++,_b[2*b.d_code(a)]++),0===(8191&hc)&&Wb>2){for(d=8*hc,e=Qb-Mb,f=0;j>f;f++)d+=_b[2*f]*(5+b.extra_dbits[f]);if(d>>>=3,jc<Math.floor(hc/2)&&d<Math.floor(e/2))return!0}return hc==gc-1}function jb(a,c){var d,e,f,g,h=0;if(0!==hc)do d=bc.pending_buf[ic+2*h]<<8&65280|255&bc.pending_buf[ic+2*h+1],e=255&bc.pending_buf[fc+h],h++,0===d?J(e,a):(f=b._length_code[e],J(f+m+1,a),g=b.extra_lbits[f],0!==g&&(e-=b.base_length[f],q(e,g)),d--,f=b.d_code(d),J(f,c),g=b.extra_dbits[f],0!==g&&(d-=b.base_dist[f],q(d,g)));while(hc>h);J(p,a),kc=a[2*p+1]}function kb(){mc>8?l(lc):mc>0&&i(255&lc),lc=0,mc=0}function lb(a,b,c){kb(),kc=8,c&&(l(b),l(~b)),bc.pending_buf.set(Db.subarray(a,a+b),bc.pending),bc.pending+=b}function mb(a,b,c){q(($<<1)+(c?1:0),3),lb(a,b,!0)}function nb(a,b,e){var f,g,i=0;Wb>0?(cc.build_tree(bc),dc.build_tree(bc),i=h(),f=bc.opt_len+3+7>>>3,g=bc.static_len+3+7>>>3,f>=g&&(f=g)):f=g=b+5,f>=b+4&&-1!=a?mb(a,b,e):g==f?(q((_<<1)+(e?1:0),3),jb(c.static_ltree,c.static_dtree)):(q((ab<<1)+(e?1:0),3),fb(cc.max_code+1,dc.max_code+1,i+1),jb($b,_b)),d(),e&&kb()}function ob(a){nb(Mb>=0?Mb:-1,Qb-Mb,a),Mb=Qb,vb.flush_pending()}function pb(){var a,b,c,d;do{if(d=Eb-Sb-Qb,0===d&&0===Qb&&0===Sb)d=Ab;else if(-1==d)d--;else if(Qb>=Ab+Ab-db){Db.set(Db.subarray(Ab,Ab+Ab),0),Rb-=Ab,Qb-=Ab,Mb-=Ab,a=Ib,c=a;do b=65535&Gb[--c],Gb[c]=b>=Ab?b-Ab:0;while(0!==--a);a=Ab,c=a;do b=65535&Fb[--c],Fb[c]=b>=Ab?b-Ab:0;while(0!==--a);d+=Ab}if(0===vb.avail_in)return;a=vb.read_buf(Db,Qb+Sb,d),Sb+=a,Sb>=bb&&(Hb=255&Db[Qb],Hb=(Hb<<Lb^255&Db[Qb+1])&Kb)}while(db>Sb&&0!==vb.avail_in)}function qb(a){var b,c=65535;for(c>xb-5&&(c=xb-5);;){if(1>=Sb){if(pb(),0===Sb&&a==z)return R;if(0===Sb)break}if(Qb+=Sb,Sb=0,b=Mb+c,(0===Qb||Qb>=b)&&(Sb=Qb-b,Qb=b,ob(!1),0===vb.avail_out))return R;if(Qb-Mb>=Ab-db&&(ob(!1),0===vb.avail_out))return R}return ob(a==C),0===vb.avail_out?a==C?T:R:a==C?U:S}function rb(a){var b,c,d=Ub,e=Qb,f=Tb,g=Qb>Ab-db?Qb-(Ab-db):0,h=Zb,i=Cb,j=Qb+cb,k=Db[e+f-1],l=Db[e+f];Tb>=Yb&&(d>>=2),h>Sb&&(h=Sb);do if(b=a,Db[b+f]==l&&Db[b+f-1]==k&&Db[b]==Db[e]&&Db[++b]==Db[e+1]){e+=2,b++;do;while(Db[++e]==Db[++b]&&Db[++e]==Db[++b]&&Db[++e]==Db[++b]&&Db[++e]==Db[++b]&&Db[++e]==Db[++b]&&Db[++e]==Db[++b]&&Db[++e]==Db[++b]&&Db[++e]==Db[++b]&&j>e);if(c=cb-(j-e),e=j-cb,c>f){if(Rb=a,f=c,c>=h)break;k=Db[e+f-1],l=Db[e+f]}}while((a=65535&Fb[a&i])>g&&0!==--d);return Sb>=f?f:Sb}function sb(a){for(var b,c=0;;){if(db>Sb){if(pb(),db>Sb&&a==z)return R;if(0===Sb)break}if(Sb>=bb&&(Hb=(Hb<<Lb^255&Db[Qb+(bb-1)])&Kb,c=65535&Gb[Hb],Fb[Qb&Cb]=Gb[Hb],Gb[Hb]=Qb),0!==c&&Ab-db>=(Qb-c&65535)&&Xb!=x&&(Nb=rb(c)),Nb>=bb)if(b=ib(Qb-Rb,Nb-bb),Sb-=Nb,Vb>=Nb&&Sb>=bb){Nb--;do Qb++,Hb=(Hb<<Lb^255&Db[Qb+(bb-1)])&Kb,c=65535&Gb[Hb],Fb[Qb&Cb]=Gb[Hb],Gb[Hb]=Qb;while(0!==--Nb);Qb++}else Qb+=Nb,Nb=0,Hb=255&Db[Qb],Hb=(Hb<<Lb^255&Db[Qb+1])&Kb;else b=ib(0,255&Db[Qb]),Sb--,Qb++;if(b&&(ob(!1),0===vb.avail_out))return R}return ob(a==C),0===vb.avail_out?a==C?T:R:a==C?U:S}function tb(a){for(var b,c,d=0;;){if(db>Sb){if(pb(),db>Sb&&a==z)return R;if(0===Sb)break}if(Sb>=bb&&(Hb=(Hb<<Lb^255&Db[Qb+(bb-1)])&Kb,d=65535&Gb[Hb],Fb[Qb&Cb]=Gb[Hb],Gb[Hb]=Qb),Tb=Nb,Ob=Rb,Nb=bb-1,0!==d&&Vb>Tb&&Ab-db>=(Qb-d&65535)&&(Xb!=x&&(Nb=rb(d)),5>=Nb&&(Xb==w||Nb==bb&&Qb-Rb>4096)&&(Nb=bb-1)),Tb>=bb&&Tb>=Nb){c=Qb+Sb-bb,b=ib(Qb-1-Ob,Tb-bb),Sb-=Tb-1,Tb-=2;do++Qb<=c&&(Hb=(Hb<<Lb^255&Db[Qb+(bb-1)])&Kb,d=65535&Gb[Hb],Fb[Qb&Cb]=Gb[Hb],Gb[Hb]=Qb);while(0!==--Tb);if(Pb=0,Nb=bb-1,Qb++,b&&(ob(!1),0===vb.avail_out))return R}else if(0!==Pb){if(b=ib(0,255&Db[Qb-1]),b&&ob(!1),Qb++,Sb--,0===vb.avail_out)return R}else Pb=1,Qb++,Sb--}return 0!==Pb&&(b=ib(0,255&Db[Qb-1]),Pb=0),ob(a==C),0===vb.avail_out?a==C?T:R:a==C?U:S}function ub(b){return b.total_in=b.total_out=0,b.msg=null,bc.pending=0,bc.pending_out=0,wb=X,zb=z,f(),a(),D}var vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb,Yb,Zb,$b,_b,ac,bc=this,cc=new b,dc=new b,ec=new b;bc.depth=[];var fc,gc,hc,ic,jc,kc,lc,mc;bc.bl_count=[],bc.heap=[],$b=[],_b=[],ac=[],bc.pqdownheap=function(a,b){for(var c=bc.heap,d=c[b],f=b<<1;f<=bc.heap_len&&(f<bc.heap_len&&e(a,c[f+1],c[f],bc.depth)&&f++,!e(a,d,c[f],bc.depth));)c[b]=c[f],b=f,f<<=1;c[b]=d},bc.deflateInit=function(a,b,c,d,e,f){return d||(d=Z),e||(e=L),f||(f=y),a.msg=null,b==v&&(b=6),1>e||e>K||d!=Z||9>c||c>15||0>b||b>9||0>f||f>x?G:(a.dstate=bc,Bb=c,Ab=1<<Bb,Cb=Ab-1,Jb=e+7,Ib=1<<Jb,Kb=Ib-1,Lb=Math.floor((Jb+bb-1)/bb),Db=new Uint8Array(2*Ab),Fb=[],Gb=[],gc=1<<e+6,bc.pending_buf=new Uint8Array(4*gc),xb=4*gc,ic=Math.floor(gc/2),fc=3*gc,Wb=b,Xb=f,yb=255&d,ub(a))},bc.deflateEnd=function(){return wb!=W&&wb!=X&&wb!=Y?G:(bc.pending_buf=null,Gb=null,Fb=null,Db=null,bc.dstate=null,wb==X?H:D)},bc.deflateParams=function(a,b,c){var d=D;return b==v&&(b=6),0>b||b>9||0>c||c>x?G:(P[Wb].func!=P[b].func&&0!==a.total_in&&(d=a.deflate(A)),Wb!=b&&(Wb=b,Vb=P[Wb].max_lazy,Yb=P[Wb].good_length,Zb=P[Wb].nice_length,Ub=P[Wb].max_chain),Xb=c,d)},bc.deflateSetDictionary=function(a,b,c){var d,e=c,f=0;if(!b||wb!=W)return G;if(bb>e)return D;for(e>Ab-db&&(e=Ab-db,f=c-e),Db.set(b.subarray(f,f+e),0),Qb=e,Mb=e,Hb=255&Db[0],Hb=(Hb<<Lb^255&Db[1])&Kb,d=0;e-bb>=d;d++)Hb=(Hb<<Lb^255&Db[d+(bb-1)])&Kb,Fb[d&Cb]=Gb[Hb],Gb[Hb]=d;return D},bc.deflate=function(a,b){var c,d,e,f,g;if(b>C||0>b)return G;if(!a.next_out||!a.next_in&&0!==a.avail_in||wb==Y&&b!=C)return a.msg=Q[F-G],G;if(0===a.avail_out)return a.msg=Q[F-I],I;if(vb=a,f=zb,zb=b,wb==W&&(d=Z+(Bb-8<<4)<<8,e=(Wb-1&255)>>1,e>3&&(e=3),d|=e<<6,0!==Qb&&(d|=V),d+=31-d%31,wb=X,o(d)),0!==bc.pending){if(vb.flush_pending(),0===vb.avail_out)return zb=-1,D}else if(0===vb.avail_in&&f>=b&&b!=C)return vb.msg=Q[F-I],I;if(wb==Y&&0!==vb.avail_in)return a.msg=Q[F-I],I;if(0!==vb.avail_in||0!==Sb||b!=z&&wb!=Y){switch(g=-1,P[Wb].func){case M:g=qb(b);break;case N:g=sb(b);break;case O:g=tb(b)}if((g==T||g==U)&&(wb=Y),g==R||g==T)return 0===vb.avail_out&&(zb=-1),D;if(g==S){if(b==A)hb();else if(mb(0,0,!1),b==B)for(c=0;Ib>c;c++)Gb[c]=0;if(vb.flush_pending(),0===vb.avail_out)return zb=-1,D}}return b!=C?D:E}}function g(){var a=this;a.next_in_index=0,a.next_out_index=0,a.avail_in=0,a.total_in=0,a.avail_out=0,a.total_out=0}function h(a){var b=this,c=new g,d=512,e=z,f=new Uint8Array(d);"undefined"==typeof a&&(a=v),c.deflateInit(a),c.next_out=f,b.append=function(a,b){var g,h,i=[],j=0,k=0,l=0;if(a.length){c.next_in_index=0,c.next_in=a,c.avail_in=a.length;do{if(c.next_out_index=0,c.avail_out=d,g=c.deflate(e),g!=D)throw"deflating: "+c.msg;c.next_out_index&&i.push(c.next_out_index==d?new Uint8Array(f):new Uint8Array(f.subarray(0,c.next_out_index))),l+=c.next_out_index,b&&c.next_in_index>0&&c.next_in_index!=j&&(b(c.next_in_index),j=c.next_in_index)}while(c.avail_in>0||0===c.avail_out);return h=new Uint8Array(l),i.forEach(function(a){h.set(a,k),k+=a.length}),h}},b.flush=function(){var a,b,e=[],g=0,h=0;do{if(c.next_out_index=0,c.avail_out=d,a=c.deflate(C),a!=E&&a!=D)throw"deflating: "+c.msg;d-c.avail_out>0&&e.push(new Uint8Array(f.subarray(0,c.next_out_index))),h+=c.next_out_index}while(c.avail_in>0||0===c.avail_out);return c.deflateEnd(),b=new Uint8Array(h),e.forEach(function(a){b.set(a,g),g+=a.length}),b}}var i=15,j=30,k=19,l=29,m=256,n=m+1+l,o=2*n+1,p=256,q=7,r=16,s=17,t=18,u=16,v=-1,w=1,x=2,y=0,z=0,A=1,B=3,C=4,D=0,E=1,F=2,G=-2,H=-3,I=-5,J=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];b._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],b.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],b.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],b.d_code=function(a){return 256>a?J[a]:J[256+(a>>>7)]},b.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],b.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],b.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],b.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],c.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],c.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],c.static_l_desc=new c(c.static_ltree,b.extra_lbits,m+1,n,i),c.static_d_desc=new c(c.static_dtree,b.extra_dbits,0,j,i),c.static_bl_desc=new c(null,b.extra_blbits,0,k,q);var K=9,L=8,M=0,N=1,O=2,P=[new d(0,0,0,0,M),new d(4,4,8,4,N),new d(4,5,16,8,N),new d(4,6,32,32,N),new d(4,4,16,16,O),new d(8,16,32,32,O),new d(8,16,128,128,O),new d(8,32,128,256,O),new d(32,128,258,1024,O),new d(32,258,258,4096,O)],Q=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],R=0,S=1,T=2,U=3,V=32,W=42,X=113,Y=666,Z=8,$=0,_=1,ab=2,bb=3,cb=258,db=cb+bb+1;g.prototype={deflateInit:function(a,b){var c=this;return c.dstate=new f,b||(b=i),c.dstate.deflateInit(c,a,b)},deflate:function(a){var b=this;return b.dstate?b.dstate.deflate(b,a):G},deflateEnd:function(){var a=this;if(!a.dstate)return G;var b=a.dstate.deflateEnd();return a.dstate=null,b},deflateParams:function(a,b){var c=this;return c.dstate?c.dstate.deflateParams(c,a,b):G},deflateSetDictionary:function(a,b){var c=this;return c.dstate?c.dstate.deflateSetDictionary(c,a,b):G},read_buf:function(a,b,c){var d=this,e=d.avail_in;return e>c&&(e=c),0===e?0:(d.avail_in-=e,a.set(d.next_in.subarray(d.next_in_index,d.next_in_index+e),b),d.next_in_index+=e,d.total_in+=e,e)},flush_pending:function(){var a=this,b=a.dstate.pending;b>a.avail_out&&(b=a.avail_out),0!==b&&(a.next_out.set(a.dstate.pending_buf.subarray(a.dstate.pending_out,a.dstate.pending_out+b),a.next_out_index),a.next_out_index+=b,a.dstate.pending_out+=b,a.total_out+=b,a.avail_out-=b,a.dstate.pending-=b,0===a.dstate.pending&&(a.dstate.pending_out=0))}};var eb;a.zip?a.zip.Deflater=h:(eb=new h,a.addEventListener("message",function(b){var c=b.data;c.init&&(eb=new h(c.level),a.postMessage({oninit:!0})),c.append&&a.postMessage({onappend:!0,data:eb.append(c.data,function(b){a.postMessage({progress:!0,current:b})})}),c.flush&&a.postMessage({onflush:!0,data:eb.flush()})},!1))}(this),function(a){function b(){function a(a,b,c,d,j,k,l,n,p,r,s){var t,u,v,w,x,y,z,A,C,D,E,F,G,H,I;D=0,x=c;do e[a[b+D]]++,D++,x--;while(0!==x);if(e[0]==c)return l[0]=-1,n[0]=0,i;for(A=n[0],y=1;B>=y&&0===e[y];y++);for(z=y,y>A&&(A=y),x=B;0!==x&&0===e[x];x--);for(v=x,A>x&&(A=x),n[0]=A,H=1<<y;x>y;y++,H<<=1)if((H-=e[y])<0)return m;if((H-=e[x])<0)return m;for(e[x]+=H,h[1]=y=0,D=1,G=2;0!==--x;)h[G]=y+=e[D],G++,D++;x=0,D=0;do 0!==(y=a[b+D])&&(s[h[y]++]=x),D++;while(++x<c);for(c=h[v],h[0]=x=0,D=0,w=-1,F=-A,g[0]=0,E=0,I=0;v>=z;z++)for(t=e[z];0!==t--;){for(;z>F+A;){if(w++,F+=A,I=v-F,I=I>A?A:I,(u=1<<(y=z-F))>t+1&&(u-=t+1,G=z,I>y))for(;++y<I&&!((u<<=1)<=e[++G]);)u-=e[G];if(I=1<<y,r[0]+I>q)return m;g[w]=E=r[0],r[0]+=I,0!==w?(h[w]=x,f[0]=y,f[1]=A,y=x>>>F-A,f[2]=E-g[w-1]-y,p.set(f,3*(g[w-1]+y))):l[0]=E}for(f[1]=z-F,D>=c?f[0]=192:s[D]<d?(f[0]=s[D]<256?0:96,f[2]=s[D++]):(f[0]=k[s[D]-d]+16+64,f[2]=j[s[D++]-d]),u=1<<z-F,y=x>>>F;I>y;y+=u)p.set(f,3*(E+y));for(y=1<<z-1;0!==(x&y);y>>>=1)x^=y;for(x^=y,C=(1<<F)-1;(x&C)!=h[w];)w--,F-=A,C=(1<<F)-1}return 0!==H&&1!=v?o:i}function b(a){var b;for(c||(c=[],d=[],e=new Int32Array(B+1),f=[],g=new Int32Array(B),h=new Int32Array(B+1)),d.length<a&&(d=[]),b=0;a>b;b++)d[b]=0;for(b=0;B+1>b;b++)e[b]=0;for(b=0;3>b;b++)f[b]=0;g.set(e.subarray(0,B),0),h.set(e.subarray(0,B+1),0)}var c,d,e,f,g,h,j=this;j.inflate_trees_bits=function(e,f,g,h,i){var j;return b(19),c[0]=0,j=a(e,0,19,19,null,null,g,f,h,c,d),j==m?i.msg="oversubscribed dynamic bit lengths tree":(j==o||0===f[0])&&(i.msg="incomplete dynamic bit lengths tree",j=m),j},j.inflate_trees_dynamic=function(e,f,g,h,j,k,l,p,q){var r;return b(288),c[0]=0,r=a(g,0,e,257,x,y,k,h,p,c,d),r!=i||0===h[0]?(r==m?q.msg="oversubscribed literal/length tree":r!=n&&(q.msg="incomplete literal/length tree",r=m),r):(b(288),r=a(g,e,f,0,z,A,l,j,p,c,d),r!=i||0===j[0]&&e>257?(r==m?q.msg="oversubscribed distance tree":r==o?(q.msg="incomplete distance tree",r=m):r!=n&&(q.msg="empty distance tree with lengths",r=m),r):i)}}function c(){function a(a,b,c,d,e,f,g,h){var k,l,n,o,q,r,s,t,u,v,w,x,y,z,A,B;s=h.next_in_index,t=h.avail_in,q=g.bitb,r=g.bitk,u=g.write,v=u<g.read?g.read-u-1:g.end-u,w=p[a],x=p[b];do{for(;20>r;)t--,q|=(255&h.read_byte(s++))<<r,r+=8;if(k=q&w,l=c,n=d,B=3*(n+k),0!==(o=l[B]))for(;;){if(q>>=l[B+1],r-=l[B+1],0!==(16&o)){for(o&=15,y=l[B+2]+(q&p[o]),q>>=o,r-=o;15>r;)t--,q|=(255&h.read_byte(s++))<<r,r+=8;for(k=q&x,l=e,n=f,B=3*(n+k),o=l[B];;){if(q>>=l[B+1],r-=l[B+1],0!==(16&o)){for(o&=15;o>r;)t--,q|=(255&h.read_byte(s++))<<r,r+=8;if(z=l[B+2]+(q&p[o]),q>>=o,r-=o,v-=y,u>=z)A=u-z,u-A>0&&2>u-A?(g.window[u++]=g.window[A++],g.window[u++]=g.window[A++],y-=2):(g.window.set(g.window.subarray(A,A+2),u),u+=2,A+=2,y-=2);else{A=u-z;do A+=g.end;while(0>A);if(o=g.end-A,y>o){if(y-=o,u-A>0&&o>u-A){do g.window[u++]=g.window[A++];while(0!==--o)}else g.window.set(g.window.subarray(A,A+o),u),u+=o,A+=o,o=0;A=0}}if(u-A>0&&y>u-A){do g.window[u++]=g.window[A++];while(0!==--y)}else g.window.set(g.window.subarray(A,A+y),u),u+=y,A+=y,y=0;break}if(0!==(64&o))return h.msg="invalid distance code",y=h.avail_in-t,y=y>r>>3?r>>3:y,t+=y,s-=y,r-=y<<3,g.bitb=q,g.bitk=r,h.avail_in=t,h.total_in+=s-h.next_in_index,h.next_in_index=s,g.write=u,m;k+=l[B+2],k+=q&p[o],B=3*(n+k),o=l[B]}break}if(0!==(64&o))return 0!==(32&o)?(y=h.avail_in-t,y=y>r>>3?r>>3:y,t+=y,s-=y,r-=y<<3,g.bitb=q,g.bitk=r,h.avail_in=t,h.total_in+=s-h.next_in_index,h.next_in_index=s,g.write=u,j):(h.msg="invalid literal/length code",y=h.avail_in-t,y=y>r>>3?r>>3:y,t+=y,s-=y,r-=y<<3,g.bitb=q,g.bitk=r,h.avail_in=t,h.total_in+=s-h.next_in_index,h.next_in_index=s,g.write=u,m);if(k+=l[B+2],k+=q&p[o],B=3*(n+k),0===(o=l[B])){q>>=l[B+1],r-=l[B+1],g.window[u++]=l[B+2],v--;break}}else q>>=l[B+1],r-=l[B+1],g.window[u++]=l[B+2],v--}while(v>=258&&t>=10);return y=h.avail_in-t,y=y>r>>3?r>>3:y,t+=y,s-=y,r-=y<<3,g.bitb=q,g.bitk=r,h.avail_in=t,h.total_in+=s-h.next_in_index,h.next_in_index=s,g.write=u,i}var b,c,d,e,f=this,g=0,h=0,k=0,n=0,o=0,q=0,r=0,s=0,t=0,u=0;f.init=function(a,f,g,h,i,j){b=C,r=a,s=f,d=g,t=h,e=i,u=j,c=null},f.proc=function(f,v,w){var x,y,z,A,B,M,N,O=0,P=0,Q=0;for(Q=v.next_in_index,A=v.avail_in,O=f.bitb,P=f.bitk,B=f.write,M=B<f.read?f.read-B-1:f.end-B;;)switch(b){case C:if(M>=258&&A>=10&&(f.bitb=O,f.bitk=P,v.avail_in=A,v.total_in+=Q-v.next_in_index,v.next_in_index=Q,f.write=B,w=a(r,s,d,t,e,u,f,v),Q=v.next_in_index,A=v.avail_in,O=f.bitb,P=f.bitk,B=f.write,M=B<f.read?f.read-B-1:f.end-B,w!=i)){b=w==j?J:L;break}k=r,c=d,h=t,b=D;case D:for(x=k;x>P;){if(0===A)return f.bitb=O,f.bitk=P,v.avail_in=A,v.total_in+=Q-v.next_in_index,v.next_in_index=Q,f.write=B,f.inflate_flush(v,w);w=i,A--,O|=(255&v.read_byte(Q++))<<P,P+=8}if(y=3*(h+(O&p[x])),O>>>=c[y+1],P-=c[y+1],z=c[y],0===z){n=c[y+2],b=I;break}if(0!==(16&z)){o=15&z,g=c[y+2],b=E;break}if(0===(64&z)){k=z,h=y/3+c[y+2];break}if(0!==(32&z)){b=J;break}return b=L,v.msg="invalid literal/length code",w=m,f.bitb=O,f.bitk=P,v.avail_in=A,v.total_in+=Q-v.next_in_index,v.next_in_index=Q,f.write=B,f.inflate_flush(v,w);case E:for(x=o;x>P;){if(0===A)return f.bitb=O,f.bitk=P,v.avail_in=A,v.total_in+=Q-v.next_in_index,v.next_in_index=Q,f.write=B,f.inflate_flush(v,w);w=i,A--,O|=(255&v.read_byte(Q++))<<P,P+=8}g+=O&p[x],O>>=x,P-=x,k=s,c=e,h=u,b=F;case F:for(x=k;x>P;){if(0===A)return f.bitb=O,f.bitk=P,v.avail_in=A,v.total_in+=Q-v.next_in_index,v.next_in_index=Q,f.write=B,f.inflate_flush(v,w);w=i,A--,O|=(255&v.read_byte(Q++))<<P,P+=8}if(y=3*(h+(O&p[x])),O>>=c[y+1],P-=c[y+1],z=c[y],0!==(16&z)){o=15&z,q=c[y+2],b=G;break}if(0===(64&z)){k=z,h=y/3+c[y+2];break}return b=L,v.msg="invalid distance code",w=m,f.bitb=O,f.bitk=P,v.avail_in=A,v.total_in+=Q-v.next_in_index,v.next_in_index=Q,f.write=B,f.inflate_flush(v,w);case G:for(x=o;x>P;){if(0===A)return f.bitb=O,f.bitk=P,v.avail_in=A,v.total_in+=Q-v.next_in_index,v.next_in_index=Q,f.write=B,f.inflate_flush(v,w);w=i,A--,O|=(255&v.read_byte(Q++))<<P,P+=8}q+=O&p[x],O>>=x,P-=x,b=H;case H:for(N=B-q;0>N;)N+=f.end;for(;0!==g;){if(0===M&&(B==f.end&&0!==f.read&&(B=0,M=B<f.read?f.read-B-1:f.end-B),0===M&&(f.write=B,w=f.inflate_flush(v,w),B=f.write,M=B<f.read?f.read-B-1:f.end-B,B==f.end&&0!==f.read&&(B=0,M=B<f.read?f.read-B-1:f.end-B),0===M)))return f.bitb=O,f.bitk=P,v.avail_in=A,v.total_in+=Q-v.next_in_index,v.next_in_index=Q,f.write=B,f.inflate_flush(v,w);f.window[B++]=f.window[N++],M--,N==f.end&&(N=0),g--}b=C;break;case I:if(0===M&&(B==f.end&&0!==f.read&&(B=0,M=B<f.read?f.read-B-1:f.end-B),0===M&&(f.write=B,w=f.inflate_flush(v,w),B=f.write,M=B<f.read?f.read-B-1:f.end-B,B==f.end&&0!==f.read&&(B=0,M=B<f.read?f.read-B-1:f.end-B),0===M)))return f.bitb=O,f.bitk=P,v.avail_in=A,v.total_in+=Q-v.next_in_index,v.next_in_index=Q,f.write=B,f.inflate_flush(v,w);w=i,f.window[B++]=n,M--,b=C;break;case J:if(P>7&&(P-=8,A++,Q--),f.write=B,w=f.inflate_flush(v,w),B=f.write,M=B<f.read?f.read-B-1:f.end-B,f.read!=f.write)return f.bitb=O,f.bitk=P,v.avail_in=A,v.total_in+=Q-v.next_in_index,v.next_in_index=Q,f.write=B,f.inflate_flush(v,w);b=K;case K:return w=j,f.bitb=O,f.bitk=P,v.avail_in=A,v.total_in+=Q-v.next_in_index,v.next_in_index=Q,f.write=B,f.inflate_flush(v,w);case L:return w=m,f.bitb=O,f.bitk=P,v.avail_in=A,v.total_in+=Q-v.next_in_index,v.next_in_index=Q,f.write=B,f.inflate_flush(v,w);default:return w=l,f.bitb=O,f.bitk=P,v.avail_in=A,v.total_in+=Q-v.next_in_index,v.next_in_index=Q,f.write=B,f.inflate_flush(v,w)}},f.free=function(){}}function d(a,d){var e,f=this,g=N,h=0,k=0,n=0,r=[0],s=[0],t=new c,u=0,v=new Int32Array(3*q),w=0,x=new b;f.bitk=0,f.bitb=0,f.window=new Uint8Array(d),f.end=d,f.read=0,f.write=0,f.reset=function(a,b){b&&(b[0]=w),g==T&&t.free(a),g=N,f.bitk=0,f.bitb=0,f.read=f.write=0},f.reset(a,null),f.inflate_flush=function(a,b){var c,d,e;return d=a.next_out_index,e=f.read,c=(e<=f.write?f.write:f.end)-e,c>a.avail_out&&(c=a.avail_out),0!==c&&b==o&&(b=i),a.avail_out-=c,a.total_out+=c,a.next_out.set(f.window.subarray(e,e+c),d),d+=c,e+=c,e==f.end&&(e=0,f.write==f.end&&(f.write=0),c=f.write-e,c>a.avail_out&&(c=a.avail_out),0!==c&&b==o&&(b=i),a.avail_out-=c,a.total_out+=c,a.next_out.set(f.window.subarray(e,e+c),d),d+=c,e+=c),a.next_out_index=d,f.read=e,b},f.proc=function(a,c){var d,o,q,w,y,z,A,B;for(w=a.next_in_index,y=a.avail_in,o=f.bitb,q=f.bitk,z=f.write,A=z<f.read?f.read-z-1:f.end-z;;)switch(g){case N:for(;3>q;){if(0===y)return f.bitb=o,f.bitk=q,a.avail_in=y,a.total_in+=w-a.next_in_index,a.next_in_index=w,f.write=z,f.inflate_flush(a,c);c=i,y--,o|=(255&a.read_byte(w++))<<q,q+=8}switch(d=7&o,u=1&d,d>>>1){case 0:o>>>=3,q-=3,d=7&q,o>>>=d,q-=d,g=O;break;case 1:var C=[],D=[],E=[[]],F=[[]];b.inflate_trees_fixed(C,D,E,F),t.init(C[0],D[0],E[0],0,F[0],0),o>>>=3,q-=3,g=T;break;case 2:o>>>=3,q-=3,g=Q;break;case 3:return o>>>=3,q-=3,g=W,a.msg="invalid block type",c=m,f.bitb=o,f.bitk=q,a.avail_in=y,a.total_in+=w-a.next_in_index,a.next_in_index=w,f.write=z,f.inflate_flush(a,c)}break;case O:for(;32>q;){if(0===y)return f.bitb=o,f.bitk=q,a.avail_in=y,a.total_in+=w-a.next_in_index,a.next_in_index=w,f.write=z,f.inflate_flush(a,c);c=i,y--,o|=(255&a.read_byte(w++))<<q,q+=8}if((~o>>>16&65535)!=(65535&o))return g=W,a.msg="invalid stored block lengths",c=m,f.bitb=o,f.bitk=q,a.avail_in=y,a.total_in+=w-a.next_in_index,a.next_in_index=w,f.write=z,f.inflate_flush(a,c);h=65535&o,o=q=0,g=0!==h?P:0!==u?U:N;break;case P:if(0===y)return f.bitb=o,f.bitk=q,a.avail_in=y,a.total_in+=w-a.next_in_index,a.next_in_index=w,f.write=z,f.inflate_flush(a,c);if(0===A&&(z==f.end&&0!==f.read&&(z=0,A=z<f.read?f.read-z-1:f.end-z),0===A&&(f.write=z,c=f.inflate_flush(a,c),z=f.write,A=z<f.read?f.read-z-1:f.end-z,z==f.end&&0!==f.read&&(z=0,A=z<f.read?f.read-z-1:f.end-z),0===A)))return f.bitb=o,f.bitk=q,a.avail_in=y,a.total_in+=w-a.next_in_index,a.next_in_index=w,f.write=z,f.inflate_flush(a,c);if(c=i,d=h,d>y&&(d=y),d>A&&(d=A),f.window.set(a.read_buf(w,d),z),w+=d,y-=d,z+=d,A-=d,0!==(h-=d))break;g=0!==u?U:N;break;case Q:for(;14>q;){if(0===y)return f.bitb=o,f.bitk=q,a.avail_in=y,a.total_in+=w-a.next_in_index,a.next_in_index=w,f.write=z,f.inflate_flush(a,c);c=i,y--,o|=(255&a.read_byte(w++))<<q,q+=8}if(k=d=16383&o,(31&d)>29||(d>>5&31)>29)return g=W,a.msg="too many length or distance symbols",c=m,f.bitb=o,f.bitk=q,a.avail_in=y,a.total_in+=w-a.next_in_index,a.next_in_index=w,f.write=z,f.inflate_flush(a,c);if(d=258+(31&d)+(d>>5&31),!e||e.length<d)e=[];else for(B=0;d>B;B++)e[B]=0;o>>>=14,q-=14,n=0,g=R;case R:for(;4+(k>>>10)>n;){for(;3>q;){if(0===y)return f.bitb=o,f.bitk=q,a.avail_in=y,a.total_in+=w-a.next_in_index,a.next_in_index=w,f.write=z,f.inflate_flush(a,c);c=i,y--,o|=(255&a.read_byte(w++))<<q,q+=8}e[M[n++]]=7&o,o>>>=3,q-=3}for(;19>n;)e[M[n++]]=0;if(r[0]=7,d=x.inflate_trees_bits(e,r,s,v,a),d!=i)return c=d,c==m&&(e=null,g=W),f.bitb=o,f.bitk=q,a.avail_in=y,a.total_in+=w-a.next_in_index,a.next_in_index=w,f.write=z,f.inflate_flush(a,c);n=0,g=S;case S:for(;;){if(d=k,!(258+(31&d)+(d>>5&31)>n))break;var G,H;for(d=r[0];d>q;){if(0===y)return f.bitb=o,f.bitk=q,a.avail_in=y,a.total_in+=w-a.next_in_index,a.next_in_index=w,f.write=z,f.inflate_flush(a,c);c=i,y--,o|=(255&a.read_byte(w++))<<q,q+=8}if(d=v[3*(s[0]+(o&p[d]))+1],H=v[3*(s[0]+(o&p[d]))+2],16>H)o>>>=d,q-=d,e[n++]=H;else{for(B=18==H?7:H-14,G=18==H?11:3;d+B>q;){if(0===y)return f.bitb=o,f.bitk=q,a.avail_in=y,a.total_in+=w-a.next_in_index,a.next_in_index=w,f.write=z,f.inflate_flush(a,c);c=i,y--,o|=(255&a.read_byte(w++))<<q,q+=8}if(o>>>=d,q-=d,G+=o&p[B],o>>>=B,q-=B,B=n,d=k,B+G>258+(31&d)+(d>>5&31)||16==H&&1>B)return e=null,g=W,a.msg="invalid bit length repeat",c=m,f.bitb=o,f.bitk=q,a.avail_in=y,a.total_in+=w-a.next_in_index,a.next_in_index=w,f.write=z,f.inflate_flush(a,c);H=16==H?e[B-1]:0;do e[B++]=H;while(0!==--G);n=B}}s[0]=-1;var I=[],J=[],K=[],L=[];if(I[0]=9,J[0]=6,d=k,d=x.inflate_trees_dynamic(257+(31&d),1+(d>>5&31),e,I,J,K,L,v,a),d!=i)return d==m&&(e=null,g=W),c=d,f.bitb=o,f.bitk=q,a.avail_in=y,a.total_in+=w-a.next_in_index,a.next_in_index=w,f.write=z,f.inflate_flush(a,c);t.init(I[0],J[0],v,K[0],v,L[0]),g=T;case T:if(f.bitb=o,f.bitk=q,a.avail_in=y,a.total_in+=w-a.next_in_index,a.next_in_index=w,f.write=z,(c=t.proc(f,a,c))!=j)return f.inflate_flush(a,c);if(c=i,t.free(a),w=a.next_in_index,y=a.avail_in,o=f.bitb,q=f.bitk,z=f.write,A=z<f.read?f.read-z-1:f.end-z,0===u){g=N;break}g=U;case U:if(f.write=z,c=f.inflate_flush(a,c),z=f.write,A=z<f.read?f.read-z-1:f.end-z,f.read!=f.write)return f.bitb=o,f.bitk=q,a.avail_in=y,a.total_in+=w-a.next_in_index,a.next_in_index=w,f.write=z,f.inflate_flush(a,c);g=V;case V:return c=j,f.bitb=o,f.bitk=q,a.avail_in=y,a.total_in+=w-a.next_in_index,a.next_in_index=w,f.write=z,f.inflate_flush(a,c);case W:return c=m,f.bitb=o,f.bitk=q,a.avail_in=y,a.total_in+=w-a.next_in_index,a.next_in_index=w,f.write=z,f.inflate_flush(a,c);default:return c=l,f.bitb=o,f.bitk=q,a.avail_in=y,a.total_in+=w-a.next_in_index,a.next_in_index=w,f.write=z,f.inflate_flush(a,c)}},f.free=function(a){f.reset(a,null),f.window=null,v=null},f.set_dictionary=function(a,b,c){f.window.set(a.subarray(b,b+c),0),f.read=f.write=c},f.sync_point=function(){return g==O?1:0}}function e(){function a(a){return a&&a.istate?(a.total_in=a.total_out=0,a.msg=null,a.istate.mode=eb,a.istate.blocks.reset(a,null),i):l}var b=this;b.mode=0,b.method=0,b.was=[0],b.need=0,b.marker=0,b.wbits=0,b.inflateEnd=function(a){return b.blocks&&b.blocks.free(a),b.blocks=null,i},b.inflateInit=function(c,e){return c.msg=null,b.blocks=null,8>e||e>15?(b.inflateEnd(c),l):(b.wbits=e,c.istate.blocks=new d(c,1<<e),a(c),i)},b.inflate=function(a,b){var c,d;if(!a||!a.istate||!a.next_in)return l;for(b=b==s?o:i,c=o;;)switch(a.istate.mode){case Z:if(0===a.avail_in)return c;if(c=b,a.avail_in--,a.total_in++,(15&(a.istate.method=a.read_byte(a.next_in_index++)))!=Y){a.istate.mode=gb,a.msg="unknown compression method",a.istate.marker=5;
break}if((a.istate.method>>4)+8>a.istate.wbits){a.istate.mode=gb,a.msg="invalid window size",a.istate.marker=5;break}a.istate.mode=$;case $:if(0===a.avail_in)return c;if(c=b,a.avail_in--,a.total_in++,d=255&a.read_byte(a.next_in_index++),((a.istate.method<<8)+d)%31!==0){a.istate.mode=gb,a.msg="incorrect header check",a.istate.marker=5;break}if(0===(d&X)){a.istate.mode=eb;break}a.istate.mode=_;case _:if(0===a.avail_in)return c;c=b,a.avail_in--,a.total_in++,a.istate.need=(255&a.read_byte(a.next_in_index++))<<24&4278190080,a.istate.mode=ab;case ab:if(0===a.avail_in)return c;c=b,a.avail_in--,a.total_in++,a.istate.need+=(255&a.read_byte(a.next_in_index++))<<16&16711680,a.istate.mode=bb;case bb:if(0===a.avail_in)return c;c=b,a.avail_in--,a.total_in++,a.istate.need+=(255&a.read_byte(a.next_in_index++))<<8&65280,a.istate.mode=cb;case cb:return 0===a.avail_in?c:(c=b,a.avail_in--,a.total_in++,a.istate.need+=255&a.read_byte(a.next_in_index++),a.istate.mode=db,k);case db:return a.istate.mode=gb,a.msg="need dictionary",a.istate.marker=0,l;case eb:if(c=a.istate.blocks.proc(a,c),c==m){a.istate.mode=gb,a.istate.marker=0;break}if(c==i&&(c=b),c!=j)return c;c=b,a.istate.blocks.reset(a,a.istate.was),a.istate.mode=fb;case fb:return j;case gb:return m;default:return l}},b.inflateSetDictionary=function(a,b,c){var d=0,e=c;return a&&a.istate&&a.istate.mode==db?(e>=1<<a.istate.wbits&&(e=(1<<a.istate.wbits)-1,d=c-e),a.istate.blocks.set_dictionary(b,d,e),a.istate.mode=eb,i):l},b.inflateSync=function(b){var c,d,e,f,g;if(!b||!b.istate)return l;if(b.istate.mode!=gb&&(b.istate.mode=gb,b.istate.marker=0),0===(c=b.avail_in))return o;for(d=b.next_in_index,e=b.istate.marker;0!==c&&4>e;)b.read_byte(d)==hb[e]?e++:e=0!==b.read_byte(d)?0:4-e,d++,c--;return b.total_in+=d-b.next_in_index,b.next_in_index=d,b.avail_in=c,b.istate.marker=e,4!=e?m:(f=b.total_in,g=b.total_out,a(b),b.total_in=f,b.total_out=g,b.istate.mode=eb,i)},b.inflateSyncPoint=function(a){return a&&a.istate&&a.istate.blocks?a.istate.blocks.sync_point():l}}function f(){}function g(){var a=this,b=new f,c=512,d=r,e=new Uint8Array(c),g=!1;b.inflateInit(),b.next_out=e,a.append=function(a,f){var h,k,l=[],m=0,n=0,p=0;if(0!==a.length){b.next_in_index=0,b.next_in=a,b.avail_in=a.length;do{if(b.next_out_index=0,b.avail_out=c,0!==b.avail_in||g||(b.next_in_index=0,g=!0),h=b.inflate(d),g&&h==o)return-1;if(h!=i&&h!=j)throw"inflating: "+b.msg;if((g||h==j)&&b.avail_in==a.length)return-1;b.next_out_index&&l.push(b.next_out_index==c?new Uint8Array(e):new Uint8Array(e.subarray(0,b.next_out_index))),p+=b.next_out_index,f&&b.next_in_index>0&&b.next_in_index!=m&&(f(b.next_in_index),m=b.next_in_index)}while(b.avail_in>0||0===b.avail_out);return k=new Uint8Array(p),l.forEach(function(a){k.set(a,n),n+=a.length}),k}},a.flush=function(){b.inflateEnd()}}var h=15,i=0,j=1,k=2,l=-2,m=-3,n=-4,o=-5,p=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],q=1440,r=0,s=4,t=9,u=5,v=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],w=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],x=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],z=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=15;b.inflate_trees_fixed=function(a,b,c,d){return a[0]=t,b[0]=u,c[0]=v,d[0]=w,i};var C=0,D=1,E=2,F=3,G=4,H=5,I=6,J=7,K=8,L=9,M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],N=0,O=1,P=2,Q=3,R=4,S=5,T=6,U=7,V=8,W=9,X=32,Y=8,Z=0,$=1,_=2,ab=3,bb=4,cb=5,db=6,eb=7,fb=12,gb=13,hb=[0,0,255,255];f.prototype={inflateInit:function(a){var b=this;return b.istate=new e,a||(a=h),b.istate.inflateInit(b,a)},inflate:function(a){var b=this;return b.istate?b.istate.inflate(b,a):l},inflateEnd:function(){var a=this;if(!a.istate)return l;var b=a.istate.inflateEnd(a);return a.istate=null,b},inflateSync:function(){var a=this;return a.istate?a.istate.inflateSync(a):l},inflateSetDictionary:function(a,b){var c=this;return c.istate?c.istate.inflateSetDictionary(c,a,b):l},read_byte:function(a){var b=this;return b.next_in.subarray(a,a+1)[0]},read_buf:function(a,b){var c=this;return c.next_in.subarray(a,a+b)}};var ib;a.zip?a.zip.Inflater=g:(ib=new g,a.addEventListener("message",function(b){var c=b.data;c.append&&a.postMessage({onappend:!0,data:ib.append(c.data,function(b){a.postMessage({progress:!0,current:b})})}),c.flush&&(ib.flush(),a.postMessage({onflush:!0}))},!1))}(this),function(){function a(a){function b(b){this.size=a.uncompressedSize,b()}function c(b){f.data?b():a.getData(new r,function(a){f.data=a,e=new v(a),b()},null,f.checkCrc32)}function d(a,b,d,f){c(function(){e.readUint8Array(a,b,d,f)},f)}var e,f=this;f.size=0,f.init=b,f.readUint8Array=d}function b(a){function b(a){c+=a.uncompressedSize||0,a.children.forEach(b)}var c=0;return b(a),c}function c(a,b,d){function e(){g++,g<a.children.length?f(a.children[g]):b()}function f(a){a.directory?c(a,e,d):(a.reader=new a.Reader(a.data,d),a.reader.init(function(){a.uncompressedSize=a.reader.size,e()}))}var g=0;a.children.length?f(a.children[g]):b()}function d(a){var b=a.parent.children;b.forEach(function(c,d){c.id==a.id&&b.splice(d,1)})}function e(a,b,c,d,e){function f(a,b,c,d,e){function h(){var j=b.children[i];j?a.add(j.getFullname(),j.reader,function(){g+=j.uncompressedSize||0,f(a,j,function(){i++,h()},d,e)},function(a){d&&d(g+a,e)},{directory:j.directory,version:j.zipVersion}):c()}var i=0;h()}var g=0;f(a,b,c,d,e)}function f(a,b,c,d){function e(a,b){a.isDirectory&&a.createReader().readEntries(b),a.isFile&&b([])}function f(a,b,c){e(b,function(b){function e(b){function c(a){f(a,b,function(){h++,g()})}b.isDirectory&&c(a.addDirectory(b.name)),b.isFile&&b.file(function(d){var e=a.addBlob(b.name,d);e.uncompressedSize=d.size,c(e)},d)}function g(){var a=b[h];a?e(a):c()}var h=0;g()})}b.isDirectory?f(a,b,c):b.file(function(d){a.addBlob(b.name,d),c()},d)}function g(a,b,c,d,e,f,g){function h(a,b,c,d,e,f){function j(b){function c(a){i+=b.uncompressedSize||0,h(a,b,function(){l++,k()},d,e,f)}b.directory?a.getDirectory(b.name,{create:!0},c,e):a.getFile(b.name,{create:!0},function(a){b.getData(new zip.FileWriter(a,zip.getMimeType(b.name)),c,function(a){d&&d(i+a,f)},g)},e)}function k(){var a=b.children[l];a?j(a):c()}var l=0;k()}var i=0;b.directory?h(a,b,c,d,e,f):b.getData(new zip.FileWriter(a,zip.getMimeType(b.name)),c,d,g)}function h(a){a.entries=[],a.root=new n(a)}function i(a,b,c,d,e){function f(){var h=g*p;d&&d(h,a.size),h<a.size?a.readUint8Array(h,Math.min(p,a.size-h),function(a){b.writeUint8Array(new Uint8Array(a),function(){g++,f()})},e):b.getData(c)}var g=0;f()}function j(a,b,c,d){var e=this;!a||a.constructor==e.Writer&&e.data?b(e.data):(e.reader||(e.reader=new e.Reader(e.data,d)),e.reader.init(function(){a.init(function(){i(e.reader,a,b,c,d)},d)}))}function k(a,b,c,d){if(a.directory)return d?new n(a.fs,b,c,a):new m(a.fs,b,c,a);throw"Parent entry is not a directory."}function l(){}function m(a,b,c,d){var e=this;l.prototype.init.call(e,a,b,c,d),e.Reader=c.Reader,e.Writer=c.Writer,e.data=c.data,e.getData=c.getData||j}function n(a,b,c,d){var e=this;l.prototype.init.call(e,a,b,c,d),e.directory=!0}function o(){h(this)}var p=524288,q=zip.TextWriter,r=zip.BlobWriter,s=zip.Data64URIWriter,t=zip.Reader,u=zip.TextReader,v=zip.BlobReader,w=zip.Data64URIReader,x=zip.createReader,y=zip.createWriter;a.prototype=new t,a.prototype.constructor=a,a.prototype.checkCrc32=!1,l.prototype={init:function(a,b,c,d){var e=this;if(a.root&&d&&d.getChildByName(b))throw"Entry filename already exists.";c||(c={}),e.fs=a,e.name=b,e.id=a.entries.length,e.parent=d,e.children=[],e.zipVersion=c.zipVersion||20,e.uncompressedSize=0,a.entries.push(e),d&&e.parent.children.push(e)},getFileEntry:function(a,d,e,f,h){var i=this;c(i,function(){g(a,i,d,e,f,b(i),h)},f)},moveTo:function(a){var b=this;if(!a.directory)throw"Target entry is not a directory.";if(a.isDescendantOf(b))throw"Entry is a ancestor of target entry.";if(b!=a){if(a.getChildByName(b.name))throw"Entry filename already exists.";d(b),b.parent=a,a.children.push(b)}},getFullname:function(){for(var a=this,b=a.name,c=a.parent;c;)b=(c.name?c.name+"/":"")+b,c=c.parent;return b},isDescendantOf:function(a){for(var b=this.parent;b&&b.id!=a.id;)b=b.parent;return!!b}},l.prototype.constructor=l;var z;m.prototype=z=new l,z.constructor=m,z.getText=function(a,b,c,d){this.getData(new q(d),a,b,c)},z.getBlob=function(a,b,c,d){this.getData(new r(a),b,c,d)},z.getData64URI=function(a,b,c,d){this.getData(new s(a),b,c,d)};var A;n.prototype=A=new l,A.constructor=n,A.addDirectory=function(a){return k(this,a,null,!0)},A.addText=function(a,b){return k(this,a,{data:b,Reader:u,Writer:q})},A.addBlob=function(a,b){return k(this,a,{data:b,Reader:v,Writer:r})},A.addData64URI=function(a,b){return k(this,a,{data:b,Reader:w,Writer:s})},A.addFileEntry=function(a,b,c){f(this,a,b,c)},A.addData=function(a,b){return k(this,a,b)},A.importBlob=function(a,b,c){this.importZip(new v(a),b,c)},A.importText=function(a,b,c){this.importZip(new u(a),b,c)},A.importData64URI=function(a,b,c){this.importZip(new w(a),b,c)},A.exportBlob=function(a,b,c){this.exportZip(new r("application/zip"),a,b,c)},A.exportText=function(a,b,c){this.exportZip(new q,a,b,c)},A.exportFileEntry=function(a,b,c,d){this.exportZip(new zip.FileWriter(a,"application/zip"),b,c,d)},A.exportData64URI=function(a,b,c){this.exportZip(new s("application/zip"),a,b,c)},A.importZip=function(b,c,d){var e=this;x(b,function(b){b.getEntries(function(b){b.forEach(function(b){var c=e,d=b.filename.split("/"),f=d.pop();d.forEach(function(a){c=c.getChildByName(a)||new n(e.fs,a,null,c)}),b.directory||k(c,f,{data:b,Reader:a})}),c()})},d)},A.exportZip=function(a,d,f,g){var h=this;c(h,function(){y(a,function(a){e(a,h,function(){a.close(d)},f,b(h))},g)},g)},A.getChildByName=function(a){var b,c,d=this;for(b=0;b<d.children.length;b++)if(c=d.children[b],c.name==a)return c},o.prototype={remove:function(a){d(a),this.entries[a.id]=null},find:function(a){var b,c=a.split("/"),d=this.root;for(b=0;d&&b<c.length;b++)d=d.getChildByName(c[b]);return d},getById:function(a){return this.entries[a]},importBlob:function(a,b,c){h(this),this.root.importBlob(a,b,c)},importText:function(a,b,c){h(this),this.root.importText(a,b,c)},importData64URI:function(a,b,c){h(this),this.root.importData64URI(a,b,c)},exportBlob:function(a,b,c){this.root.exportBlob(a,b,c)},exportText:function(a,b,c){this.root.exportText(a,b,c)},exportFileEntry:function(a,b,c,d){this.root.exportFileEntry(a,b,c,d)},exportData64URI:function(a,b,c){this.root.exportData64URI(a,b,c)}},zip.fs={FS:o,ZipDirectoryEntry:n,ZipFileEntry:m},zip.getMimeType=function(){return"application/octet-stream"}}(),function(){function a(a){function b(b,c){var d;e.data?b():(d=new XMLHttpRequest,d.addEventListener("load",function(){e.size||(e.size=Number(d.getResponseHeader("Content-Length"))),e.data=new Uint8Array(d.response),b()},!1),d.addEventListener("error",c,!1),d.open("GET",a),d.responseType="arraybuffer",d.send())}function c(b,c){var d=new XMLHttpRequest;d.addEventListener("load",function(){e.size=Number(d.getResponseHeader("Content-Length")),b()},!1),d.addEventListener("error",c,!1),d.open("HEAD",a),d.send()}function d(a,c,d,f){b(function(){d(new Uint8Array(e.data.subarray(a,a+c)))},f)}var e=this;e.size=0,e.init=c,e.readUint8Array=d}function b(a){function b(b,c){var d=new XMLHttpRequest;d.addEventListener("load",function(){e.size=Number(d.getResponseHeader("Content-Length")),"bytes"==d.getResponseHeader("Accept-Ranges")?b():c(h)},!1),d.addEventListener("error",c,!1),d.open("HEAD",a),d.send()}function c(b,c,d,e){var f=new XMLHttpRequest;f.open("GET",a),f.responseType="arraybuffer",f.setRequestHeader("Range","bytes="+b+"-"+(b+c-1)),f.addEventListener("load",function(){d(f.response)},!1),f.addEventListener("error",e,!1),f.send()}function d(a,b,d,e){c(a,b,function(a){d(new Uint8Array(a))},e)}var e=this;e.size=0,e.init=b,e.readUint8Array=d}function c(a){function b(b){d.size=a.byteLength,b()}function c(b,c,d){d(new Uint8Array(a.slice(b,b+c)))}var d=this;d.size=0,d.init=b,d.readUint8Array=c}function d(){function a(a){d=new Uint8Array,a()}function b(a,b){var c=new Uint8Array(d.length+a.length);c.set(d),c.set(a,d.length),d=c,b()}function c(a){a(d.buffer)}var d,e=this;e.init=a,e.writeUint8Array=b,e.getData=c}function e(a,b){function c(b,c){a.createWriter(function(a){f=a,b()},c)}function d(a,c,d){var e=new Blob([g?a:a.buffer],{type:b});f.onwrite=function(){f.onwrite=null,c()},f.onerror=d,f.write(e)}function e(b){a.file(b)}var f,h=this;h.init=c,h.writeUint8Array=d,h.getData=e}var f,g,h="HTTP Range not supported.",i=zip.Reader,j=zip.Writer;try{g=0===new Blob([new DataView(new ArrayBuffer(0))]).size}catch(k){}a.prototype=new i,a.prototype.constructor=a,b.prototype=new i,b.prototype.constructor=b,c.prototype=new i,c.prototype.constructor=c,d.prototype=new j,d.prototype.constructor=d,e.prototype=new j,e.prototype.constructor=e,zip.FileWriter=e,zip.HttpReader=a,zip.HttpRangeReader=b,zip.ArrayBufferReader=c,zip.ArrayBufferWriter=d,zip.fs&&(f=zip.fs.ZipDirectoryEntry,f.prototype.addHttpContent=function(c,d,e){function g(a,b,c,d){if(a.directory)return d?new f(a.fs,b,c,a):new zip.fs.ZipFileEntry(a.fs,b,c,a);throw"Parent entry is not a directory."}return g(this,c,{data:d,Reader:e?b:a})},f.prototype.importHttpContent=function(c,d,e,f){this.importZip(d?new b(c):new a(c),e,f)},zip.fs.FS.prototype.importHttpContent=function(a,b,c,d){this.entries=[],this.root=new f(this),this.root.importHttpContent(a,b,c,d)})}(),function(a,b,c,d){"use strict";var e=c("html"),f=c(a),g=c(b),h=c.fancybox=function(){h.open.apply(this,arguments)},i=navigator.userAgent.match(/msie/i),j=null,k=b.createTouch!==d,l=function(a){return a&&a.hasOwnProperty&&a instanceof c},m=function(a){return a&&"string"===c.type(a)},n=function(a){return m(a)&&a.indexOf("%")>0},o=function(a){return a&&!(a.style.overflow&&"hidden"===a.style.overflow)&&(a.clientWidth&&a.scrollWidth>a.clientWidth||a.clientHeight&&a.scrollHeight>a.clientHeight)},p=function(a,b){var c=parseInt(a,10)||0;return b&&n(a)&&(c=h.getViewport()[b]/100*c),Math.ceil(c)},q=function(a,b){return p(a,b)+"px"};c.extend(h,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!k,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(i?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:c.noop,beforeLoad:c.noop,afterLoad:c.noop,beforeShow:c.noop,afterShow:c.noop,beforeChange:c.noop,beforeClose:c.noop,afterClose:c.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(a,b){return a&&(c.isPlainObject(b)||(b={}),!1!==h.close(!0))?(c.isArray(a)||(a=l(a)?c(a).get():[a]),c.each(a,function(e,f){var g,i,j,k,n,o,p,q={};"object"===c.type(f)&&(f.nodeType&&(f=c(f)),l(f)?(q={href:f.data("fancybox-href")||f.attr("href"),title:f.data("fancybox-title")||f.attr("title"),isDom:!0,element:f},c.metadata&&c.extend(!0,q,f.metadata())):q=f),g=b.href||q.href||(m(f)?f:null),i=b.title!==d?b.title:q.title||"",j=b.content||q.content,k=j?"html":b.type||q.type,!k&&q.isDom&&(k=f.data("fancybox-type"),k||(n=f.prop("class").match(/fancybox\.(\w+)/),k=n?n[1]:null)),m(g)&&(k||(h.isImage(g)?k="image":h.isSWF(g)?k="swf":"#"===g.charAt(0)?k="inline":m(f)&&(k="html",j=f)),"ajax"===k&&(o=g.split(/\s+/,2),g=o.shift(),p=o.shift())),j||("inline"===k?g?j=c(m(g)?g.replace(/.*(?=#[^\s]+$)/,""):g):q.isDom&&(j=f):"html"===k?j=g:k||g||!q.isDom||(k="inline",j=f)),c.extend(q,{href:g,type:k,content:j,title:i,selector:p}),a[e]=q}),h.opts=c.extend(!0,{},h.defaults,b),b.keys!==d&&(h.opts.keys=b.keys?c.extend({},h.defaults.keys,b.keys):!1),h.group=a,h._start(h.opts.index)):void 0},cancel:function(){var a=h.coming;a&&!1!==h.trigger("onCancel")&&(h.hideLoading(),h.ajaxLoad&&h.ajaxLoad.abort(),h.ajaxLoad=null,h.imgPreload&&(h.imgPreload.onload=h.imgPreload.onerror=null),a.wrap&&a.wrap.stop(!0,!0).trigger("onReset").remove(),h.coming=null,h.current||h._afterZoomOut(a))},close:function(a){h.cancel(),!1!==h.trigger("beforeClose")&&(h.unbindEvents(),h.isActive&&(h.isOpen&&a!==!0?(h.isOpen=h.isOpened=!1,h.isClosing=!0,c(".fancybox-item, .fancybox-nav").remove(),h.wrap.stop(!0,!0).removeClass("fancybox-opened"),h.transitions[h.current.closeMethod]()):(c(".fancybox-wrap").stop(!0).trigger("onReset").remove(),h._afterZoomOut())))},play:function(a){var b=function(){clearTimeout(h.player.timer)},c=function(){b(),h.current&&h.player.isActive&&(h.player.timer=setTimeout(h.next,h.current.playSpeed))},d=function(){b(),g.unbind(".player"),h.player.isActive=!1,h.trigger("onPlayEnd")},e=function(){h.current&&(h.current.loop||h.current.index<h.group.length-1)&&(h.player.isActive=!0,g.bind({"onCancel.player beforeClose.player":d,"onUpdate.player":c,"beforeLoad.player":b}),c(),h.trigger("onPlayStart"))};a===!0||!h.player.isActive&&a!==!1?e():d()},next:function(a){var b=h.current;b&&(m(a)||(a=b.direction.next),h.jumpto(b.index+1,a,"next"))},prev:function(a){var b=h.current;b&&(m(a)||(a=b.direction.prev),h.jumpto(b.index-1,a,"prev"))},jumpto:function(a,b,c){var e=h.current;e&&(a=p(a),h.direction=b||e.direction[a>=e.index?"next":"prev"],h.router=c||"jumpto",e.loop&&(0>a&&(a=e.group.length+a%e.group.length),a%=e.group.length),e.group[a]!==d&&(h.cancel(),h._start(a)))},reposition:function(a,b){var d,e=h.current,f=e?e.wrap:null;f&&(d=h._getPosition(b),a&&"scroll"===a.type?(delete d.position,f.stop(!0,!0).animate(d,200)):(f.css(d),e.pos=c.extend({},e.dim,d)))},update:function(a){var b=a&&a.type,c=!b||"orientationchange"===b;c&&(clearTimeout(j),j=null),h.isOpen&&!j&&(j=setTimeout(function(){var d=h.current;d&&!h.isClosing&&(h.wrap.removeClass("fancybox-tmp"),(c||"load"===b||"resize"===b&&d.autoResize)&&h._setDimension(),"scroll"===b&&d.canShrink||h.reposition(a),h.trigger("onUpdate"),j=null)},c&&!k?0:300))},toggle:function(a){h.isOpen&&(h.current.fitToView="boolean"===c.type(a)?a:!h.current.fitToView,k&&(h.wrap.removeAttr("style").addClass("fancybox-tmp"),h.trigger("onUpdate")),h.update())},hideLoading:function(){g.unbind(".loading"),c("#fancybox-loading").remove()},showLoading:function(){var a,b;h.hideLoading(),a=c('<div id="fancybox-loading"><div></div></div>').click(h.cancel).appendTo("body"),g.bind("keydown.loading",function(a){27===(a.which||a.keyCode)&&(a.preventDefault(),h.cancel())}),h.defaults.fixed||(b=h.getViewport(),a.css({position:"absolute",top:.5*b.h+b.y,left:.5*b.w+b.x}))},getViewport:function(){var b=h.current&&h.current.locked||!1,c={x:f.scrollLeft(),y:f.scrollTop()};return b?(c.w=b[0].clientWidth,c.h=b[0].clientHeight):(c.w=k&&a.innerWidth?a.innerWidth:f.width(),c.h=k&&a.innerHeight?a.innerHeight:f.height()),c},unbindEvents:function(){h.wrap&&l(h.wrap)&&h.wrap.unbind(".fb"),g.unbind(".fb"),f.unbind(".fb")},bindEvents:function(){var a,b=h.current;b&&(f.bind("orientationchange.fb"+(k?"":" resize.fb")+(b.autoCenter&&!b.locked?" scroll.fb":""),h.update),a=b.keys,a&&g.bind("keydown.fb",function(e){var f=e.which||e.keyCode,g=e.target||e.srcElement;return 27===f&&h.coming?!1:void(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||g&&(g.type||c(g).is("[contenteditable]"))||c.each(a,function(a,g){return b.group.length>1&&g[f]!==d?(h[a](g[f]),e.preventDefault(),!1):c.inArray(f,g)>-1?(h[a](),e.preventDefault(),!1):void 0}))}),c.fn.mousewheel&&b.mouseWheel&&h.wrap.bind("mousewheel.fb",function(a,d,e,f){for(var g=a.target||null,i=c(g),j=!1;i.length&&!(j||i.is(".fancybox-skin")||i.is(".fancybox-wrap"));)j=o(i[0]),i=c(i).parent();0===d||j||h.group.length>1&&!b.canShrink&&(f>0||e>0?h.prev(f>0?"down":"left"):(0>f||0>e)&&h.next(0>f?"up":"right"),a.preventDefault())}))},trigger:function(a,b){var d,e=b||h.coming||h.current;if(e){if(c.isFunction(e[a])&&(d=e[a].apply(e,Array.prototype.slice.call(arguments,1))),d===!1)return!1;e.helpers&&c.each(e.helpers,function(b,d){d&&h.helpers[b]&&c.isFunction(h.helpers[b][a])&&h.helpers[b][a](c.extend(!0,{},h.helpers[b].defaults,d),e)}),g.trigger(a)}},isImage:function(a){return m(a)&&a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(a){return m(a)&&a.match(/\.(swf)((\?|#).*)?$/i)},_start:function(a){var b,d,e,f,g,i={};if(a=p(a),b=h.group[a]||null,!b)return!1;if(i=c.extend(!0,{},h.opts,b),f=i.margin,g=i.padding,"number"===c.type(f)&&(i.margin=[f,f,f,f]),"number"===c.type(g)&&(i.padding=[g,g,g,g]),i.modal&&c.extend(!0,i,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),i.autoSize&&(i.autoWidth=i.autoHeight=!0),"auto"===i.width&&(i.autoWidth=!0),"auto"===i.height&&(i.autoHeight=!0),i.group=h.group,i.index=a,h.coming=i,!1===h.trigger("beforeLoad"))return void(h.coming=null);if(e=i.type,d=i.href,!e)return h.coming=null,h.current&&h.router&&"jumpto"!==h.router?(h.current.index=a,h[h.router](h.direction)):!1;if(h.isActive=!0,("image"===e||"swf"===e)&&(i.autoHeight=i.autoWidth=!1,i.scrolling="visible"),"image"===e&&(i.aspectRatio=!0),"iframe"===e&&k&&(i.scrolling="scroll"),i.wrap=c(i.tpl.wrap).addClass("fancybox-"+(k?"mobile":"desktop")+" fancybox-type-"+e+" fancybox-tmp "+i.wrapCSS).appendTo(i.parent||"body"),c.extend(i,{skin:c(".fancybox-skin",i.wrap),outer:c(".fancybox-outer",i.wrap),inner:c(".fancybox-inner",i.wrap)}),c.each(["Top","Right","Bottom","Left"],function(a,b){i.skin.css("padding"+b,q(i.padding[a]))}),h.trigger("onReady"),"inline"===e||"html"===e){if(!i.content||!i.content.length)return h._error("content")}else if(!d)return h._error("href");"image"===e?h._loadImage():"ajax"===e?h._loadAjax():"iframe"===e?h._loadIframe():h._afterLoad()},_error:function(a){c.extend(h.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:a,content:h.coming.tpl.error}),h._afterLoad()},_loadImage:function(){var a=h.imgPreload=new Image;a.onload=function(){this.onload=this.onerror=null,h.coming.width=this.width/h.opts.pixelRatio,h.coming.height=this.height/h.opts.pixelRatio,h._afterLoad()},a.onerror=function(){this.onload=this.onerror=null,h._error("image")},a.src=h.coming.href,a.complete!==!0&&h.showLoading()},_loadAjax:function(){var a=h.coming;h.showLoading(),h.ajaxLoad=c.ajax(c.extend({},a.ajax,{url:a.href,error:function(a,b){h.coming&&"abort"!==b?h._error("ajax",a):h.hideLoading()},success:function(b,c){"success"===c&&(a.content=b,h._afterLoad())}}))},_loadIframe:function(){var a=h.coming,b=c(a.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",k?"auto":a.iframe.scrolling).attr("src",a.href);c(a.wrap).bind("onReset",function(){try{c(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(a){}}),a.iframe.preload&&(h.showLoading(),b.one("load",function(){c(this).data("ready",1),k||c(this).bind("load.fb",h.update),c(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),h._afterLoad()})),a.content=b.appendTo(a.inner),a.iframe.preload||h._afterLoad()},_preloadImages:function(){var a,b,c=h.group,d=h.current,e=c.length,f=d.preload?Math.min(d.preload,e-1):0;for(b=1;f>=b;b+=1)a=c[(d.index+b)%e],"image"===a.type&&a.href&&((new Image).src=a.href)},_afterLoad:function(){var a,b,d,e,f,g,i=h.coming,j=h.current,k="fancybox-placeholder";if(h.hideLoading(),i&&h.isActive!==!1){if(!1===h.trigger("afterLoad",i,j))return i.wrap.stop(!0).trigger("onReset").remove(),void(h.coming=null);switch(j&&(h.trigger("beforeChange",j),j.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),h.unbindEvents(),a=i,b=i.content,d=i.type,e=i.scrolling,c.extend(h,{wrap:a.wrap,skin:a.skin,outer:a.outer,inner:a.inner,current:a,previous:j}),f=a.href,d){case"inline":case"ajax":case"html":a.selector?b=c("<div>").html(b).find(a.selector):l(b)&&(b.data(k)||b.data(k,c('<div class="'+k+'"></div>').insertAfter(b).hide()),b=b.show().detach(),a.wrap.bind("onReset",function(){c(this).find(b).length&&b.hide().replaceAll(b.data(k)).data(k,!1)}));break;case"image":b=a.tpl.image.replace("{href}",f);break;case"swf":b='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+f+'"></param>',g="",c.each(a.swf,function(a,c){b+='<param name="'+a+'" value="'+c+'"></param>',g+=" "+a+'="'+c+'"'}),b+='<embed src="'+f+'" type="application/x-shockwave-flash" width="100%" height="100%"'+g+"></embed></object>"}l(b)&&b.parent().is(a.inner)||a.inner.append(b),h.trigger("beforeShow"),a.inner.css("overflow","yes"===e?"scroll":"no"===e?"hidden":e),h._setDimension(),h.reposition(),h.isOpen=!1,h.coming=null,h.bindEvents(),h.isOpened?j.prevMethod&&h.transitions[j.prevMethod]():c(".fancybox-wrap").not(a.wrap).stop(!0).trigger("onReset").remove(),h.transitions[h.isOpened?a.nextMethod:a.openMethod](),h._preloadImages()}},_setDimension:function(){var a,b,d,e,f,g,i,j,k,l,m,o,r,s,t,u=h.getViewport(),v=0,w=!1,x=!1,y=h.wrap,z=h.skin,A=h.inner,B=h.current,C=B.width,D=B.height,E=B.minWidth,F=B.minHeight,G=B.maxWidth,H=B.maxHeight,I=B.scrolling,J=B.scrollOutside?B.scrollbarWidth:0,K=B.margin,L=p(K[1]+K[3]),M=p(K[0]+K[2]);if(y.add(z).add(A).width("auto").height("auto").removeClass("fancybox-tmp"),a=p(z.outerWidth(!0)-z.width()),b=p(z.outerHeight(!0)-z.height()),d=L+a,e=M+b,f=n(C)?(u.w-d)*p(C)/100:C,g=n(D)?(u.h-e)*p(D)/100:D,"iframe"===B.type){if(s=B.content,B.autoHeight&&1===s.data("ready"))try{s[0].contentWindow.document.location&&(A.width(f).height(9999),t=s.contents().find("body"),J&&t.css("overflow-x","hidden"),g=t.outerHeight(!0))}catch(N){}}else(B.autoWidth||B.autoHeight)&&(A.addClass("fancybox-tmp"),B.autoWidth||A.width(f),B.autoHeight||A.height(g),B.autoWidth&&(f=A.width()),B.autoHeight&&(g=A.height()),A.removeClass("fancybox-tmp"));if(C=p(f),D=p(g),k=f/g,E=p(n(E)?p(E,"w")-d:E),G=p(n(G)?p(G,"w")-d:G),F=p(n(F)?p(F,"h")-e:F),H=p(n(H)?p(H,"h")-e:H),i=G,j=H,B.fitToView&&(G=Math.min(u.w-d,G),H=Math.min(u.h-e,H)),o=u.w-L,r=u.h-M,B.aspectRatio?(C>G&&(C=G,D=p(C/k)),D>H&&(D=H,C=p(D*k)),E>C&&(C=E,D=p(C/k)),F>D&&(D=F,C=p(D*k))):(C=Math.max(E,Math.min(C,G)),B.autoHeight&&"iframe"!==B.type&&(A.width(C),D=A.height()),D=Math.max(F,Math.min(D,H))),B.fitToView)if(A.width(C).height(D),y.width(C+a),l=y.width(),m=y.height(),B.aspectRatio)for(;(l>o||m>r)&&C>E&&D>F&&!(v++>19);)D=Math.max(F,Math.min(H,D-10)),C=p(D*k),E>C&&(C=E,D=p(C/k)),C>G&&(C=G,D=p(C/k)),A.width(C).height(D),y.width(C+a),l=y.width(),m=y.height();
else C=Math.max(E,Math.min(C,C-(l-o))),D=Math.max(F,Math.min(D,D-(m-r)));J&&"auto"===I&&g>D&&o>C+a+J&&(C+=J),A.width(C).height(D),y.width(C+a),l=y.width(),m=y.height(),w=(l>o||m>r)&&C>E&&D>F,x=B.aspectRatio?i>C&&j>D&&f>C&&g>D:(i>C||j>D)&&(f>C||g>D),c.extend(B,{dim:{width:q(l),height:q(m)},origWidth:f,origHeight:g,canShrink:w,canExpand:x,wPadding:a,hPadding:b,wrapSpace:m-z.outerHeight(!0),skinSpace:z.height()-D}),!s&&B.autoHeight&&D>F&&H>D&&!x&&A.height("auto")},_getPosition:function(a){var b=h.current,c=h.getViewport(),d=b.margin,e=h.wrap.width()+d[1]+d[3],f=h.wrap.height()+d[0]+d[2],g={position:"absolute",top:d[0],left:d[3]};return b.autoCenter&&b.fixed&&!a&&f<=c.h&&e<=c.w?g.position="fixed":b.locked||(g.top+=c.y,g.left+=c.x),g.top=q(Math.max(g.top,g.top+(c.h-f)*b.topRatio)),g.left=q(Math.max(g.left,g.left+(c.w-e)*b.leftRatio)),g},_afterZoomIn:function(){var a=h.current;a&&(h.isOpen=h.isOpened=!0,h.wrap.css("overflow","visible").addClass("fancybox-opened"),h.update(),(a.closeClick||a.nextClick&&h.group.length>1)&&h.inner.css("cursor","pointer").bind("click.fb",function(b){c(b.target).is("a")||c(b.target).parent().is("a")||(b.preventDefault(),h[a.closeClick?"close":"next"]())}),a.closeBtn&&c(a.tpl.closeBtn).appendTo(h.skin).bind("click.fb",function(a){a.preventDefault(),h.close()}),a.arrows&&h.group.length>1&&((a.loop||a.index>0)&&c(a.tpl.prev).appendTo(h.outer).bind("click.fb",h.prev),(a.loop||a.index<h.group.length-1)&&c(a.tpl.next).appendTo(h.outer).bind("click.fb",h.next)),h.trigger("afterShow"),a.loop||a.index!==a.group.length-1?h.opts.autoPlay&&!h.player.isActive&&(h.opts.autoPlay=!1,h.play()):h.play(!1))},_afterZoomOut:function(a){a=a||h.current,c(".fancybox-wrap").trigger("onReset").remove(),c.extend(h,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),h.trigger("afterClose",a)}}),h.transitions={getOrigPosition:function(){var a=h.current,b=a.element,c=a.orig,d={},e=50,f=50,g=a.hPadding,i=a.wPadding,j=h.getViewport();return!c&&a.isDom&&b.is(":visible")&&(c=b.find("img:first"),c.length||(c=b)),l(c)?(d=c.offset(),c.is("img")&&(e=c.outerWidth(),f=c.outerHeight())):(d.top=j.y+(j.h-f)*a.topRatio,d.left=j.x+(j.w-e)*a.leftRatio),("fixed"===h.wrap.css("position")||a.locked)&&(d.top-=j.y,d.left-=j.x),d={top:q(d.top-g*a.topRatio),left:q(d.left-i*a.leftRatio),width:q(e+i),height:q(f+g)}},step:function(a,b){var c,d,e,f=b.prop,g=h.current,i=g.wrapSpace,j=g.skinSpace;("width"===f||"height"===f)&&(c=b.end===b.start?1:(a-b.start)/(b.end-b.start),h.isClosing&&(c=1-c),d="width"===f?g.wPadding:g.hPadding,e=a-d,h.skin[f](p("width"===f?e:e-i*c)),h.inner[f](p("width"===f?e:e-i*c-j*c)))},zoomIn:function(){var a=h.current,b=a.pos,d=a.openEffect,e="elastic"===d,f=c.extend({opacity:1},b);delete f.position,e?(b=this.getOrigPosition(),a.openOpacity&&(b.opacity=.1)):"fade"===d&&(b.opacity=.1),h.wrap.css(b).animate(f,{duration:"none"===d?0:a.openSpeed,easing:a.openEasing,step:e?this.step:null,complete:h._afterZoomIn})},zoomOut:function(){var a=h.current,b=a.closeEffect,c="elastic"===b,d={opacity:.1};c&&(d=this.getOrigPosition(),a.closeOpacity&&(d.opacity=.1)),h.wrap.animate(d,{duration:"none"===b?0:a.closeSpeed,easing:a.closeEasing,step:c?this.step:null,complete:h._afterZoomOut})},changeIn:function(){var a,b=h.current,c=b.nextEffect,d=b.pos,e={opacity:1},f=h.direction,g=200;d.opacity=.1,"elastic"===c&&(a="down"===f||"up"===f?"top":"left","down"===f||"right"===f?(d[a]=q(p(d[a])-g),e[a]="+="+g+"px"):(d[a]=q(p(d[a])+g),e[a]="-="+g+"px")),"none"===c?h._afterZoomIn():h.wrap.css(d).animate(e,{duration:b.nextSpeed,easing:b.nextEasing,complete:h._afterZoomIn})},changeOut:function(){var a=h.previous,b=a.prevEffect,d={opacity:.1},e=h.direction,f=200;"elastic"===b&&(d["down"===e||"up"===e?"top":"left"]=("up"===e||"left"===e?"-":"+")+"="+f+"px"),a.wrap.animate(d,{duration:"none"===b?0:a.prevSpeed,easing:a.prevEasing,complete:function(){c(this).trigger("onReset").remove()}})}},h.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!k,fixed:!0},overlay:null,fixed:!1,el:c("html"),create:function(a){a=c.extend({},this.defaults,a),this.overlay&&this.close(),this.overlay=c('<div class="fancybox-overlay"></div>').appendTo(h.coming?h.coming.parent:a.parent),this.fixed=!1,a.fixed&&h.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(a){var b=this;a=c.extend({},this.defaults,a),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(a),this.fixed||(f.bind("resize.overlay",c.proxy(this.update,this)),this.update()),a.closeClick&&this.overlay.bind("click.overlay",function(a){return c(a.target).hasClass("fancybox-overlay")?(h.isActive?h.close():b.close(),!1):void 0}),this.overlay.css(a.css).show()},close:function(){var a,b;f.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(c(".fancybox-margin").removeClass("fancybox-margin"),a=f.scrollTop(),b=f.scrollLeft(),this.el.removeClass("fancybox-lock"),f.scrollTop(a).scrollLeft(b)),c(".fancybox-overlay").remove().hide(),c.extend(this,{overlay:null,fixed:!1})},update:function(){var a,c="100%";this.overlay.width(c).height("100%"),i?(a=Math.max(b.documentElement.offsetWidth,b.body.offsetWidth),g.width()>a&&(c=g.width())):g.width()>f.width()&&(c=g.width()),this.overlay.width(c).height(g.height())},onReady:function(a,b){var d=this.overlay;c(".fancybox-overlay").stop(!0,!0),d||this.create(a),a.locked&&this.fixed&&b.fixed&&(d||(this.margin=g.height()>f.height()?c("html").css("margin-right").replace("px",""):!1),b.locked=this.overlay.append(b.wrap),b.fixed=!1),a.showEarly===!0&&this.beforeShow.apply(this,arguments)},beforeShow:function(a,b){var d,e;b.locked&&(this.margin!==!1&&(c("*").filter(function(){return"fixed"===c(this).css("position")&&!c(this).hasClass("fancybox-overlay")&&!c(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),d=f.scrollTop(),e=f.scrollLeft(),this.el.addClass("fancybox-lock"),f.scrollTop(d).scrollLeft(e)),this.open(a)},onUpdate:function(){this.fixed||this.update()},afterClose:function(a){this.overlay&&!h.coming&&this.overlay.fadeOut(a.speedOut,c.proxy(this.close,this))}},h.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(a){var b,d,e=h.current,f=e.title,g=a.type;if(c.isFunction(f)&&(f=f.call(e.element,e)),m(f)&&""!==c.trim(f)){switch(b=c('<div class="fancybox-title fancybox-title-'+g+'-wrap">'+f+"</div>"),g){case"inside":d=h.skin;break;case"outside":d=h.wrap;break;case"over":d=h.inner;break;default:d=h.skin,b.appendTo("body"),i&&b.width(b.width()),b.wrapInner('<span class="child"></span>'),h.current.margin[2]+=Math.abs(p(b.css("margin-bottom")))}b["top"===a.position?"prependTo":"appendTo"](d)}}},c.fn.fancybox=function(a){var b,d=c(this),e=this.selector||"",f=function(f){var g,i,j=c(this).blur(),k=b;f.ctrlKey||f.altKey||f.shiftKey||f.metaKey||j.is(".fancybox-wrap")||(g=a.groupAttr||"data-fancybox-group",i=j.attr(g),i||(g="rel",i=j.get(0)[g]),i&&""!==i&&"nofollow"!==i&&(j=e.length?c(e):d,j=j.filter("["+g+'="'+i+'"]'),k=j.index(this)),a.index=k,h.open(j,a)!==!1&&f.preventDefault())};return a=a||{},b=a.index||0,e&&a.live!==!1?g.undelegate(e,"click.fb-start").delegate(e+":not('.fancybox-item, .fancybox-nav')","click.fb-start",f):d.unbind("click.fb-start").bind("click.fb-start",f),this.filter("[data-fancybox-start=1]").trigger("click"),this},g.ready(function(){var b,f;c.scrollbarWidth===d&&(c.scrollbarWidth=function(){var a=c('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),b=a.children(),d=b.innerWidth()-b.height(99).innerWidth();return a.remove(),d}),c.support.fixedPosition===d&&(c.support.fixedPosition=function(){var a=c('<div style="position:fixed;top:20px;"></div>').appendTo("body"),b=20===a[0].offsetTop||15===a[0].offsetTop;return a.remove(),b}()),c.extend(h.defaults,{scrollbarWidth:c.scrollbarWidth(),fixed:c.support.fixedPosition,parent:c("body")}),b=c(a).width(),e.addClass("fancybox-lock-test"),f=c(a).width(),e.removeClass("fancybox-lock-test"),c("<style type='text/css'>.fancybox-margin{margin-right:"+(f-b)+"px;}</style>").appendTo("head")})}(window,document,jQuery),function(a){var b=a.fancybox;b.helpers.buttons={defaults:{skipSingle:!1,position:"top",tpl:'<div id="fancybox-buttons"><ul><li><a class="btnPrev" title="Previous" href="javascript:;"></a></li><li><a class="btnPlay" title="Start slideshow" href="javascript:;"></a></li><li><a class="btnNext" title="Next" href="javascript:;"></a></li><li><a class="btnToggle" title="Toggle size" href="javascript:;"></a></li><li><a class="btnClose" title="Close" href="javascript:;"></a></li></ul></div>'},list:null,buttons:null,beforeLoad:function(a,b){return a.skipSingle&&b.group.length<2?(b.helpers.buttons=!1,void(b.closeBtn=!0)):void(b.margin["bottom"===a.position?2:0]+=30)},onPlayStart:function(){this.buttons&&this.buttons.play.attr("title","Pause slideshow").addClass("btnPlayOn")},onPlayEnd:function(){this.buttons&&this.buttons.play.attr("title","Start slideshow").removeClass("btnPlayOn")},afterShow:function(c,d){var e=this.buttons;e||(this.list=a(c.tpl).addClass(c.position).appendTo("body"),e={prev:this.list.find(".btnPrev").click(b.prev),next:this.list.find(".btnNext").click(b.next),play:this.list.find(".btnPlay").click(b.play),toggle:this.list.find(".btnToggle").click(b.toggle),close:this.list.find(".btnClose").click(b.close)}),d.index>0||d.loop?e.prev.removeClass("btnDisabled"):e.prev.addClass("btnDisabled"),d.loop||d.index<d.group.length-1?(e.next.removeClass("btnDisabled"),e.play.removeClass("btnDisabled")):(e.next.addClass("btnDisabled"),e.play.addClass("btnDisabled")),this.buttons=e,this.onUpdate(c,d)},onUpdate:function(a,b){var c;this.buttons&&(c=this.buttons.toggle.removeClass("btnDisabled btnToggleOn"),b.canShrink?c.addClass("btnToggleOn"):b.canExpand||c.addClass("btnDisabled"))},beforeClose:function(){this.list&&this.list.remove(),this.list=null,this.buttons=null}}}(jQuery),function(a){var b=a.fancybox;b.helpers.thumbs={defaults:{width:50,height:50,position:"bottom",source:function(b){var c;return b.element&&(c=a(b.element).find("img").attr("src")),!c&&"image"===b.type&&b.href&&(c=b.href),c}},wrap:null,list:null,width:0,init:function(b,c){var d,e=this,f=b.width,g=b.height,h=b.source;d="";for(var i=0;i<c.group.length;i++)d+='<li><a style="width:'+f+"px;height:"+g+'px;" href="javascript:jQuery.fancybox.jumpto('+i+');"></a></li>';this.wrap=a('<div id="fancybox-thumbs"></div>').addClass(b.position).appendTo("body"),this.list=a("<ul>"+d+"</ul>").appendTo(this.wrap),a.each(c.group,function(b){var d=h(c.group[b]);d&&a("<img />").load(function(){var c,d,h,i=this.width,j=this.height;e.list&&i&&j&&(c=i/f,d=j/g,h=e.list.children().eq(b).find("a"),c>=1&&d>=1&&(c>d?(i=Math.floor(i/d),j=g):(i=f,j=Math.floor(j/c))),a(this).css({width:i,height:j,top:Math.floor(g/2-j/2),left:Math.floor(f/2-i/2)}),h.width(f).height(g),a(this).hide().appendTo(h).fadeIn(300))}).attr("src",d)}),this.width=this.list.children().eq(0).outerWidth(!0),this.list.width(this.width*(c.group.length+1)).css("left",Math.floor(.5*a(window).width()-(c.index*this.width+.5*this.width)))},beforeLoad:function(a,b){return b.group.length<2?void(b.helpers.thumbs=!1):void(b.margin["top"===a.position?0:2]+=a.height+15)},afterShow:function(a,b){this.list?this.onUpdate(a,b):this.init(a,b),this.list.children().removeClass("active").eq(b.index).addClass("active")},onUpdate:function(b,c){this.list&&this.list.stop(!0).animate({left:Math.floor(.5*a(window).width()-(c.index*this.width+.5*this.width))},150)},beforeClose:function(){this.wrap&&this.wrap.remove(),this.wrap=null,this.list=null,this.width=0}}}(jQuery),function(a){"use strict";var b=a.fancybox,c=function(b,c,d){return d=d||"","object"===a.type(d)&&(d=a.param(d,!0)),a.each(c,function(a,c){b=b.replace("$"+a,c||"")}),d.length&&(b+=(b.indexOf("?")>0?"&":"?")+d),b};b.helpers.media={defaults:{youtube:{matcher:/(youtube\.com|youtu\.be|youtube-nocookie\.com)\/(watch\?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*)).*/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"opaque",enablejsapi:1},type:"iframe",url:"//www.youtube.com/embed/$3"},vimeo:{matcher:/(?:vimeo(?:pro)?.com)\/(?:[^\d]+)?(\d+)(?:.*)/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},type:"iframe",url:"//player.vimeo.com/video/$1"},metacafe:{matcher:/metacafe.com\/(?:watch|fplayer)\/([\w\-]{1,10})/,params:{autoPlay:"yes"},type:"swf",url:function(b,c,d){return d.swf.flashVars="playerVars="+a.param(c,!0),"//www.metacafe.com/fplayer/"+b[1]+"/.swf"}},dailymotion:{matcher:/dailymotion.com\/video\/(.*)\/?(.*)/,params:{additionalInfos:0,autoStart:1},type:"swf",url:"//www.dailymotion.com/swf/video/$1"},twitvid:{matcher:/twitvid\.com\/([a-zA-Z0-9_\-\?\=]+)/i,params:{autoplay:0},type:"iframe",url:"//www.twitvid.com/embed.php?guid=$1"},twitpic:{matcher:/twitpic\.com\/(?!(?:place|photos|events)\/)([a-zA-Z0-9\?\=\-]+)/i,type:"image",url:"//twitpic.com/show/full/$1/"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"},google_maps:{matcher:/maps\.google\.([a-z]{2,3}(\.[a-z]{2})?)\/(\?ll=|maps\?)(.*)/i,type:"iframe",url:function(a){return"//maps.google."+a[1]+"/"+a[3]+a[4]+"&output="+(a[4].indexOf("layer=c")>0?"svembed":"embed")}}},beforeLoad:function(b,d){var e,f,g,h,i=d.href||"",j=!1;for(e in b)if(b.hasOwnProperty(e)&&(f=b[e],g=i.match(f.matcher))){j=f.type,h=a.extend(!0,{},f.params,d[e]||(a.isPlainObject(b[e])?b[e].params:null)),i="function"===a.type(f.url)?f.url.call(this,g,h,d):c(f.url,g,h);break}j&&(d.href=i,d.type=j,d.autoHeight=!1)}}}(jQuery),window.TQ=window.TQ||{},function(){function a(){}var b=window.location.host;status=b.indexOf("udoido.cn");var c="";c="-1"!=status?"api.udoido.cn":"api.udoido.com",status=b.indexOf("test.udoido.cn"),"-1"!=status&&(c="testapi.udoido.cn");var c=c+"/"+getcookie("select_lang");a.DOMAIN_NAME=window.location.host,a.API_DOMAIN_NAME=c,a.EXTENSION="",a.color="#0000FF",a.fontFace=window.TQ.Dictionary.fontFace,a.fontSize="36",a.BACKGROUND_COLOR="#FFF",a.workingRegionX0=160,a.workingRegionY0=63,a.workingRegionWidth=751,a.workingRegionHeight=550,a.zoomX=1,a.zoomY=1,a.validPageWidth=960,a.MouseSensitivity=10,a.RotateSensitivity=2,a.pivotX=.5,a.pivotY=.5,a.TEXT_PIVOT_X=0,a.TEXT_PIVOT_Y=a.pivotY,a.DISPLAY_CLIPS=!1,a.THUMBNAIL_WIDTH=175,a.THUMBNAIL_HEIGHT=128,a.RESOURCE_PAGE_SIZE=15,a.IK_ITERATE_TIME=1,a.DEMO_SCENE_NAME="SystemDemo1",a.UNNAMED_SCENE="wcy01",a.THUMBS_CORE_PATH="mcThumbs/",a.IMAGES_CORE_PATH="mcImages/",a.SCENES_CORE_PATH="mcAssets/",a.SOUNDS_PATH="mcSounds/",a.SOUND_PLUGIN_PATH="../soundjs/",a.DefaultUserID=1e4,a.REMOVE_EMPTY_LEVEL_ON=!0,a.IS_DEBUG=!1,a.LOG_LEVEL=2,a.AutoPlay=!0,a.attachmentPath="attachment/",a.actionImgPath=a.attachmentPath+"action_img/",window.TQ.Config=a}(),window.TQ=window.TQ||{},function(){function a(){}a.isPlayOnly=!1,a.currentScene=null,a.getCurrentScene=function(){return a.currentScene},a.getCurrentElement=function(){return TQ.SelectSet.peek()},a.gotoLevel=function(b){b=Number(b),assertNotNull(TQ.Dictionary.FoundNull,a.currentScene),a.currentScene&&a.currentScene.gotoLevel(b)},a.addLevelAt=function(b){b=Number(b),assertNotNull(TQ.Dictionary.FoundNull,a.currentScene),a.currentScene&&a.currentScene.addLevel(b)},a.addLevel=function(){assertNotNull(TQ.Dictionary.FoundNull,a.currentScene),a.currentScene&&a.currentScene.addLevel(a.currentScene.currentLevelId+1)},a.deleteLevel=function(b){b=Number(b),assertNotNull(TQ.Dictionary.FoundNull,a.currentScene),a.currentScene&&a.currentScene.deleteLevel(b)},a.moveTo=function(b,c){b=Number(b),c=Number(c),assertNotNull(TQ.Dictionary.FoundNull,a.currentScene),a.currentScene&&a.currentScene.moveTo(b,c)},a.copyTo=function(b,c){b=Number(b),c=Number(c),assertNotNull(TQ.Dictionary.FoundNull,a.currentScene),a.currentScene&&a.currentScene.copyTo(b,c)},a.getLevelNum=function(){return assertNotNull(TQ.Dictionary.FoundNull,a.currentScene),a.currentScene?a.currentScene.levelNum():0},a.doStop=function(){assertTrue(TQ.Dictionary.INVALID_LOGIC,null!=a.currentScene),null!=a.currentScene&&a.currentScene.stop()},a.doPlay=function(){assertTrue(TQ.Dictionary.INVALID_LOGIC,null!=a.currentScene),null!=a.currentScene&&a.currentScene.play()},a.doPlayRecord=function(){TQ.SceneEditor.setEditMode()},a.doStopRecord=function(){TQ.SceneEditor.setPlayMode()},a.emptyScene=function(){TQ.SceneEditor.emptyScene()},a.doPlayStop=function(){a.isPlayOnly?TQ.FrameCounter.isPlaying()?a.doStop():a.doPlay():TQ.FrameCounter.isPlaying()?$("#stop").click():$("#play").click()};var b;a.fullscreenPlay=function(c,d){b=document.getElementById("testCanvas"),b.width=c,b.height=d,TQ.Config.zoomX=c/TQ.Config.workingRegionWidth,TQ.Config.zoomY=d/TQ.Config.workingRegionHeight,TQ.Config.workingRegionWidth=c,TQ.Config.workingRegionHeight=d,a.doPlay()},a.eixtFullscreen=function(){b.width=TQ.Config.workingRegionWidth,b.height=TQ.Config.workingRegionHeight,TQ.Config.zoomX=TQ.Config.zoomY=1},a.deleteElement=function(b){a.currentScene.deleteElement(b)},a.addResToStageCenter=function(a,b,c){return addResToStageCenter(a,b,c)},a.getCurrentLevelID=function(){return a.currentScene.currentLevelId},a.getCurrentTime=function(){return TQ.FrameCounter.t()},a.snow=function(a,b,c,d,e){TQ.SnowEffect.set(a,b,c,d,e)},a.snowChange=function(a,b,c){TQ.SnowEffect.set(a,b,c)},a.snowStop=function(){TQ.SnowEffect.stop()},a.rain=function(a,b,c,d,e){TQ.RainEffect.set(a,b,c,d,e)},a.rainChange=function(a,b,c){TQ.RainEffect.set(a,b,c)},a.rainStop=function(){TQ.RainEffect.stop()},a.firework=function(a){console.log(a)},a.setMarkerSize=function(a){TQ.Marker.RADIUS=a},TQ.WCY=a}(),window.TQ=window.TQ||{},function(){var a={},b="";a.visible=!1,a.keywords=TQ.Utility.readLocalStorage("keywords",TQ.Dictionary.MiniAnime),a.initialize=function(){$("#save-file").hide(),$("#GetTextInput").hide()},a.getFilename=function(c,d){function e(b){if(!a.visible)return"";var c=!1,e=$.trim(f.val());c=""!=e&&e.lastIndexOf(" ")<0&&e.lastIndexOf(TQ.Config.DEMO_SCENE_NAME)<0&&e.lastIndexOf(TQ.Config.UNNAMED_SCENE)<0?!0:!1;var h=new RegExp(/[\/\\<>\?\*]/);return(c=c&&!h.test(e))?(a.visible=!1,allFields.removeClass("ui-state-error"),a.keywords=$.trim(g.attr("cate_id")),a.keywords.indexOf(TQ.Dictionary.CommaCh)>=0&&(a.keywords=a.keywords.replace(TQ.Dictionary.CommaCh,",")),a.keywords.indexOf(b)<0&&(a.keywords_type=b+","+a.keywords,a.keywords=a.keywords),c&&(e=TQ.Utility.forceExt(e),null!==d&&d(e,a.keywords_type)),e):(MYJS.alert_obj.alert(TQ.Dictionary.INVALID_FILENAME,1,null,null,"no"),"")}var f=$("#name"),g=$("#mc_type");allFields=$([]).add(f),myDialog=$("#save-file");var h=!1;"wcy01"!=c&&f.val(c),g.attr("cate_id",a.keywords),$("#close_save").click(function(){$.fancybox({closeClick:!0})});var i="";$("#save_mc").unbind("click").click(function(){var c=$("#name").val(),d=new Object,f=$("#mc_type").val(),g=$("#cate_3").val(),j=$("#cate_2").val(),k=$("#cate_1").val();""!=k&&void 0!=k&&(b=k),""!=j&&void 0!=j&&(b=j),""!=g&&void 0!=g&&(b=g),$("#mc_type").attr("cate_id",b);var l="";if("mc"==f?i="微动漫":"element"==f&&(i="元件"),""==i?l=TQ.Dictionary.save_win_2:""==c?l=TQ.Dictionary.save_win_3:(""==b||null==b)&&(l=TQ.Dictionary.save_win_4),""!=l?MYJS.alert_obj.alert(l,1,null,null,"no"):h=!0,1==h){d.name=c,d.cate_id=b,d.mc_type=i,d.uid=TQ.Init.uid;var m=MYJS.ajax_obj.post(d,"http://"+TQ.Config.DOMAIN_NAME+"/wcy/saveSearch","html");m.success(function(b){"success"==b?(a.visible=!0,myDialog.keypress(TQ.TextEditor.onEnter),e(i),$.fancybox({closeClick:!0})):MYJS.alert_obj.alert(TQ.Dictionary.save_win_1,1,"change_save",function(){a.visible=!0,myDialog.keypress(TQ.TextEditor.onEnter),e(i),$.fancybox({closeClick:!0})},"no")})}}),$.fancybox({href:"#save-file",closeBtn:!1,afterClose:function(){1==$("#action_add_btn").attr("display_status")&&$("#action_add_btn").trigger("click")},helpers:{overlay:{closeClick:!1}}})},TQ.FileDialog=a}(),window.TQ=window.TQ||{},function(){var a={};a.visible=!1,a.dlg=null,a.counter=0,a.initialize=function(){a.dlg=$("#messageBubbleDiv"),a.bubble=$("#bubble"),a.dlg.hide()},a.close=function(){easyDialog.close()},a.addMessage=function(b){a.visible&&a.bubble.text(a.bubble.text()+"; "+b)},a.show=function(){},TQ.MessageBubble=a}();var NET_IO_DATA_TYPE="text";window.TQ=window.TQ||{},function(){var a={};a.obj=function(){return $("#floatToolbarDiv")},a.initialize=function(){TQ.floatToolbar.selectedElement=null,a.obj().css("display","none"),a.setupButtons()},a.show=function(b){var c="none";1==b&&(c="block"),a.obj().css("display",c)},a.setPosition=function(b,c){a.obj().css("left",b-100).css("top",c+30)},a.isVisible=function(){return status=a.obj().css("display"),"block"==status?!0:!1},a.setupButtons=function(){$("#doScaleBig").bind("touchstart click",function(a){a.stopPropagation(),a.preventDefault(),TQBase.LevelState.saveOperation(TQBase.LevelState.OP_FLOATTOOLBAR),TQ.InputCtrl.doScale(TQ.floatToolbar.selectedElement,1.2)}),$("#doScaleSmall").bind("touchstart click",function(a){a.stopPropagation(),a.preventDefault(),TQBase.LevelState.saveOperation(TQBase.LevelState.OP_FLOATTOOLBAR),TQ.InputCtrl.doScale(TQ.floatToolbar.selectedElement,.8)}),$("#rotateLeft").bind("touchstart click",function(a){a.stopPropagation(),a.preventDefault(),TQBase.LevelState.saveOperation(TQBase.LevelState.OP_FLOATTOOLBAR),TQ.IKCtrl.rotate(TQ.floatToolbar.selectedElement,10)}),$("#rotateRight").bind("touchstart click",function(a){a.stopPropagation(),a.preventDefault(),TQBase.LevelState.saveOperation(TQBase.LevelState.OP_FLOATTOOLBAR),TQ.IKCtrl.rotate(TQ.floatToolbar.selectedElement,-10)}),$("#moveLayerPrev").bind("touchstart click",function(a){a.stopPropagation(),a.preventDefault(),TQBase.LevelState.saveOperation(TQBase.LevelState.OP_FLOATTOOLBAR),TQ.MoveCtrl.moveLayer(TQ.floatToolbar.selectedElement,1)}),$("#moveLayerNext").bind("touchstart click",function(a){a.stopPropagation(),a.preventDefault(),TQBase.LevelState.saveOperation(TQBase.LevelState.OP_FLOATTOOLBAR),TQ.MoveCtrl.moveLayer(TQ.floatToolbar.selectedElement,-1)}),$("#moveToTop").bind("touchstart click",function(a){a.stopPropagation(),a.preventDefault(),TQBase.LevelState.saveOperation(TQBase.LevelState.OP_FLOATTOOLBAR),TQ.MoveCtrl.moveToTop(TQ.floatToolbar.selectedElement)}),$("#moveToBottom").bind("touchstart click",function(a){a.stopPropagation(),a.preventDefault(),TQBase.LevelState.saveOperation(TQBase.LevelState.OP_FLOATTOOLBAR),TQ.MoveCtrl.moveToBottom(TQ.floatToolbar.selectedElement)}),$("#delete").bind("touchstart click",function(a){a.stopPropagation(),a.preventDefault(),TQBase.LevelState.saveOperation(TQBase.LevelState.OP_FLOATTOOLBAR),TQ.SelectSet.delete(),TQ.floatToolbar.show(!1)}),$("#mirrorX").bind("touchstart click",function(a){a.stopPropagation(),a.preventDefault(),TQBase.LevelState.saveOperation(TQBase.LevelState.OP_FLOATTOOLBAR),TQ.InputCtrl.mirrorX(TQ.floatToolbar.selectedElement)}),$("#mirrorY").bind("touchstart click",function(a){a.stopPropagation(),a.preventDefault(),TQBase.LevelState.saveOperation(TQBase.LevelState.OP_FLOATTOOLBAR),TQ.InputCtrl.mirrorY(TQ.floatToolbar.selectedElement)})},TQ.floatToolbar=a}(),TQ=TQ||{},function(){function a(){}var b=a;b.filename_str=null,b.promptToSave=function(b){a.filename_str=b,MYJS.alert_obj.alert(TQ.Dictionary.SaveItPlease,2,"yes",function(){save(),openScene(TQ.SceneEditorUI.filename_str),$("#save").trigger("click")},"no",function(){MYJS.alert_obj.close(2)},"abandonbtn",function(){window.location.href="http://"+TQ.Config.DOMAIN_NAME+"/wcy/index"})},TQ.SceneEditorUI=a}();var __enable_debug_trsa=!1;window.TQ=window.TQ||{},function(){function a(){}a.toCssFont=function(a,b){return a+"px "+b},a.extractAttr=function(a,b,c,d){var e=new RegExp("<"+a+"[^<>]*?\\s"+b+"=['\"]?(.*?)['\"]?\\s.*?>(.*?)</"+a+">"),f=new RegExp("<"+a+"[^<>]*?\\s"+b+"=['\"]?(.*?)['\"]>(.*?)</"+a+">");try{var g=e.exec(c);if(null!=g){var h=null;g.length>=2&&(h=g[1])}(null==h||""==h)&&(g=f.exec(c),h=null!=g&&g.length>=2?g[1]:d)}catch(i){}return h},a.extractTag=function(a,b,c){var d=new RegExp("<"+a+"[^<>]*?>(.*?)</"+a+">");try{var e=d.exec(b);if(null!=e)return e.length>=2?e[1]:c}catch(f){}return c},a.forceExt=function(a){return a.indexOf(".")>0?a=a.substr(0,a.indexOf("."))+TQ.Config.EXTENSION:a+=TQ.Config.EXTENSION,a},a.getAudioByThumbnail=function(a){a=a.replace("./","/"),assertTrue(TQ.Dictionary.INVALID_PARAMETER,a.lastIndexOf("\\")<=0);var b=a.replace("http://"+TQ.Config.DOMAIN_NAME+"/","");return"http://"+TQ.Config.DOMAIN_NAME+"/"+b},a.getImageByThumbnail=function(a){var b="mcImages/",c="mcThumbs/";return assertTrue(TQ.Dictionary.INVALID_PARAMETER,a.lastIndexOf("\\")<=0),a=a.replace("http://"+TQ.Config.DOMAIN_NAME,""),a.replace(c,b)},a.getComponentByThumbnail=function(a){var b="mcThumbs/";assertTrue(TQ.Dictionary.INVALID_PARAMETER,a.lastIndexOf("\\")<=0),a=a.replace("http://"+TQ.Config.DOMAIN_NAME,"");var c=a.indexOf(b)+b.length,d=a.substr(c),e=d.lastIndexOf(".");return 0>=e&&(e=d.length),d.substring(0,e)+TQ.Config.EXTENSION},a.getSceneByThumbnail=function(b){return a.getComponentByThumbnail(b)},a.isComponent=function(){return 1==$("#tab_right_panel").tabs("option","active")},a.isScene=function(){return 0==$("#tab_right_panel").tabs("option","active")},a.getEmptyScene=function(){return{levels:[{jsonElements:null,FPS:20,elements:null,name:"0"}],overlay:null,currentLevelId:0,currentLevel:null}},a.assertValid=function(a){assertNotUndefined(TQ.Dictionary.FoundNull,a),assertNotNull(TQ.Dictionary.FoundNull,a)},a.isAnimationDesc=function(a){return a.lastIndexOf(".adm")>0},a.isSoundResource=function(a){for(var b=[".wav",".mp3",".ogg"],c=0;c<b.length;c++)if(a.lastIndexOf(b[c])>0)return!0;return!1},a.isImage=function(a){for(var b=a.toLowerCase(),c=[".png",".jpg",".bmp",".gif"],d=0;d<c.length;d++)if(b.lastIndexOf(c[d])>0)return!0;return!1},a.isJSON=function(a){if(void 0!=a&&null!=a){if(void 0!=a.type&&null!=a.type)return!0;if(void 0!=a.src&&null!=a.src)return!0}return!1},a.deltaYinWorld=function(a,b,c){var d=c.stageY+b.y-a.y;return-d},a.deviceToWorld=function(b,c){return{x:b,y:a.toWorldCoord(c)}},a.worldToDevioce=function(b,c){return{x:b,y:a.toDeviceCoord(c)}},a.toDeviceCoord=function(a){return TQ.Config.workingRegionHeight-a},a.toDeviceRotation=function(a){return-a},a.toWorldCoord=function(a){return TQ.Config.workingRegionHeight-a},a.canvas2WindowX=function(a){return window.canvas.offsetLeft+a},a.canvas2WindowY=function(a){return window.canvas.offsetTop+a},a.toDevicePivot=function(a){return 1-a},a.readLocalStorage=function(a,b){var c=localStorage.getItem(a);return(""==c||"null"==c)&&(c=b),c},a.writeLocalStorage=function(a,b){return localStorage.setItem(a,b)},a.getUrlParam=function(a){var b={QueryString:function(a){var b=window.location.search,c=new RegExp(""+a+"=([^&?]*)","ig");try{var d=b.match(c)?decodeURIComponent(b.match(c)[0].substr(a.length+1)):""}catch(e){TQ.Log.criticalError("Error in URL Parameter:"+b+":"+e.toString()),d=""}return d}};return b.QueryString(a)},a.getUserID=function(){var b=TQ.Init.uid;if(""==b){var c=a.readLocalStorage("userID","");b=""!=c?c:TQ.Config.DefaultUserID}else localStorage.setItem("userID",b);return b},a.DEV_PC=1,a.DEV_PAD=2,a.DEV_MOBILE=4,a.OS_ANDROID=16,a.OS_IPHONE=32,a.OS_WINDOWS=64,a.OS_MAC=128,a.BR_FIREFOX=256,a.BR_CHROME=512,a.BR_SAFARI=1024,a.env=0,a.setEnv=function(b){a.env|=b},a.clearEnv=function(b){a.env&=~b},a.hasEnv=function(b){return a.env&b},a.isSupportedEnvironment=function(){var b=""!=TQ.Utility.getUrlParam("B"),c=!1;return b&&alert(navigator.userAgent),navigator.userAgent.match(/(Android)/i)?(a.setEnv(a.DEV_MOBILE),a.setEnv(a.OS_ANDROID)):(a.setEnv(a.DEV_PC),a.setEnv(a.OS_WINDOWS)),navigator.userAgent.indexOf("Chrome")>0?(a.setEnv(a.BR_CHROME),c=!0):navigator.userAgent.indexOf("Firefox")>0?(a.setEnv(a.BR_FIREFOX),c=!0):navigator.userAgent.indexOf("Safari")>0&&(a.setEnv(a.BR_SAFARI),c=!0),c||(window.location=a.hasEnv(a.DEV_PC)?"ShowBrowsers.php":"MobileBrowsers.php"),c},a.CheckUserRight=function(){a.getUserID()},a.getMaxZ=function(){return assertNotNull(currScene,TQ.Dictionary.FoundNull),assertNotNull(currScene.currentLevel,TQ.Dictionary.FoundNull),currScene&&currScene.currentLevel?(currScene.currentLevel.persist(),stage.getNumChildren()):0},a.isTouchEvent=function(a){var b=a.nativeEvent;return null!=b.touches&&null!=b.changedTouches},a.isMultiTouchEvent=function(b){return a.isTouchEvent(b)&&b.nativeEvent.touches.length>=2};var b=-1;a.isTouchScreen=function(){if(-1==b){var a=navigator.userAgent.toLowerCase();b=Modernizr.touch||a.match(/(iphone|ipod|ipad)/)||a.match(/(android)/)||a.match(/(iemobile)/)||a.match(/iphone/i)||a.match(/ipad/i)||a.match(/ipod/i)||a.match(/blackberry/i)||a.match(/bada/i)}return b},a.getOffsetTop=function(b){return b.offsetParent?b.offsetTop+a.getOffsetTop(b.offsetParent):b.offsetTop},a.getOffsetLeft=function(b){return b.offsetParent?b.offsetLeft+a.getOffsetLeft(b.offsetParent):b.offsetLeft},a.getDefultActionIcon=function(){var a=100;return a},TQ.Utility=a}(),RecordRTC.getFromDisk=function(a,b){if(!b)throw"callback is mandatory.";console.log("Getting recorded "+("all"==a?"blobs":a+" blob ")+" from disk!"),DiskStorage.Fetch(function(c,d){"all"!=a&&d==a+"Blob"&&b&&b(c),"all"==a&&b&&b(c,d.replace("Blob",""))})},RecordRTC.writeToDisk=function(a){console.log("Writing recorded blob(s) to disk!"),a=a||{},a.audio&&a.video&&a.gif?a.audio.getDataURL(function(b){a.video.getDataURL(function(c){a.gif.getDataURL(function(a){DiskStorage.Store({audioBlob:b,videoBlob:c,gifBlob:a})})})}):a.audio&&a.video?a.audio.getDataURL(function(b){a.video.getDataURL(function(a){DiskStorage.Store({audioBlob:b,videoBlob:a})})}):a.audio&&a.gif?a.audio.getDataURL(function(b){a.gif.getDataURL(function(a){DiskStorage.Store({audioBlob:b,gifBlob:a})})}):a.video&&a.gif?a.video.getDataURL(function(b){a.gif.getDataURL(function(a){DiskStorage.Store({videoBlob:b,gifBlob:a})})}):a.audio?a.audio.getDataURL(function(a){DiskStorage.Store({audioBlob:a})}):a.video?a.video.getDataURL(function(a){DiskStorage.Store({videoBlob:a})}):a.gif&&a.gif.getDataURL(function(a){DiskStorage.Store({gifBlob:a})})},MRecordRTC.getFromDisk=RecordRTC.getFromDisk,MRecordRTC.writeToDisk=RecordRTC.writeToDisk,requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,cancelAnimationFrame=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame,AudioContext=window.webkitAudioContext||window.mozAudioContext,URL=window.URL||window.webkitURL,navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia,window.webkitMediaStream&&(window.MediaStream=window.webkitMediaStream),IsChrome=!!navigator.webkitGetUserMedia;var Storage={AudioContext:window.AudioContext||window.webkitAudioContext},__stereoAudioRecorderJavacriptNode,Whammy=function(){function a(a){for(var c=b(a),d=3e4,e=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:j(c.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:25541},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:c.width,id:176},{data:c.height,id:186}]}]}]}]}],h=0,i=0;h<a.length;){var k=[],l=0;do k.push(a[h]),l+=a[h].duration,h++;while(h<a.length&&d>l);var m=0,n={id:524531317,data:[{data:i,id:231}].concat(k.map(function(a){var b=g({discardable:0,frame:a.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(m)});return m+=a.duration,{data:b,id:163}}))};e[1].data.push(n),i+=l}return f(e)}function b(a){if(!a[0])return void console.warn("Something went wrong. Maybe WebP format is not supported in the current browser.");for(var b=a[0].width,c=a[0].height,d=a[0].duration,e=1;e<a.length;e++)d+=a[e].duration;return{duration:d,width:b,height:c}
}function c(a){for(var b=[];a>0;)b.push(255&a),a>>=8;return new Uint8Array(b.reverse())}function d(a){return new Uint8Array(a.split("").map(function(a){return a.charCodeAt(0)}))}function e(a){var b=[],c=a.length%8?new Array(9-a.length%8).join("0"):"";a=c+a;for(var d=0;d<a.length;d+=8)b.push(parseInt(a.substr(d,8),2));return new Uint8Array(b)}function f(a){for(var b=[],g=0;g<a.length;g++){var h=a[g].data;"object"==typeof h&&(h=f(h)),"number"==typeof h&&(h=e(h.toString(2))),"string"==typeof h&&(h=d(h));var i=h.size||h.byteLength||h.length,j=Math.ceil(Math.ceil(Math.log(i)/Math.log(2))/8),k=i.toString(2),l=new Array(7*j+7+1-k.length).join("0")+k,m=new Array(j).join("0")+"1"+l;b.push(c(a[g].id)),b.push(e(m)),b.push(h)}return new Blob(b,{type:"video/webm"})}function g(a){var b=0;if(a.keyframe&&(b|=128),a.invisible&&(b|=8),a.lacing&&(b|=a.lacing<<1),a.discardable&&(b|=1),a.trackNum>127)throw"TrackNumber > 127 not supported";var c=[128|a.trackNum,a.timecode>>8,255&a.timecode,b].map(function(a){return String.fromCharCode(a)}).join("")+a.frame;return c}function h(a){for(var b=a.RIFF[0].WEBP[0],c=b.indexOf("*"),d=0,e=[];4>d;d++)e[d]=b.charCodeAt(c+3+d);var f,g,h;return h=e[1]<<8|e[0],f=16383&h,h=e[3]<<8|e[2],g=16383&h,{width:f,height:g,data:b,riff:a}}function i(a){for(var b=0,c={};b<a.length;){var d=a.substr(b,4),e=parseInt(a.substr(b+4,4).split("").map(function(a){var b=a.charCodeAt(0).toString(2);return new Array(8-b.length+1).join("0")+b}).join(""),2),f=a.substr(b+4+4,e);b+=8+e,c[d]=c[d]||[],c[d].push("RIFF"==d||"LIST"==d?i(f):f)}return c}function j(a){return[].slice.call(new Uint8Array(new Float64Array([a]).buffer),0).map(function(a){return String.fromCharCode(a)}).reverse().join("")}function k(a){this.frames=[],this.duration=a||1,this.quality=100}return k.prototype.add=function(a,b){if("canvas"in a&&(a=a.canvas),"toDataURL"in a&&(a=a.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(a))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:a,duration:b||this.duration})},k.prototype.compile=function(){return new a(this.frames.map(function(a){var b=h(i(atob(a.image.slice(23))));return b.duration=a.duration,b}))},{Video:k,toWebM:a}}(),DiskStorage={init:function(){function a(a){a.createObjectStore(d.dataStoreName)}function b(){function a(a){b.objectStore(d.dataStoreName).get(a).onsuccess=function(b){d.callback&&d.callback(b.target.result,a)}}var b=c.transaction([d.dataStoreName],"readwrite");d.videoBlob&&b.objectStore(d.dataStoreName).put(d.videoBlob,"videoBlob"),d.gifBlob&&b.objectStore(d.dataStoreName).put(d.gifBlob,"gifBlob"),d.audioBlob&&b.objectStore(d.dataStoreName).put(d.audioBlob,"audioBlob"),a("audioBlob"),a("videoBlob"),a("gifBlob")}var c,d=this,e=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,f=1,g=location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),h=e.open(g,f);h.onerror=d.onError,h.onsuccess=function(){if(c=h.result,c.onerror=d.onError,c.setVersion)if(c.version!=f){var e=c.setVersion(f);e.onsuccess=function(){a(c),b()}}else b();else b()},h.onupgradeneeded=function(b){a(b.target.result)}},Fetch:function(a){return this.callback=a,this.init(),this},Store:function(a){return this.audioBlob=a.audioBlob,this.videoBlob=a.videoBlob,this.gifBlob=a.gifBlob,this.init(),this},onError:function(a){console.error(JSON.stringify(a,null,"	"))},dataStoreName:"recordRTC"};LZWEncoder=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m={},n=-1,o=12,p=5003,q=o,r=1<<o,s=[],t=[],u=p,v=0,w=!1,x=0,y=0,z=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],A=[],B=m.LZWEncoder=function(e,f,g,h){a=e,b=f,c=g,d=Math.max(2,h)},C=function(a,b){A[l++]=a,l>=254&&G(b)},D=function(a){E(u),v=j+2,w=!0,J(j,a)},E=function(a){for(var b=0;a>b;++b)s[b]=-1},F=m.compress=function(a,b){var c,d,e,f,m,o,p;for(i=a,w=!1,g=i,h=H(g),j=1<<a-1,k=j+1,v=j+2,l=0,f=I(),p=0,c=u;65536>c;c*=2)++p;p=8-p,o=u,E(o),J(j,b);a:for(;(e=I())!=n;)if(c=(e<<q)+f,d=e<<p^f,s[d]!=c){if(s[d]>=0){m=o-d,0==d&&(m=1);do if((d-=m)<0&&(d+=o),s[d]==c){f=t[d];continue a}while(s[d]>=0)}J(f,b),f=e,r>v?(t[d]=v++,s[d]=c):D(b)}else f=t[d];J(f,b),J(k,b)},G=(m.encode=function(c){c.writeByte(d),e=a*b,f=0,F(d+1,c),c.writeByte(0)},function(a){l>0&&(a.writeByte(l),a.writeBytes(A,0,l),l=0)}),H=function(a){return(1<<a)-1},I=function(){if(0==e)return n;--e;var a=c[f++];return 255&a},J=function(a,b){for(x&=z[y],y>0?x|=a<<y:x=a,y+=g;y>=8;)C(255&x,b),x>>=8,y-=8;if((v>h||w)&&(w?(h=H(g=i),w=!1):(++g,h=g==q?r:H(g))),a==k){for(;y>0;)C(255&x,b),x>>=8,y-=8;G(b)}};return B.apply(this,arguments),m},NeuQuant=function(){var a,b,c,d,e,f={},g=256,h=499,i=491,j=487,k=503,l=3*k,m=g-1,n=4,o=100,p=16,q=1<<p,r=10,s=10,t=q>>s,u=q<<r-s,v=g>>3,w=6,x=1<<w,y=v*x,z=30,A=10,B=1<<A,C=8,D=1<<C,E=A+C,F=1<<E,G=[],H=[],I=[],J=[],K=f.NeuQuant=function(a,f,h){var i,j;for(b=a,c=f,d=h,e=new Array(g),i=0;g>i;i++)e[i]=new Array(4),j=e[i],j[0]=j[1]=j[2]=(i<<n+8)/g,I[i]=q/g,H[i]=0},L=function(){for(var a,b,c,d=[],f=new Array(g),h=0;g>h;h++)f[e[h][3]]=h;for(a=0,b=0;g>b;b++)c=f[b],d[a++]=e[c][0],d[a++]=e[c][1],d[a++]=e[c][2];return d},M=function(){var a,b,c,d,f,h,i,j;for(i=0,j=0,a=0;g>a;a++){for(f=e[a],c=a,d=f[1],b=a+1;g>b;b++)h=e[b],h[1]<d&&(c=b,d=h[1]);if(h=e[c],a!=c&&(b=h[0],h[0]=f[0],f[0]=b,b=h[1],h[1]=f[1],f[1]=b,b=h[2],h[2]=f[2],f[2]=b,b=h[3],h[3]=f[3],f[3]=b),d!=i){for(G[i]=j+a>>1,b=i+1;d>b;b++)G[b]=a;i=d,j=a}}for(G[i]=j+m>>1,b=i+1;256>b;b++)G[b]=m},N=function(){var e,f,g,m,p,q,r,s,t,u,v,x,A,C;for(l>c&&(d=1),a=30+(d-1)/3,x=b,A=0,C=c,v=c/(3*d),u=v/o|0,s=B,q=y,r=q>>w,1>=r&&(r=0),e=0;r>e;e++)J[e]=s*((r*r-e*e)*D/(r*r));for(t=l>c?3:c%h!=0?3*h:c%i!=0?3*i:c%j!=0?3*j:3*k,e=0;v>e;)if(g=(255&x[A+0])<<n,m=(255&x[A+1])<<n,p=(255&x[A+2])<<n,f=R(g,m,p),Q(s,f,g,m,p),0!=r&&P(r,f,g,m,p),A+=t,A>=C&&(A-=c),e++,0==u&&(u=1),e%u==0)for(s-=s/a,q-=q/z,r=q>>w,1>=r&&(r=0),f=0;r>f;f++)J[f]=s*((r*r-f*f)*D/(r*r))},O=(f.map=function(a,b,c){var d,f,h,i,j,k,l;for(j=1e3,l=-1,d=G[b],f=d-1;g>d||f>=0;)g>d&&(k=e[d],h=k[1]-b,h>=j?d=g:(d++,0>h&&(h=-h),i=k[0]-a,0>i&&(i=-i),h+=i,j>h&&(i=k[2]-c,0>i&&(i=-i),h+=i,j>h&&(j=h,l=k[3])))),f>=0&&(k=e[f],h=b-k[1],h>=j?f=-1:(f--,0>h&&(h=-h),i=k[0]-a,0>i&&(i=-i),h+=i,j>h&&(i=k[2]-c,0>i&&(i=-i),h+=i,j>h&&(j=h,l=k[3]))));return l},f.process=function(){return N(),O(),M(),L()},function(){for(var a=0;g>a;a++)e[a][0]>>=n,e[a][1]>>=n,e[a][2]>>=n,e[a][3]=a}),P=function(a,b,c,d,f){var h,i,j,k,l,m,n;for(j=b-a,-1>j&&(j=-1),k=b+a,k>g&&(k=g),h=b+1,i=b-1,m=1;k>h||i>j;){if(l=J[m++],k>h){n=e[h++];try{n[0]-=l*(n[0]-c)/F,n[1]-=l*(n[1]-d)/F,n[2]-=l*(n[2]-f)/F}catch(o){}}if(i>j){n=e[i--];try{n[0]-=l*(n[0]-c)/F,n[1]-=l*(n[1]-d)/F,n[2]-=l*(n[2]-f)/F}catch(o){}}}},Q=function(a,b,c,d,f){var g=e[b];g[0]-=a*(g[0]-c)/B,g[1]-=a*(g[1]-d)/B,g[2]-=a*(g[2]-f)/B},R=function(a,b,c){var d,f,h,i,j,k,l,m,o,q;for(m=2147483647,o=m,k=-1,l=k,d=0;g>d;d++)q=e[d],f=q[0]-a,0>f&&(f=-f),h=q[1]-b,0>h&&(h=-h),f+=h,h=q[2]-c,0>h&&(h=-h),f+=h,m>f&&(m=f,k=d),i=f-(H[d]>>p-n),o>i&&(o=i,l=d),j=I[d]>>s,I[d]-=j,H[d]+=j<<r;return I[k]+=t,H[k]-=u,l};return K.apply(this,arguments),f},GIFEncoder=function(){function a(){this.bin=[]}for(var b=0,c={};256>b;b++)c[b]=String.fromCharCode(b);a.prototype.getData=function(){for(var a="",b=this.bin.length,d=0;b>d;d++)a+=c[this.bin[d]];return a},a.prototype.writeByte=function(a){this.bin.push(a)},a.prototype.writeUTFBytes=function(a){for(var b=a.length,c=0;b>c;c++)this.writeByte(a.charCodeAt(c))},a.prototype.writeBytes=function(a,b,c){for(var d=c||a.length,e=b||0;d>e;e++)this.writeByte(a[e])};{var d,e,f,g,h,i,j,k,l,m={},n=null,o=-1,p=0,q=!1,r=[],s=7,t=-1,u=!1,v=!0,w=!1,x=10,y=(m.setDelay=function(a){p=Math.round(a/10)},m.setDispose=function(a){a>=0&&(t=a)},m.setRepeat=function(a){a>=0&&(o=a)},m.setTransparent=function(a){n=a},m.addFrame=function(a,b){if(null==a||!q||null==g)throw new Error("Please call start method before calling addFrame");var c=!0;try{b?h=a:(h=a.getImageData(0,0,a.canvas.width,a.canvas.height).data,w||z(a.canvas.width,a.canvas.height)),C(),A(),v&&(F(),H(),o>=0&&G()),D(),E(),v||H(),J(),v=!1}catch(d){c=!1}return c},m.finish=function(){if(!q)return!1;var a=!0;q=!1;try{g.writeByte(59)}catch(b){a=!1}return a},function(){f=0,h=null,i=null,j=null,l=null,u=!1,v=!0}),z=(m.setFrameRate=function(a){15!=a&&(p=Math.round(100/a))},m.setQuality=function(a){1>a&&(a=1),x=a},m.setSize=function(a,b){(!q||v)&&(d=a,e=b,1>d&&(d=320),1>e&&(e=240),w=!0)}),A=(m.start=function(){y();var b=!0;u=!1,g=new a;try{g.writeUTFBytes("GIF89a")}catch(c){b=!1}return q=b},m.cont=function(){y();var b=!0;return u=!1,g=new a,q=b},function(){var a,b,c,d,e=i.length,g=e/3;for(j=[],a=new NeuQuant(i,e,x),l=a.process(),b=0,c=0;g>c;c++)d=a.map(255&i[b++],255&i[b++],255&i[b++]),r[d]=!0,j[c]=d;i=null,k=8,s=7,null!=n&&(f=B(n))}),B=function(a){var b;if(null==l)return-1;var c=(16711680&a)>>16,d=(65280&a)>>8,e=255&a,f=0,g=16777216,h=l.length;for(b=0;h>b;){var i=c-(255&l[b++]),j=d-(255&l[b++]),k=e-(255&l[b]),m=i*i+j*j+k*k,n=b/3;r[n]&&g>m&&(g=m,f=n),b++}return f},C=function(){var a,b,c,f,g,j=d,k=e;for(i=[],a=h,b=0,c=0;k>c;c++)for(f=0;j>f;f++)g=c*j*4+4*f,i[b++]=a[g],i[b++]=a[g+1],i[b++]=a[g+2]},D=function(){g.writeByte(33),g.writeByte(249),g.writeByte(4);var a,b;null==n?(a=0,b=0):(a=1,b=2),t>=0&&(b=7&t),b<<=2,g.writeByte(0|b|0|a),I(p),g.writeByte(f),g.writeByte(0)},E=function(){g.writeByte(44),I(0),I(0),I(d),I(e),g.writeByte(v?0:128|s)},F=function(){I(d),I(e),g.writeByte(240|s),g.writeByte(0),g.writeByte(0)},G=function(){g.writeByte(33),g.writeByte(255),g.writeByte(11),g.writeUTFBytes("NETSCAPE2.0"),g.writeByte(3),g.writeByte(1),I(o),g.writeByte(0)},H=function(){var a,b;for(g.writeBytes(l),a=768-l.length,b=0;a>b;b++)g.writeByte(0)},I=function(a){g.writeByte(255&a),g.writeByte(a>>8&255)},J=function(){var a=new LZWEncoder(d,e,j,k);a.encode(g)};m.stream=function(){return g},m.setProperties=function(a,b){q=a,v=b}}return m},window.TQ=window.TQ||{},function(){function a(){}var b,c,d="",e={audio:!0};a.current_level_id,a.current_time,a.startRecording=function(d,f){a.current_level_id=d,a.current_time=f,b?(audio.src=URL.createObjectURL(b),audio.play(),c&&c.startRecording()):navigator.getUserMedia(e,function(a){window.IsChrome&&(a=new window.MediaStream(a.getAudioTracks())),b=a,audio.src=URL.createObjectURL(b),audio.play(),c=window.RecordRTC(a,{type:"audio"}),c.startRecording()},function(){}),window.isAudio=!0,this.disabled=!0},a.getResultStartStop=function(){b?(audio.src=URL.createObjectURL(b),audio.play()):navigator.getUserMedia(e,function(a){window.IsChrome&&(a=new window.MediaStream(a.getAudioTracks())),b=a,audio.src=URL.createObjectURL(b),audio.play(),c=window.RecordRTC(a,{type:"audio"})},function(){}),window.isAudio=!0,this.disabled=!0,c&&c.stopRecording(function(){})},a.getResultSoundInfo=function(){return d},a.stopRecording=function(b){audio.src="",c&&c.stopRecording(function(d){var e=c.getBlob(),f="audio";b.append(f+"-blob",e);var g=new XMLHttpRequest;g.addEventListener("progress",function(a){a.position||a.loaded,a.totalSize||a.total},!1),g.upload&&(g.upload.onprogress=function(a){a.position||a.loaded,a.totalSize||a.total;$("#alert_div #alert_div_yesbtn").css("display","none").attr("status",""),$("#alert_div #alert_div_nobtn").css("display","none").attr("status",""),$("#alert_div #alert_div_abandonbtn").css("display","none").attr("status",""),$("#alert_div #alert_div_content").html(TQ.Dictionary.zhengzaibaocunluyin),easyDialog.open({container:"alert_div"})}),g.onreadystatechange=function(){4==this.readyState},g.addEventListener("load",function(b){sound_result=b.target.responseText,sound_result_obj=$.parseJSON(sound_result);var c='<a class="sound_click" href="javascript:void(0)" src="http://'+TQ.Config.DOMAIN_NAME+'/Weidongman/styles/images/new-sound.png" soundsrc="'+sound_result_obj.Path_full+'" soundpath="'+sound_result_obj.Path_full+'" wcyid="'+sound_result_obj.wcyid+'" title="'+sound_result_obj.name+'" authorid="'+sound_result_obj.AutherID+'" editorid="'+sound_result_obj.AutherID+'" createtime="'+sound_result_obj.CreateTime+'" edittime="'+sound_result_obj.EditTime+'" type="'+sound_result_obj.Type+'" etype="'+TQ.Element.ETYPE_AUDIO+'"></a>';TQ.Sound.recorder_sound_click($(c),a.current_level_id,a.current_time),easyDialog.close()},!1);var d="http://"+TQ.Config.DOMAIN_NAME+"/index.php/api/wcy/recorder_save.json";g.open("post",d,!0),g.send(b)})},TQ.Recorderobj=a}(),window.TQ=window.TQ||{},$(function(){function a(){}a.audio_stream=null,a.wcyid=null,a.userCategoryId=0,a.userTypeId=0,a.obj=null,a.actionList=null,a.tuding=0,a.wcyTempName=null,a.wcyLocalTempName=null,a.saveServerWcyProcess=0,a.uid="",a.ActionList=["ActionScript","AppleScript"],a.init=function(){TQ.Init.change_cate("#cate_1","#cate_2"),TQ.Init.change_cate("#cate_2","#cate_3"),storedb("TabsMenuCategory").remove(),storedb("TabsMenuContent").remove(),TQ.WCY.setMarkerSize(25)},a.saveServerWcy=function(){if(0==TQ.Init.saveServerWcyProcess){var a=TQ.WCY.getCurrentScene();if(null!=a&&void 0!=a){var b=a.getData();if(b.indexOf("mcImages")>=0){var c=new Object;c.isTimeSaveWcy=!0,""!=TQ.Init.wcyTempName&&null!=TQ.Init.wcyTempName&&(netSave(TQ.Init.wcyTempName,b,"微动漫,46",c),TQ.ScreenShot.SaveScreen(TQ.Init.wcyTempName,"微动漫,46"))}}console.log("保存到服务器")}},a.saveLocalWcy=function(){var a=TQ.WCY.getCurrentScene();if(null!=a&&void 0!=a){var b=a.getData();storedb("wcyData").remove({key:TQ.Init.wcyLocalTempName},function(){}),storedb("wcyData").insert({key:TQ.Init.wcyLocalTempName,content:b},function(){})}},a.publish=function(){$("#save").trigger("click"),$("#save-file #publish").val(1)},a.change_save_category=function(a,b,c,d){var e="",f="";if(storedb("SaveCategory").find({key:a},function(a,b){a||(f=b)}),""!=f)e=f[0].content;else{var g=new Object,h="",j="http://"+TQ.Config.API_DOMAIN_NAME+"/category/children/"+a,k=MYJS.ajax_obj.get(g,j,"json");k.success(function(b){console.log(b),e=b,storedb("SaveCategory").insert({key:a,content:b},function(){})})}if(""!=e&&e.list.length>0){var l=e.list;for(i=0;i<e.total;i++)h+='<option value="'+l[i].id+'">'+l[i].name+"</option>";$(b).css("display","").html('<select id="" name="">'+h+"</select>"),$(b).trigger("change"),$(c).trigger("change")}else $(b).html(""),$(c).html(""),$(d).html("")},a.change_cate=function(a,b){$(document).on("change",a,function(){var a=$(this).val(),c="",d="";if(null!=a&&""!=a)if(storedb("ChangeCategory").find({key:a},function(a,b){a||(d=b)}),""!=d)c=d[0].content;else{var e=new Object,f="",g="http://"+TQ.Config.API_DOMAIN_NAME+"/category/children/"+a,h=MYJS.ajax_obj.get(e,g,"json");h.success(function(b){c=b,storedb("ChangeCategory").insert({key:a,content:b},function(){})})}if(""!=c&&c.list.length>0){var j=c.list;for(i=0;i<c.total;i++)f+='<option value="'+j[i].id+'">'+j[i].name+"</option>";$(b).css("display","").html('<select id="" name="">'+f+"</select>"),$(b).trigger("change")}else $(b).css("display","none").html(""),$(b).trigger("change")})},a.getActionList=function(){var b=new Object,c=MYJS.ajax_obj.get(b,"http://"+TQ.Config.DOMAIN_NAME+"/index.php/api/actions/getActionList.json","json");c.success(function(b){a.actionList=b})},a.ActionInputAutoComplete=function(){$("#action_btn_win_action_name").autocomplete({source:function(a,b){$.ajax({url:"http://"+TQ.Config.DOMAIN_NAME+"/index.php/api/actions/getActionList.json",data:{keywords:a.term},success:function(a){b($.map(a.list,function(a){return{label:a.name,value:a.name,a_id:a.id,img:a.img}}))}})},select:function(a,b){$("#action_btn_win_action_img").attr("src","http://"+TQ.Config.DOMAIN_NAME+"/"+TQ.Config.actionImgPath+b.item.img),$("#action_btn_win_action_name").attr("a_id",b.item.a_id)},messages:{noResults:"",results:function(){}},minLength:0}).dblclick(function(){$(this).autocomplete("search","")}).data("ui-autocomplete")},a.showAllScenes=function(){var a=TQ.WCY.getCurrentScene();null!=a&&void 0!=a&&a.addHandler("sceneReady",function(){var b=a.levelNum();TQ.Scenes.scenes_open(b)})},a.showAllScenesSound=function(){var a=TQ.WCY.getCurrentScene();null!=a&&void 0!=a&&a.addHandler("sceneReady",function(){var b=a.getAllSounds();if(b){var c=b.length;$("#sound_ul").html(""),TQ.Sound.sound_open(c,b)}})},TQ.Init=a}()),$(document).on("mouseover","input",function(){TQ.InputMap.turnOff()}),$(document).on("mouseout","input",function(){TQ.InputMap.turnOn()}),$(document).on("mouseover",".fancybox-desktop",function(){TQ.InputMap.turnOff()}),$(document).on("mouseout",".fancybox-desktop",function(){TQ.InputMap.turnOn()}),$(document).on("mouseover","#easyDialogBox",function(){TQ.InputMap.turnOff()}),$(document).on("mouseout","#easyDialogBox",function(){TQ.InputMap.turnOn()}),window.TQ=window.TQ||{},function(){function a(){}a.isUserControlling=!1,a.t=0,a.initialize=function(){var b=TQ.FrameCounter.v,c=0,d=TQ.FrameCounter.max;a.body=$("#timer-slider"),a.body.slider({orientation:"horizontal",range:"min",min:c,max:d,value:b,start:a.onMouseStart,slide:a.onMouseAction,change:a.onChange,stop:a.onMouseStop}),$("#maxTimeValue").text(d),a.displayTime(b)},a.onMouseStart=function(){a.isUserControlling=!0},a.onMouseStop=function(){a.t=a.body.slider("value"),TQ.CommandMgr.directDo(new TQ.SetTimeCommand(a.t)),a.isUserControlling=!1},a.onMouseAction=function(b,c){a.displayTime(c.value),TQBase.LevelState.saveOperation(TQBase.LevelState.OP_TIMER_UI),a.t=a.body.slider("value"),TQ.CommandMgr.directDo(new TQ.SetTimeCommand(a.t))},a.onChange=function(){a.displayTime(a.t),$("#action_end_btn").slider("option","max",TQ.FrameCounter.max),$("#action_start_btn").slider("option","max",TQ.FrameCounter.max)},a.update=function(){a.isUserControlling||TQ.FrameCounter.isNew&&(a.t=TQ.FrameCounter.v,a.body.slider("value",a.t))},a.displayTime=function(a){$("#timeValueInput").val(a.toString())},TQ.TimerUI=a}(),window.TQ=window.TQ||{},function(){var a={};a.imageData=null,a.imageName="noname",a.SaveScreen=function(b,c){a.imageName=b,a.take(),a.upload(c)},a.take=function(){a.imageData=stage.toDataURL()},a.upload=function(b){assertNotNull(TQ.Dictionary.FoundNull,a.imageData);var c=new FormData;c.append("imageData",a.imageData),c.append("userID",localStorage.getItem("userID")),c.append("imageName",a.imageName),c.append("keywords",b),c.append("png","png");var d=MYJS.ajax_obj.post_formdata(c,"http://"+TQ.Config.DOMAIN_NAME+"/wcy/screenShot",NET_IO_DATA_TYPE);d.success(function(){displayInfo3()})},TQ.ScreenShot=a}(),jQuery.extend({createUploadIframe:function(a,b){var c="jUploadFrame"+a,d='<iframe id="'+c+'" name="'+c+'" style="position:absolute; top:-9999px; left:-9999px"';return window.ActiveXObject&&("boolean"==typeof b?d+=' src="javascript:false"':"string"==typeof b&&(d+=' src="'+b+'"')),d+=" />",jQuery(d).appendTo(document.body),jQuery("#"+c).get(0)},createUploadForm:function(a,b,c){var d="jUploadForm"+a,e="jUploadFile"+a,f=jQuery('<form  action="" method="POST" name="'+d+'" id="'+d+'" enctype="multipart/form-data"></form>');if(c)for(var g in c)jQuery('<input type="hidden" name="'+g+'" value="'+c[g]+'" />').appendTo(f);var h=jQuery("#"+b),i=jQuery(h).clone();return jQuery(h).attr("id",e),jQuery(h).before(i),jQuery(h).appendTo(f),jQuery(f).css("position","absolute"),jQuery(f).css("top","-1200px"),jQuery(f).css("left","-1200px"),jQuery(f).appendTo("body"),f},ajaxFileUpload:function(a){a=jQuery.extend({},jQuery.ajaxSettings,a);var b=(new Date).getTime(),c=jQuery.createUploadForm(b,a.fileElementId,"undefined"==typeof a.data?!1:a.data),d=(jQuery.createUploadIframe(b,a.secureuri),"jUploadFrame"+b),e="jUploadForm"+b;a.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart");var f=!1,g={};a.global&&jQuery.event.trigger("ajaxSend",[g,a]);var h=function(b){var e=document.getElementById(d);try{e.contentWindow?(g.responseText=e.contentWindow.document.body?e.contentWindow.document.body.innerHTML:null,g.responseXML=e.contentWindow.document.XMLDocument?e.contentWindow.document.XMLDocument:e.contentWindow.document):e.contentDocument&&(g.responseText=e.contentDocument.document.body?e.contentDocument.document.body.innerHTML:null,g.responseXML=e.contentDocument.document.XMLDocument?e.contentDocument.document.XMLDocument:e.contentDocument.document)}catch(h){jQuery.handleError(a,g,null,h)}if(g||"timeout"==b){f=!0;var i;try{if(i="timeout"!=b?"success":"error","error"!=i){var j=jQuery.uploadHttpData(g,a.dataType);a.success&&a.success(j,i),a.global&&jQuery.event.trigger("ajaxSuccess",[g,a])}else jQuery.handleError(a,g,i)}catch(h){i="error",jQuery.handleError(a,g,i,h)}a.global&&jQuery.event.trigger("ajaxComplete",[g,a]),a.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop"),a.complete&&a.complete(g,i),jQuery(e).unbind(),setTimeout(function(){try{jQuery(e).remove(),jQuery(c).remove()}catch(b){jQuery.handleError(a,g,null,b)}},100),g=null}};a.timeout>0&&setTimeout(function(){f||h("timeout")},a.timeout);try{var c=jQuery("#"+e);jQuery(c).attr("action",a.url),jQuery(c).attr("method","POST"),jQuery(c).attr("target",d),c.encoding?jQuery(c).attr("encoding","multipart/form-data"):jQuery(c).attr("enctype","multipart/form-data"),jQuery(c).submit()}catch(i){jQuery.handleError(a,g,null,i)}return jQuery("#"+d).load(h),{abort:function(){}}},uploadHttpData:function(r,type){var data=!type;return data="xml"==type||data?r.responseXML:r.responseText,"script"==type&&jQuery.globalEval(data),"json"==type&&eval("data = "+data),"html"==type&&jQuery("<div>").html(data).evalScripts(),data},handleError:function(a,b,c,d){a.error&&a.error.call(a.context||a,b,c,d),a.global&&(a.context?jQuery(a.context):jQuery.event).trigger("ajaxError",[b,a,d])}});